{"version":3,"sources":["../../frag.start","../lib/UUID.js/dist/uuid.core.js","../lib/almond/almond.js","../../frag.end","../lib/kamino.js/lib/kamino.js","../lib/MessageChannel.js/lib/message_channel.js","lib/utils.js","common/rsvp.js","common/oasis/shims.js","common/oasis/util.js","common/oasis/xhr.js","common/oasis/message_channel.js","common/oasis/logger.js","common/oasis/connect.js","common/oasis/version.js","common/oasis/config.js","common/oasis/sandbox.js","common/oasis/sandbox_init.js","common/oasis/events.js","common/oasis/service.js","common/oasis/base_adapter.js","common/oasis/iframe_adapter.js","common/oasis/webworker_adapter.js","common/oasis/inline_adapter.js","common/oasis.js","VersionInfo.js","GlympseAdapterDefines.js","lib/rafUtils.js","adapter/ViewerMonitor.js","lib/ajax.js","lib/image.js","lib/md5.js","adapter/models/Account.js","adapter/models/MemberInvite.js","adapter/models/MemberPermissions.js","adapter/models/MemberTicket.js","adapter/models/Member.js","adapter/models/Card.js","adapter/CardsController.js","adapter/models/PublicGroup.js","adapter/PublicGroupController.js","adapter/CoreController.js","adapter/models/GlympseInvite.js","adapter/GlympseLoader.js","adapter/Client.js","adapter/Host.js","GlympseAdapter.js","../../../../../../../../module-insertRequire.js"],"names":["root","factory","define","amd","glympse","GlympseAdapter","this","UUID","requirejs","require","undef","hasProp","obj","prop","hasOwn","call","normalize","name","baseName","nameParts","nameSegment","mapValue","foundMap","lastIndex","foundI","foundStarMap","starI","i","j","part","normalizedBaseParts","baseParts","split","map","config","starMap","length","nodeIdCompat","jsSuffixRegExp","test","replace","charAt","slice","concat","splice","join","makeRequire","relName","forceSync","args","aps","arguments","push","req","apply","makeNormalize","makeLoad","depName","value","defined","callDep","waiting","defining","main","Error","splitPrefix","prefix","index","indexOf","substring","makeRelParts","makeConfig","makeMap","handlers","Object","prototype","hasOwnProperty","relParts","plugin","parts","relResourceName","f","n","pr","p","exports","e","module","id","uri","deps","callback","cjsModule","ret","usingExports","callbackType","load","undefined","alt","setTimeout","cfg","_defined","jQuery","generate","a","_gri","b","_ha","NaN","Math","random","c","toString","d","window","isProperty","forEach","getClass","Kamino","VERSION","KaminoException","number","message","isExtended","Date","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","exception","charIndexBuggy","floor","property","constructor","members","__proto__","original","result","parent","object","Properties","size","valueOf","isFunction","isConstructor","Escapes","\\","\"","\b","\f","\n","\r","\t","toPaddedString","width","quote","symbol","charCodeAt","isElement","o","HTMLElement","nodeType","nodeName","serialize","properties","whitespace","indentation","stack","originalClassName","className","results","element","any","regExpSource","regExpModifiers","Function","toJSON","toUTCString","Number","POSITIVE_INFINITY","NEGATIVE_INFINITY","isNaN","source","ignoreCase","global","multiline","stringify","filter","Index","Source","fromCharCode","String","Unescapes","/","t","r","abort","SyntaxError","parseString","begin","position","lex","sign","dateString","RegExp","Infinity","get","update","walk","parse","clone","functionToCheck","isInWorker","Worker","Window","self","usePoly","a_slice","MessageChannel","isWindowToWindowMessage","currentTarget","log","verbose","unshift","console","messagePorts","MessagePort","uuid","_entangledPortUuid","destinationUrl","_listeners","_messageQueue","_messageQueueEnabled","_currentTarget","start","event","shift","dispatchEvent","close","_getEntangledPort","postMessage","messageClone","target","encodeEvent","_enqueueEvent","_messageEvent","addEventListener","type","listener","removeEventListener","Array","listeners","_getPort","portClone","messageEvent","copyEvents","loadPort","port","_createPort","origin","channel","port1","port2","_channel","msgArgs","MessagePortConstructor","data","ports","messageChannel","encodedMessage","strippedPorts","_strippedPort","msg","msgPorts","messageQueue","portRef","decodeEvent","fakeEvent","propagationHandler","propagateEvent","_addMessagePortEventHandler","attachEvent","_overrideMessageEventListener","originalAddEventListener","addEventListenerName","targetRemoveEventListener","removeEventListenerName","messageEventType","messageHandlerWrapper","originalHandler","entangledPort","reset","otherWindow","targetOrigin","OriginalWorker","worker","_addEventListener","transferList","returnVal","propId","returnDataStreamVal","v","defCfg","localStorage","utils","dbg","minLevel","info","level","JSON","generateClone","ctor","domain","location","hostname","getCookie","val","getItem","cookies","document","cookie","idx","x","substr","decodeURIComponent","setCookie","daysExpire","setItem","setTime","getTime","toGMTString","getCfgVal","propertyName","idCfg","setCfgVal","newValue","capFirst","str","toUpperCase","toUpperCamel","words","out","len","mapProps","targ","props","dataStreamProp","simplifyInvite","invite","toLowerCase","normalizeInvite","ilen","ilen2","cleanInvites","invites","isArray","arg","lib$rsvp$utils$$objectOrFunction","lib$rsvp$utils$$isFunction","lib$rsvp$utils$$isMaybeThenable","lib$rsvp$utils$$F","lib$rsvp$events$$indexOf","callbacks","l","lib$rsvp$events$$callbacksFor","_promiseCallbacks","lib$rsvp$config$$configure","lib$rsvp$config$$config","lib$rsvp$instrument$$scheduleFlush","entry","lib$rsvp$instrument$$queue","payload","guid","key","childGuid","childId","error","lib$rsvp$instrument$$instrument","eventName","promise","child","_guidKey","_id","detail","_result","label","_label","timeStamp","lib$rsvp$utils$$now","lib$rsvp$$internal$$withOwnPromise","TypeError","lib$rsvp$$internal$$noop","lib$rsvp$$internal$$getThen","then","lib$rsvp$$internal$$GET_THEN_ERROR","lib$rsvp$$internal$$tryThen","fulfillmentHandler","rejectionHandler","lib$rsvp$$internal$$handleForeignThenable","thenable","async","sealed","lib$rsvp$$internal$$resolve","lib$rsvp$$internal$$fulfill","reason","lib$rsvp$$internal$$reject","lib$rsvp$$internal$$handleOwnThenable","_state","lib$rsvp$$internal$$FULFILLED","lib$rsvp$$internal$$REJECTED","_onError","lib$rsvp$$internal$$subscribe","lib$rsvp$$internal$$handleMaybeThenable","maybeThenable","lib$rsvp$$internal$$publishRejection","lib$rsvp$$internal$$publish","lib$rsvp$$internal$$PENDING","_subscribers","instrument","lib$rsvp$instrument$$default","onFulfillment","onRejection","subscribers","settled","lib$rsvp$$internal$$invokeCallback","lib$rsvp$$internal$$ErrorObject","lib$rsvp$$internal$$tryCatch","lib$rsvp$$internal$$TRY_CATCH_ERROR","succeeded","failed","hasCallback","lib$rsvp$$internal$$initializePromise","resolver","resolved","lib$rsvp$enumerator$$makeSettledResult","state","lib$rsvp$enumerator$$Enumerator","Constructor","input","abortOnReject","_instanceConstructor","_abortOnReject","_validateInput","_input","_remaining","_init","_enumerate","_validationError","lib$rsvp$promise$all$$all","entries","lib$rsvp$enumerator$$default","lib$rsvp$promise$race$$race","lib$rsvp$utils$$isArray","resolve","lib$rsvp$promise$resolve$$resolve","lib$rsvp$promise$reject$$reject","lib$rsvp$promise$$needsResolver","lib$rsvp$promise$$needsNew","lib$rsvp$promise$$Promise","lib$rsvp$promise$$counter","lib$rsvp$all$settled$$AllSettled","_superConstructor","lib$rsvp$all$settled$$allSettled","lib$rsvp$promise$$default","lib$rsvp$all$$all","array","all","lib$rsvp$asap$$asap","lib$rsvp$asap$$queue","lib$rsvp$asap$$len","lib$rsvp$asap$$scheduleFlush","lib$rsvp$asap$$useNextTick","nextTick","process","version","versions","node","match","setImmediate","lib$rsvp$asap$$flush","lib$rsvp$asap$$useVertxTimer","lib$rsvp$asap$$vertxNext","lib$rsvp$asap$$useMutationObserver","iterations","observer","lib$rsvp$asap$$BrowserMutationObserver","createTextNode","observe","characterData","lib$rsvp$asap$$useMessageChannel","onmessage","lib$rsvp$asap$$useSetTimeout","lib$rsvp$asap$$attemptVertex","vertx","runOnLoop","runOnContext","lib$rsvp$defer$$defer","deferred","reject","lib$rsvp$filter$$filter","promises","filterFn","values","filtered","newLength","lib$rsvp$promise$hash$$PromiseHash","lib$rsvp$hash$settled$$HashSettled","lib$rsvp$hash$settled$$hashSettled","lib$rsvp$hash$$hash","lib$rsvp$promise$hash$$default","lib$rsvp$map$$map","mapFn","lib$rsvp$node$$Result","lib$rsvp$node$$getThen","lib$rsvp$node$$ERROR","lib$rsvp$node$$tryApply","s","lib$rsvp$node$$makeObject","_","argumentNames","lib$rsvp$node$$arrayResult","lib$rsvp$node$$wrapThenable","onFulFillment","lib$rsvp$node$$denodeify","nodeFunc","options","fn","promiseInput","lib$rsvp$node$$needsPromiseInput","lib$rsvp$node$$GET_THEN_ERROR","err","lib$rsvp$node$$handlePromiseInput","lib$rsvp$node$$handleValueInput","lib$rsvp$race$$race","race","lib$rsvp$reject$$reject","lib$rsvp$resolve$$resolve","lib$rsvp$rethrow$$rethrow","lib$rsvp$$async","lib$rsvp$$on","lib$rsvp$$off","lib$rsvp$utils$$_isArray","now","lib$rsvp$utils$$o_create","create","lib$rsvp$events$$default","mixin","on","allCallbacks","off","trigger","_eachEntry","_settledAt","_willSettleAt","_makeResult","enumerator","lib$rsvp$promise$all$$default","lib$rsvp$promise$race$$default","lib$rsvp$promise$resolve$$default","lib$rsvp$promise$reject$$default","lib$rsvp$promise$$guidKey","cast","catch","finally","lib$rsvp$all$settled$$default","lib$rsvp$all$$default","lib$rsvp$asap$$default","lib$rsvp$asap$$browserWindow","lib$rsvp$asap$$browserGlobal","MutationObserver","WebKitMutationObserver","lib$rsvp$asap$$isNode","lib$rsvp$asap$$isWorker","Uint8ClampedArray","importScripts","lib$rsvp$defer$$default","lib$rsvp$filter$$default","lib$rsvp$hash$settled$$default","lib$rsvp$hash$$default","lib$rsvp$map$$default","lib$rsvp$node$$default","lib$rsvp$race$$default","lib$rsvp$reject$$default","lib$rsvp$resolve$$default","lib$rsvp$rethrow$$default","lib$rsvp$$callbacks","lib$rsvp$$eventName","lib$rsvp$umd$$RSVP","Promise","allSettled","hash","hashSettled","denodeify","rethrow","defer","EventTarget","configure","__exports__","o_create","K","receiver","detachEvent","isNativeFunc","func","a_forEach","fun","thisp","a_reduce","reduce","opt_initialValue","isValueSet","a_map","thisArg","T","A","k","O","kValue","mappedValue","a_indexOf","searchElement","abs","max","a_filter","objects","res","__dependency1__","assert","assertion","string","noop","mustImplement","extend","OasisObject","initialize","delegate","delegateeProperty","delegatedMethod","delegatee","uniq","seen","item","_seen","reverseMerge","RSVP","acceptsHeader","dataType","accepts","xhrSetRequestHeader","xhr","setRequestHeader","xhrGetLoadStatus","status","xdrGetLoadStatus","oasis","url","Oasis","NONE","XHR","open","timeout","onload","getLoadStatus","responseText","onprogress","ontimeout","onerror","send","*","text","html","xml","json","XMLHttpRequest","XDomainRequest","OasisPort","getRequestId","oasisId","requestId","OasisMessageChannel","request","clearObservers","errorObserver","onRequest","binding","getResponse","PostMessageMessageChannel","PostMessagePort","destroy","_callbacks","wrappedCallback","configuration","eventCallback","foundCallback","Logger","enabled","enable","disable","logger","__dependency2__","__dependency3__","registerHandler","capability","setupCapability","receivedPorts","rejectCapability","connect","errorCallback","connectConsumers","consumers","connectCallbacks","connectPromise","connectCapabilities","capabilities","eventPorts","handler","portFor","Consumer","consumer","defered","OasisConfiguration","allowSameOrigin","reconnect","OasisSandbox","connections","wiretaps","pkg","packages","adapter","adapters","iframe","_capabilitiesToConnect","_filterCapabilities","envPortDefereds","sandboxPortDefereds","channels","firstLoad","promisePorts","initializeSandbox","waitForLoad","_waitForLoadDeferred","wiretap","portPromise","createAndTransferCapabilities","createChannels","connectPorts","sandbox","services","service","proxyPort","createChannel","environmentPort","sandboxPort","direction","originalSend","destroyChannels","allSandboxPortPromises","accumulator","startSandbox","terminate","isTerminated","terminateSandbox","filterCapabilities","_loadDeferred","autoInitializeSandbox","navigator","userAgent","connectSandbox","webworker","Events","listenerArrays","clear","Service","xform","events","requests","init","superConstructor","ServiceProto","__dependency4__","BaseAdapter","_unsupportedCapabilities","unsupportedCapabilities","addUnsupportedCapability","unsupported","initializeOasisSandbox","isOasisInitialization","oasisLoaded","didConnect","createInitializationMessage","oasisLoadedMessage","sandboxInitializedMessage","verifySandbox","sandboxUrl","link","createElement","href","host","protocol","verifyCurrentSandboxOrigin","fail","linkOriginal","linkCurrent","IframeAdapter","sandboxAttributes","useSandbox","disabled","popups","seamless","height","errorHandler","sandboxException","contentWindow","src","initializationHandler","el","oasisLoadHandler","head","documentElement","getElementsByTagName","appendChild","terminated","loadHandler","parentNode","removeChild","rawPorts","WebworkerAdapter","InlineAdapter","sandboxedOasis","body","oasisPort","fetchResource","code","wrapResource","pseudoEvent","applySandboxJS","sandboxFn","loadSandboxJS","didCreate","Version","Sandbox","inline","createSandbox","register","buildDate","Defines","PORT","MAP","REQUESTS","addInvites","addGroups","addMarkers","addTwitterTopics","addTwitterUsers","refreshView","removeInvites","setApiServices","setPadding","setUserInfo","updateSetting","REQUESTS_LOCAL","getInvites","getMap","getMapContainer","generateRoute","ignoreDestinations","CARDS","requestCards","joinRequest","joinRequestCancel","getActiveJoinRequests","removeMember","activity","getCards","REQUEST_TYPES","LINK","CLIPBOARD","SMS","EMAIL","ACCOUNT","CORE","addGroup","getGroups","removeGroup","getOrgObjects","getEtaInfo","accountCreate","accountDelete","generateAuthToken","getUserInfo","setUserName","setUserAvatar","hasAccount","createRequest","MSG","AccountCreateStatus","AccountDeleteStatus","AccountLoginStatus","UserNameUpdateStatus","UserAvatarUpdateStatus","UserInfoStatus","CreateRequestStatus","AdapterInit","AdapterReady","CardInit","CardReady","CardsInitEnd","CardsInitStart","CardUpdated","CardAdded","CardRemoved","CardsRequestStatus","CardsJoinRequestStatus","CardsJoinRequestCancelStatus","CardActivityStatus","CardsActiveJoinRequestsStatus","CardRemoveMemberStatus","CardsLocationRequestStatus","GroupLoaded","GroupStatus","OrgObjects","EtaInfo","DataUpdate","InviteAdded","InviteClicked","InviteError","InviteInit","InviteReady","InviteRemoved","OauthError","Progress","StateUpdate","ViewerInit","ViewerReady","ViewerZoomChanged","STATE","Avatar","Destination","Eta","InviteEnd","InviteCompleted","InviteStart","Message","Name","Owner","Phase","Arrived","Expired","NoInvites","App","w","g","broadcastTypes","DATA","ETA","INVITE_STATUS","ZOOM","GlympseAdapterDefines","rafSetTimeout","delay","run","ctime","handle","cancel","performance","targetTime","raf","initted","syncRaf","glib","syncRAF","requestAnimationFrame","cancelAnimationFrame","rafClearTimeout","clearTimeout","rafSetInterval","setInterval","rafClearInterval","clearInterval","lib","MapController","controller","viewerInit","viewerElement","glyEvents","INIT","notify","m","viewerReady","READY","viewerApp","app","cmdQueue","that","cmd","infoUpdate","viewerData","iprop","ipropName","ipropIndex","idInvite","ddata","owner","newProps","$","unknowns","_timer","found","jlen","propMap","lat","lng","notifyExpired","viewerEta","idProp","cEtaVal","cEtaTime","viewerInviteAdded","viewerInviteRemoved","viewerInviteClicked","viewerInviteError","viewerOauthTokenError","viewerZoomChanged","stateExpired","endTime","propExpired","expired","viewer","PROPERTIES","INVITE_ADDED","INVITE_REMOVED","INVITE_CLICKED","INVITE_ERROR","OAUTH_TOKEN_ERROR","ZOOM_CHANGED","shutdown","getCurrentProperties","getCurrentValue","idProperty","GetInviteProperties","GetInviteProperty","addAuthData","authHeaderPrefix","authToken","opts","headers","Authorization","parseResponse","response","time","meta","errorDetail","error_detail","processResponse","account","attempts","warn","generateToken","authResult","retry","invalidToken","attempt","MAX_ATTEMPTS","round","lastResult","DEFAULT_OPTIONS","ALL","POST","contentType","api","requestHeaders","makeRequest","jqOptions","auth","retryOnError","useHeader","useGlympseAuthHeader","context","Deferred","token","getToken","ajax","always","post","delete","batch","batchEndpoint","batchRequests","batchResponse","responses","items","getImageType","arrayBuffer","dv","DataView","nume1","getUint8","nume2","hex","imageProcessing","imageScale","imgData","gettingImageInfoCallback","image","scaleX","scaleY","resultImageWidth","resultImageHeight","startX","startY","persistRatio","maintainAspectRatio","scaleSize","maxSize","minSize","canvas","getContext","fillStyle","convertAlpha","fillRect","sidebandFill","drawImage","img","dataURI","toDataURL","byteString","atob","ab","ArrayBuffer","ia","Uint8Array","remove","imageInfo","blob","Blob","urlCreator","URL","webkitURL","imageUrl","createObjectURL","Image","loadDataArrayByUrl","responseType","safeAdd","y","lsw","msw","bitRotateLeft","num","cnt","md5cmn","q","md5ff","md5gg","md5hh","md5ii","binlMD5","olda","oldb","oldc","oldd","binl2rstr","output","length32","rstr2binl","length8","rstrMD5","rstr2hex","hexTab","str2rstrUTF8","unescape","encodeURIComponent","rawMD5","hexMD5","md5","Account","saveSettings","currentEnvKeys","hashApiKey","currentKeySettings","settings","idEnvironment","cAccountInfo","getSettings","apiKey","deleteSettings","getNewToken","gettingTokenProcess","urlLogin","access_token","cAcctTokenName","cSvcUserName","userId","checkToken","apiUrl","svr","cUserName","createAccount","cApiKey","urlCreate","resp","pw","password","cSvcPassword","cPassword","svcGlympse","cEnvSandbox","cEnvProduction","isAnon","getId","anonymousUserName","anonymousPassword","u","anonymous","setName","newName","setAvatar","urlOrAvatarDataArray","loadImageCallback","dataArray","imageScaleCallback","processData","avatarCfg","avatar","imageScaleConfig","param","MemberInvite","getData","setData","MemberPermissions","MemberTicket","Member","permissions","ticket","getInvite","getPermissions","getTicket","getMetaData","metadata","Card","idCard","addMember","memberData","member","membersIndex","getMemberById","memberIndex","removeMemberById","removedMember","checkMemberInviteCode","inviteCode","getMemberInviteCode","isInviteCodeAdded","addInviteCode","getInviteCode","removeMemberInviteCode","removeInviteCode","inviteCodesIndex","inviteCodes","removedInviteCode","inviteIndex","addJoinInvite","inviteData","joinInvitesIndex","joinInvites","removeJoinInviteById","inviteId","removedInvite","lastUpdated","loaded","getMembers","isLoaded","getIdCard","mem","mems","card","action","addedInviteCode","getName","setDataFromStream","streamArray","processMemberResult","newMember","processInviteResult","newInvite","updateResult","cardId","newMembers","newJoinCardInvites","cleanActions","cleanStream","actionType","ref","member_id","last_modified","user_id","invite_id","dirty","method","setLastUpdatingTime","getLastUpdatingTime","CardsController","accountInitComplete","sig","initialized","cardInvites","loadCards","cardsMode","getInviteById","pollingInterval","pollInterval","accountDeleteComplete","loadCard","fullRequest","getCard","updateCard","loadingCard","isNew","cardInvite","loadingCards","cardsReady","cardsIndex","processGetCard","processUpdateCard","allCardIds","cards","cardUrl","from","to","getParams","from_ts","to_ts","cacheCardUpdatedEvts","flushCardUpdatedEvtCache","cachedCardUpdatedEvts","invite_code","invitees","memberList","list","requestConfig","address","memberId","getUserId","getCardActivity","fromTS","toTS","pollCards","cardsInvitesToLoad","rl","PublicGroup","groupName","requestGroup","demoGroup","urlEvents","next","processGroupUpdate","processGroupInitial","urlInitial","urlInitialParams","sendStatus","invitesAdded","invitesRemoved","invitesSwapped","group","parseGroupListResponse","lastUpdate","memIndex","user","swap","inv","findUser","invOld","invNew","users","branding","userLocated","idGroup","cDemoGroups","getUsers","numUsers","numInvites","demoDriversCount","driversCount","min","demoshuttleMembers","demoshuttle","bryanaroundseattle","public","seattleteam","org_id","PublicGroupController","loadGroup","groupInfo","validate","header","groups","pollGroups","timerRequest","makeGroupRequests","PG_POLL_INTERVAL","reqParams","orgId","demoObjects","cDemoOrgObjects","objType","groupsToLoad","svcEnRoute","removingInvites","argsArr","arr","hierarchy","waypoints","demoWaypoints","stopTime","defaultStopTime","last_modified_by","group_name","access","created_time","creator_agent_id","CoreController","routes","route","end","waypoint","wpList","params","routeUrl","fields","wpLen","eta","summary","travel_time","groupController","mapSvc","getService","GroupController","getAccount","GlympseInvite","loadInvite","inviteUrl","inviteParams","cMaxAttempts","cModuleId","no_count","getIdInvite","getError","getReference","reference","setAccount","GlympseLoader","inviteToLoad","Client","oasisLocal","elementViewer","loadInvites","sendEvent","invitesCard","tickets","invitesTicket","cfgAdapter","pg","twt","cardsController","coreController","coreReq","cfgViewer","loadMap","cfgNew","newMapElement","cfgMonitor","viewerMonitor","glympser","splitMulti","generateTargAction","generateRequestAction","updateProgress","curr","progressCurrent","progressTotal","total","notifyApp","evtMsg","hideUpdates","hideEvents","sendOasisMessage","oasisInitialize","newPort","connectQueue","connectedOasis","extInit","connectQueueEnabled","connectQueueMaxSize","getConfig","publishedConfig","getInviteProperties","getInviteProperty","cfgInvite","glympseLoader","cfgApp","availableServices","invitesReferences","mapCardTicketInvites","hostQueueMaxSize","cfgClient","invitesGlympse","ViewerMonitor","svcs","intInterfaces","core","aid","idApi","listApis","customInterfaces","interfaces","ext","extInterfaces","appMethods","extViewerCfg","published","initSettings","isCard","loadViewer","targetCards","targetCardsLength","mStateUpdate","ticketInvite","inviteCards","inviteError","Host","callbackInitialized","interfaceTypes","intType","generateCustomInterface","callbackConnected","requestGetInfo","infoType","Connected","idPort","cfgSandbox","getInfo","loadGlympser","loader","loaderUrl","loaderPath","loaderEnvironment","loaderVersion","cache","done","client","hostElement","adapterLabel","glympserLoader","VersionInfo","appName","appVersion","X-GlympseAgent","mapHtmlElement","cfgHost"],"mappings":"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","file":"glympse-adapter-2.12.1.min.js","sourcesContent":["// default:\n// ========\n//(function() {\n//\n(function (root, factory)\n{\n    if (typeof define === 'function' && define.amd)\n\t{\n        //Allow using this built library as an AMD module\n        //in another project. That other project will only\n        //see this AMD call, not the internal modules in\n        //the closure below.\n        define([], factory);\n    }\n\n\t//Browser globals case. Just assign the\n\t//result to a property on the global.\n\t// ---> Set up in GlympseAdapter.js\n\troot.glympse || (root.glympse = {});\n\troot.glympse.GlympseAdapter = factory();\n\n}(this, function () {\n    //almond, and your modules will be inlined here\n","/*\n Version: core-1.0\n The MIT License: Copyright (c) 2012 LiosK.\n*/\nfunction UUID(){}UUID.generate=function(){var a=UUID._gri,b=UUID._ha;return b(a(32),8)+\"-\"+b(a(16),4)+\"-\"+b(16384|a(12),4)+\"-\"+b(32768|a(14),4)+\"-\"+b(a(48),12)};UUID._gri=function(a){return 0>a?NaN:30>=a?0|Math.random()*(1<<a):53>=a?(0|1073741824*Math.random())+1073741824*(0|Math.random()*(1<<a-30)):NaN};UUID._ha=function(a,b){for(var c=a.toString(16),d=b-c.length,e=\"0\";0<d;d>>>=1,e+=e)d&1&&(c=e+c);return c};\n\ndefine(\"UUID\", function(){});\n\n","/**\n * @license almond 0.3.3 Copyright jQuery Foundation and other contributors.\n * Released under MIT license, http://github.com/requirejs/almond/LICENSE\n */\n//Going sloppy to avoid 'use strict' string cost, but strict practices should\n//be followed.\n/*global setTimeout: false */\n\nvar requirejs, require, define;\n(function (undef) {\n    var main, req, makeMap, handlers,\n        defined = {},\n        waiting = {},\n        config = {},\n        defining = {},\n        hasOwn = Object.prototype.hasOwnProperty,\n        aps = [].slice,\n        jsSuffixRegExp = /\\.js$/;\n\n    function hasProp(obj, prop) {\n        return hasOwn.call(obj, prop);\n    }\n\n    /**\n     * Given a relative module name, like ./something, normalize it to\n     * a real name that can be mapped to a path.\n     * @param {String} name the relative name\n     * @param {String} baseName a real name that the name arg is relative\n     * to.\n     * @returns {String} normalized name\n     */\n    function normalize(name, baseName) {\n        var nameParts, nameSegment, mapValue, foundMap, lastIndex,\n            foundI, foundStarMap, starI, i, j, part, normalizedBaseParts,\n            baseParts = baseName && baseName.split(\"/\"),\n            map = config.map,\n            starMap = (map && map['*']) || {};\n\n        //Adjust any relative paths.\n        if (name) {\n            name = name.split('/');\n            lastIndex = name.length - 1;\n\n            // If wanting node ID compatibility, strip .js from end\n            // of IDs. Have to do this here, and not in nameToUrl\n            // because node allows either .js or non .js to map\n            // to same file.\n            if (config.nodeIdCompat && jsSuffixRegExp.test(name[lastIndex])) {\n                name[lastIndex] = name[lastIndex].replace(jsSuffixRegExp, '');\n            }\n\n            // Starts with a '.' so need the baseName\n            if (name[0].charAt(0) === '.' && baseParts) {\n                //Convert baseName to array, and lop off the last part,\n                //so that . matches that 'directory' and not name of the baseName's\n                //module. For instance, baseName of 'one/two/three', maps to\n                //'one/two/three.js', but we want the directory, 'one/two' for\n                //this normalization.\n                normalizedBaseParts = baseParts.slice(0, baseParts.length - 1);\n                name = normalizedBaseParts.concat(name);\n            }\n\n            //start trimDots\n            for (i = 0; i < name.length; i++) {\n                part = name[i];\n                if (part === '.') {\n                    name.splice(i, 1);\n                    i -= 1;\n                } else if (part === '..') {\n                    // If at the start, or previous value is still ..,\n                    // keep them so that when converted to a path it may\n                    // still work when converted to a path, even though\n                    // as an ID it is less than ideal. In larger point\n                    // releases, may be better to just kick out an error.\n                    if (i === 0 || (i === 1 && name[2] === '..') || name[i - 1] === '..') {\n                        continue;\n                    } else if (i > 0) {\n                        name.splice(i - 1, 2);\n                        i -= 2;\n                    }\n                }\n            }\n            //end trimDots\n\n            name = name.join('/');\n        }\n\n        //Apply map config if available.\n        if ((baseParts || starMap) && map) {\n            nameParts = name.split('/');\n\n            for (i = nameParts.length; i > 0; i -= 1) {\n                nameSegment = nameParts.slice(0, i).join(\"/\");\n\n                if (baseParts) {\n                    //Find the longest baseName segment match in the config.\n                    //So, do joins on the biggest to smallest lengths of baseParts.\n                    for (j = baseParts.length; j > 0; j -= 1) {\n                        mapValue = map[baseParts.slice(0, j).join('/')];\n\n                        //baseName segment has  config, find if it has one for\n                        //this name.\n                        if (mapValue) {\n                            mapValue = mapValue[nameSegment];\n                            if (mapValue) {\n                                //Match, update name to the new value.\n                                foundMap = mapValue;\n                                foundI = i;\n                                break;\n                            }\n                        }\n                    }\n                }\n\n                if (foundMap) {\n                    break;\n                }\n\n                //Check for a star map match, but just hold on to it,\n                //if there is a shorter segment match later in a matching\n                //config, then favor over this star map.\n                if (!foundStarMap && starMap && starMap[nameSegment]) {\n                    foundStarMap = starMap[nameSegment];\n                    starI = i;\n                }\n            }\n\n            if (!foundMap && foundStarMap) {\n                foundMap = foundStarMap;\n                foundI = starI;\n            }\n\n            if (foundMap) {\n                nameParts.splice(0, foundI, foundMap);\n                name = nameParts.join('/');\n            }\n        }\n\n        return name;\n    }\n\n    function makeRequire(relName, forceSync) {\n        return function () {\n            //A version of a require function that passes a moduleName\n            //value for items that may need to\n            //look up paths relative to the moduleName\n            var args = aps.call(arguments, 0);\n\n            //If first arg is not require('string'), and there is only\n            //one arg, it is the array form without a callback. Insert\n            //a null so that the following concat is correct.\n            if (typeof args[0] !== 'string' && args.length === 1) {\n                args.push(null);\n            }\n            return req.apply(undef, args.concat([relName, forceSync]));\n        };\n    }\n\n    function makeNormalize(relName) {\n        return function (name) {\n            return normalize(name, relName);\n        };\n    }\n\n    function makeLoad(depName) {\n        return function (value) {\n            defined[depName] = value;\n        };\n    }\n\n    function callDep(name) {\n        if (hasProp(waiting, name)) {\n            var args = waiting[name];\n            delete waiting[name];\n            defining[name] = true;\n            main.apply(undef, args);\n        }\n\n        if (!hasProp(defined, name) && !hasProp(defining, name)) {\n            throw new Error('No ' + name);\n        }\n        return defined[name];\n    }\n\n    //Turns a plugin!resource to [plugin, resource]\n    //with the plugin being undefined if the name\n    //did not have a plugin prefix.\n    function splitPrefix(name) {\n        var prefix,\n            index = name ? name.indexOf('!') : -1;\n        if (index > -1) {\n            prefix = name.substring(0, index);\n            name = name.substring(index + 1, name.length);\n        }\n        return [prefix, name];\n    }\n\n    //Creates a parts array for a relName where first part is plugin ID,\n    //second part is resource ID. Assumes relName has already been normalized.\n    function makeRelParts(relName) {\n        return relName ? splitPrefix(relName) : [];\n    }\n\n    /**\n     * Makes a name map, normalizing the name, and using a plugin\n     * for normalization if necessary. Grabs a ref to plugin\n     * too, as an optimization.\n     */\n    makeMap = function (name, relParts) {\n        var plugin,\n            parts = splitPrefix(name),\n            prefix = parts[0],\n            relResourceName = relParts[1];\n\n        name = parts[1];\n\n        if (prefix) {\n            prefix = normalize(prefix, relResourceName);\n            plugin = callDep(prefix);\n        }\n\n        //Normalize according\n        if (prefix) {\n            if (plugin && plugin.normalize) {\n                name = plugin.normalize(name, makeNormalize(relResourceName));\n            } else {\n                name = normalize(name, relResourceName);\n            }\n        } else {\n            name = normalize(name, relResourceName);\n            parts = splitPrefix(name);\n            prefix = parts[0];\n            name = parts[1];\n            if (prefix) {\n                plugin = callDep(prefix);\n            }\n        }\n\n        //Using ridiculous property names for space reasons\n        return {\n            f: prefix ? prefix + '!' + name : name, //fullName\n            n: name,\n            pr: prefix,\n            p: plugin\n        };\n    };\n\n    function makeConfig(name) {\n        return function () {\n            return (config && config.config && config.config[name]) || {};\n        };\n    }\n\n    handlers = {\n        require: function (name) {\n            return makeRequire(name);\n        },\n        exports: function (name) {\n            var e = defined[name];\n            if (typeof e !== 'undefined') {\n                return e;\n            } else {\n                return (defined[name] = {});\n            }\n        },\n        module: function (name) {\n            return {\n                id: name,\n                uri: '',\n                exports: defined[name],\n                config: makeConfig(name)\n            };\n        }\n    };\n\n    main = function (name, deps, callback, relName) {\n        var cjsModule, depName, ret, map, i, relParts,\n            args = [],\n            callbackType = typeof callback,\n            usingExports;\n\n        //Use name if no relName\n        relName = relName || name;\n        relParts = makeRelParts(relName);\n\n        //Call the callback to define the module, if necessary.\n        if (callbackType === 'undefined' || callbackType === 'function') {\n            //Pull out the defined dependencies and pass the ordered\n            //values to the callback.\n            //Default to [require, exports, module] if no deps\n            deps = !deps.length && callback.length ? ['require', 'exports', 'module'] : deps;\n            for (i = 0; i < deps.length; i += 1) {\n                map = makeMap(deps[i], relParts);\n                depName = map.f;\n\n                //Fast path CommonJS standard dependencies.\n                if (depName === \"require\") {\n                    args[i] = handlers.require(name);\n                } else if (depName === \"exports\") {\n                    //CommonJS module spec 1.1\n                    args[i] = handlers.exports(name);\n                    usingExports = true;\n                } else if (depName === \"module\") {\n                    //CommonJS module spec 1.1\n                    cjsModule = args[i] = handlers.module(name);\n                } else if (hasProp(defined, depName) ||\n                           hasProp(waiting, depName) ||\n                           hasProp(defining, depName)) {\n                    args[i] = callDep(depName);\n                } else if (map.p) {\n                    map.p.load(map.n, makeRequire(relName, true), makeLoad(depName), {});\n                    args[i] = defined[depName];\n                } else {\n                    throw new Error(name + ' missing ' + depName);\n                }\n            }\n\n            ret = callback ? callback.apply(defined[name], args) : undefined;\n\n            if (name) {\n                //If setting exports via \"module\" is in play,\n                //favor that over return value and exports. After that,\n                //favor a non-undefined return value over exports use.\n                if (cjsModule && cjsModule.exports !== undef &&\n                        cjsModule.exports !== defined[name]) {\n                    defined[name] = cjsModule.exports;\n                } else if (ret !== undef || !usingExports) {\n                    //Use the return value from the function.\n                    defined[name] = ret;\n                }\n            }\n        } else if (name) {\n            //May just be an object definition for the module. Only\n            //worry about defining if have a module name.\n            defined[name] = callback;\n        }\n    };\n\n    requirejs = require = req = function (deps, callback, relName, forceSync, alt) {\n        if (typeof deps === \"string\") {\n            if (handlers[deps]) {\n                //callback in this case is really relName\n                return handlers[deps](callback);\n            }\n            //Just return the module wanted. In this scenario, the\n            //deps arg is the module name, and second arg (if passed)\n            //is just the relName.\n            //Normalize module name, if it contains . or ..\n            return callDep(makeMap(deps, makeRelParts(callback)).f);\n        } else if (!deps.splice) {\n            //deps is a config object, not an array.\n            config = deps;\n            if (config.deps) {\n                req(config.deps, config.callback);\n            }\n            if (!callback) {\n                return;\n            }\n\n            if (callback.splice) {\n                //callback is an array, which means it is a dependency list.\n                //Adjust args if there are dependencies\n                deps = callback;\n                callback = relName;\n                relName = null;\n            } else {\n                deps = undef;\n            }\n        }\n\n        //Support require(['a'])\n        callback = callback || function () {};\n\n        //If relName is a function, it is an errback handler,\n        //so remove it.\n        if (typeof relName === 'function') {\n            relName = forceSync;\n            forceSync = alt;\n        }\n\n        //Simulate async callback;\n        if (forceSync) {\n            main(undef, deps, callback, relName);\n        } else {\n            //Using a non-zero value because of concern for what old browsers\n            //do, and latest browsers \"upgrade\" to 4 if lower value is used:\n            //http://www.whatwg.org/specs/web-apps/current-work/multipage/timers.html#dom-windowtimers-settimeout:\n            //If want a value immediately, use require('id') instead -- something\n            //that works in almond on the global level, but not guaranteed and\n            //unlikely to work in other AMD implementations.\n            setTimeout(function () {\n                main(undef, deps, callback, relName);\n            }, 4);\n        }\n\n        return req;\n    };\n\n    /**\n     * Just drops the config on the floor, but returns req in case\n     * the config return value is used.\n     */\n    req.config = function (cfg) {\n        return req(cfg);\n    };\n\n    /**\n     * Expose module registry for debugging and tooling\n     */\n    requirejs._defined = defined;\n\n    define = function (name, deps, callback) {\n        if (typeof name !== 'string') {\n            throw new Error('See almond README: incorrect module build, no module name');\n        }\n\n        //This module may not have dependencies\n        if (!deps.splice) {\n            //deps is not an array, so probably means\n            //an object literal or factory function for\n            //the value. Adjust args.\n            callback = deps;\n            deps = [];\n        }\n\n        if (!hasProp(defined, name) && !hasProp(waiting, name)) {\n            waiting[name] = [name, deps, callback];\n        }\n    };\n\n    define.amd = {\n        jQuery: true\n    };\n}());\n\ndefine(\"almond\", function(){});\n\n","// default:\n// ========\n//})();\n//\n    //The modules for your project will be inlined above\n    //this snippet. Ask almond to synchronously require the\n    //module value for 'main' here and return it as the\n    //value to use for the public API for the built file.\n    return requirejs('GlympseAdapter');\n}));\n","/*! Kamino v0.0.1 | http://github.com/Cyril-sf/kamino.js | Copyright 2012, Kit Cambridge | http://kit.mit-license.org */\n(function(window) {\n  // Convenience aliases.\n  var getClass = {}.toString, isProperty, forEach, undef;\n\n  Kamino = {};\n  if (typeof exports !== 'undefined') {\n    if (typeof module !== 'undefined' && module.exports) {\n      exports = module.exports = Kamino;\n    }\n    exports.Kamino = Kamino;\n  } else {\n    window['Kamino'] = Kamino;\n  }\n\n  Kamino.VERSION = '0.1.0';\n\n  KaminoException = function() {\n    this.name = \"KaminoException\";\n    this.number = 25;\n    this.message = \"Uncaught Error: DATA_CLONE_ERR: Kamino Exception 25\";\n  };\n\n  // Test the `Date#getUTC*` methods. Based on work by @Yaffle.\n  var isExtended = new Date(-3509827334573292);\n  try {\n    // The `getUTCFullYear`, `Month`, and `Date` methods return nonsensical\n    // results for certain dates in Opera >= 10.53.\n    isExtended = isExtended.getUTCFullYear() == -109252 && isExtended.getUTCMonth() === 0 && isExtended.getUTCDate() == 1 &&\n      // Safari < 2.0.2 stores the internal millisecond time value correctly,\n      // but clips the values returned by the date methods to the range of\n      // signed 32-bit integers ([-2 ** 31, 2 ** 31 - 1]).\n      isExtended.getUTCHours() == 10 && isExtended.getUTCMinutes() == 37 && isExtended.getUTCSeconds() == 6 && isExtended.getUTCMilliseconds() == 708;\n  } catch (exception) {}\n\n  // IE <= 7 doesn't support accessing string characters using square\n  // bracket notation. IE 8 only supports this for primitives.\n  var charIndexBuggy = \"A\"[0] != \"A\";\n\n  // Define additional utility methods if the `Date` methods are buggy.\n  if (!isExtended) {\n    var floor = Math.floor;\n    // A mapping between the months of the year and the number of days between\n    // January 1st and the first of the respective month.\n    var Months = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];\n    // Internal: Calculates the number of days between the Unix epoch and the\n    // first day of the given month.\n    var getDay = function (year, month) {\n      return Months[month] + 365 * (year - 1970) + floor((year - 1969 + (month = +(month > 1))) / 4) - floor((year - 1901 + month) / 100) + floor((year - 1601 + month) / 400);\n    };\n  }\n\n  // Internal: Determines if a property is a direct property of the given\n  // object. Delegates to the native `Object#hasOwnProperty` method.\n  if (!(isProperty = {}.hasOwnProperty)) {\n    isProperty = function (property) {\n      var members = {}, constructor;\n      if ((members.__proto__ = null, members.__proto__ = {\n        // The *proto* property cannot be set multiple times in recent\n        // versions of Firefox and SeaMonkey.\n        \"toString\": 1\n      }, members).toString != getClass) {\n        // Safari <= 2.0.3 doesn't implement `Object#hasOwnProperty`, but\n        // supports the mutable *proto* property.\n        isProperty = function (property) {\n          // Capture and break the object's prototype chain (see section 8.6.2\n          // of the ES 5.1 spec). The parenthesized expression prevents an\n          // unsafe transformation by the Closure Compiler.\n          var original = this.__proto__, result = property in (this.__proto__ = null, this);\n          // Restore the original prototype chain.\n          this.__proto__ = original;\n          return result;\n        };\n      } else {\n        // Capture a reference to the top-level `Object` constructor.\n        constructor = members.constructor;\n        // Use the `constructor` property to simulate `Object#hasOwnProperty` in\n        // other environments.\n        isProperty = function (property) {\n          var parent = (this.constructor || constructor).prototype;\n          return property in this && !(property in parent && this[property] === parent[property]);\n        };\n      }\n      members = null;\n      return isProperty.call(this, property);\n    };\n  }\n\n  // Internal: Normalizes the `for...in` iteration algorithm across\n  // environments. Each enumerated key is yielded to a `callback` function.\n  forEach = function (object, callback) {\n    var size = 0, Properties, members, property, forEach;\n\n    // Tests for bugs in the current environment's `for...in` algorithm. The\n    // `valueOf` property inherits the non-enumerable flag from\n    // `Object.prototype` in older versions of IE, Netscape, and Mozilla.\n    (Properties = function () {\n      this.valueOf = 0;\n    }).prototype.valueOf = 0;\n\n    // Iterate over a new instance of the `Properties` class.\n    members = new Properties();\n    for (property in members) {\n      // Ignore all properties inherited from `Object.prototype`.\n      if (isProperty.call(members, property)) {\n        size++;\n      }\n    }\n    Properties = members = null;\n\n    // Normalize the iteration algorithm.\n    if (!size) {\n      // A list of non-enumerable properties inherited from `Object.prototype`.\n      members = [\"valueOf\", \"toString\", \"toLocaleString\", \"propertyIsEnumerable\", \"isPrototypeOf\", \"hasOwnProperty\", \"constructor\"];\n      // IE <= 8, Mozilla 1.0, and Netscape 6.2 ignore shadowed non-enumerable\n      // properties.\n      forEach = function (object, callback) {\n        var isFunction = getClass.call(object) == \"[object Function]\", property, length;\n        for (property in object) {\n          // Gecko <= 1.0 enumerates the `prototype` property of functions under\n          // certain conditions; IE does not.\n          if (!(isFunction && property == \"prototype\") && isProperty.call(object, property)) {\n            callback(property);\n          }\n        }\n        // Manually invoke the callback for each non-enumerable property.\n        for (length = members.length; property = members[--length]; isProperty.call(object, property) && callback(property));\n      };\n    } else if (size == 2) {\n      // Safari <= 2.0.4 enumerates shadowed properties twice.\n      forEach = function (object, callback) {\n        // Create a set of iterated properties.\n        var members = {}, isFunction = getClass.call(object) == \"[object Function]\", property;\n        for (property in object) {\n          // Store each property name to prevent double enumeration. The\n          // `prototype` property of functions is not enumerated due to cross-\n          // environment inconsistencies.\n          if (!(isFunction && property == \"prototype\") && !isProperty.call(members, property) && (members[property] = 1) && isProperty.call(object, property)) {\n            callback(property);\n          }\n        }\n      };\n    } else {\n      // No bugs detected; use the standard `for...in` algorithm.\n      forEach = function (object, callback) {\n        var isFunction = getClass.call(object) == \"[object Function]\", property, isConstructor;\n        for (property in object) {\n          if (!(isFunction && property == \"prototype\") && isProperty.call(object, property) && !(isConstructor = property === \"constructor\")) {\n            callback(property);\n          }\n        }\n        // Manually invoke the callback for the `constructor` property due to\n        // cross-environment inconsistencies.\n        if (isConstructor || isProperty.call(object, (property = \"constructor\"))) {\n          callback(property);\n        }\n      };\n    }\n    return forEach(object, callback);\n  };\n\n  // Public: Serializes a JavaScript `value` as a string. The optional\n  // `filter` argument may specify either a function that alters how object and\n  // array members are serialized, or an array of strings and numbers that\n  // indicates which properties should be serialized. The optional `width`\n  // argument may be either a string or number that specifies the indentation\n  // level of the output.\n\n  // Internal: A map of control characters and their escaped equivalents.\n  var Escapes = {\n    \"\\\\\": \"\\\\\\\\\",\n    '\"': '\\\\\"',\n    \"\\b\": \"\\\\b\",\n    \"\\f\": \"\\\\f\",\n    \"\\n\": \"\\\\n\",\n    \"\\r\": \"\\\\r\",\n    \"\\t\": \"\\\\t\"\n  };\n\n  // Internal: Converts `value` into a zero-padded string such that its\n  // length is at least equal to `width`. The `width` must be <= 6.\n  var toPaddedString = function (width, value) {\n    // The `|| 0` expression is necessary to work around a bug in\n    // Opera <= 7.54u2 where `0 == -0`, but `String(-0) !== \"0\"`.\n    return (\"000000\" + (value || 0)).slice(-width);\n  };\n\n  // Internal: Double-quotes a string `value`, replacing all ASCII control\n  // characters (characters with code unit values between 0 and 31) with\n  // their escaped equivalents. This is an implementation of the\n  // `Quote(value)` operation defined in ES 5.1 section 15.12.3.\n  var quote = function (value) {\n    var result = '\"', index = 0, symbol;\n    for (; symbol = value.charAt(index); index++) {\n      // Escape the reverse solidus, double quote, backspace, form feed, line\n      // feed, carriage return, and tab characters.\n      result += '\\\\\"\\b\\f\\n\\r\\t'.indexOf(symbol) > -1 ? Escapes[symbol] :\n        // If the character is a control character, append its Unicode escape\n        // sequence; otherwise, append the character as-is.\n        (Escapes[symbol] = symbol < \" \" ? \"\\\\u00\" + toPaddedString(2, symbol.charCodeAt(0).toString(16)) : symbol);\n    }\n    return result + '\"';\n  };\n\n  // Internal: detects if an object is a DOM element.\n  // http://stackoverflow.com/questions/384286/javascript-isdom-how-do-you-check-if-a-javascript-object-is-a-dom-object\n  var isElement = function(o) {\n    return (\n      typeof HTMLElement === \"object\" ? o instanceof HTMLElement : //DOM2\n      o && typeof o === \"object\" && o.nodeType === 1 && typeof o.nodeName===\"string\"\n    );\n  };\n\n  // Internal: Recursively serializes an object. Implements the\n  // `Str(key, holder)`, `JO(value)`, and `JA(value)` operations.\n  var serialize = function (property, object, callback, properties, whitespace, indentation, stack) {\n    var value = object[property], originalClassName, className, year, month, date, time, hours, minutes, seconds, milliseconds, results, element, index, length, prefix, any, result,\n        regExpSource, regExpModifiers = \"\";\n    if( value instanceof Error || value instanceof Function) {\n      throw new KaminoException();\n    }\n    if( isElement( value ) ) {\n      throw new KaminoException();\n    }\n    if (typeof value == \"object\" && value) {\n      originalClassName = getClass.call(value);\n      if (originalClassName == \"[object Date]\" && !isProperty.call(value, \"toJSON\")) {\n        if (value > -1 / 0 && value < 1 / 0) {\n          value = value.toUTCString().replace(\"GMT\", \"UTC\");\n        } else {\n          value = null;\n        }\n      } else if (typeof value.toJSON == \"function\" && ((originalClassName != \"[object Number]\" && originalClassName != \"[object String]\" && originalClassName != \"[object Array]\") || isProperty.call(value, \"toJSON\"))) {\n        // Prototype <= 1.6.1 adds non-standard `toJSON` methods to the\n        // `Number`, `String`, `Date`, and `Array` prototypes. JSON 3\n        // ignores all `toJSON` methods on these objects unless they are\n        // defined directly on an instance.\n        value = value.toJSON(property);\n      }\n    }\n    if (callback) {\n      // If a replacement function was provided, call it to obtain the value\n      // for serialization.\n      value = callback.call(object, property, value);\n    }\n    if (value === null) {\n      return \"null\";\n    }\n    if (value === undefined) {\n      return undefined;\n    }\n    className = getClass.call(value);\n    if (className == \"[object Boolean]\") {\n      // Booleans are represented literally.\n      return \"\" + value;\n    } else if (className == \"[object Number]\") {\n      // Kamino numbers must be finite. `Infinity` and `NaN` are serialized as\n      // `\"null\"`.\n      if( value === Number.POSITIVE_INFINITY ) {\n        return \"Infinity\";\n      } else if( value === Number.NEGATIVE_INFINITY ) {\n        return \"NInfinity\";\n      } else if( isNaN( value ) ) {\n        return \"NaN\";\n      }\n      return \"\" + value;\n    } else if (className == \"[object RegExp]\") {\n      // Strings are double-quoted and escaped.\n      regExpSource = value.source;\n      regExpModifiers += value.ignoreCase ? \"i\" : \"\";\n      regExpModifiers += value.global ? \"g\" : \"\";\n      regExpModifiers += value.multiline ? \"m\" : \"\";\n\n      regExpSource = quote(charIndexBuggy ? regExpSource.split(\"\") : regExpSource);\n      regExpModifiers = quote(charIndexBuggy ? regExpModifiers.split(\"\") : regExpModifiers);\n\n      // Adds the RegExp prefix.\n      value = '^' + regExpSource + regExpModifiers;\n\n      return value;\n    } else if (className == \"[object String]\") {\n      // Strings are double-quoted and escaped.\n      value = quote(charIndexBuggy ? value.split(\"\") : value);\n\n      if( originalClassName == \"[object Date]\") {\n        // Adds the Date prefix.\n        value = '%' + value;\n      }\n\n      return value;\n    }\n    // Recursively serialize objects and arrays.\n    if (typeof value == \"object\") {\n      // Check for cyclic structures. This is a linear search; performance\n      // is inversely proportional to the number of unique nested objects.\n      for (length = stack.length; length--;) {\n        if (stack[length] === value) {\n          return \"&\" + length;\n        }\n      }\n      // Add the object to the stack of traversed objects.\n      stack.push(value);\n      results = [];\n      // Save the current indentation level and indent one additional level.\n      prefix = indentation;\n      indentation += whitespace;\n      if (className == \"[object Array]\") {\n        // Recursively serialize array elements.\n        for (index = 0, length = value.length; index < length; any || (any = true), index++) {\n          element = serialize(index, value, callback, properties, whitespace, indentation, stack);\n          results.push(element === undef ? \"null\" : element);\n        }\n        result = any ? (whitespace ? \"[\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"]\" : (\"[\" + results.join(\",\") + \"]\")) : \"[]\";\n      } else {\n        // Recursively serialize object members. Members are selected from\n        // either a user-specified list of property names, or the object\n        // itself.\n        forEach(properties || value, function (property) {\n          var element = serialize(property, value, callback, properties, whitespace, indentation, stack);\n          if (element !== undef) {\n            // According to ES 5.1 section 15.12.3: \"If `gap` {whitespace}\n            // is not the empty string, let `member` {quote(property) + \":\"}\n            // be the concatenation of `member` and the `space` character.\"\n            // The \"`space` character\" refers to the literal space\n            // character, not the `space` {width} argument provided to\n            // `JSON.stringify`.\n            results.push(quote(charIndexBuggy ? property.split(\"\") : property) + \":\" + (whitespace ? \" \" : \"\") + element);\n          }\n          any || (any = true);\n        });\n        result = any ? (whitespace ? \"{\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"}\" : (\"{\" + results.join(\",\") + \"}\")) : \"{}\";\n      }\n      return result;\n    }\n  };\n\n  // Public: `Kamino.stringify`. See ES 5.1 section 15.12.3.\n  Kamino.stringify = function (source, filter, width) {\n    var whitespace, callback, properties;\n    if (typeof filter == \"function\" || typeof filter == \"object\" && filter) {\n      if (getClass.call(filter) == \"[object Function]\") {\n        callback = filter;\n      } else if (getClass.call(filter) == \"[object Array]\") {\n        // Convert the property names array into a makeshift set.\n        properties = {};\n        for (var index = 0, length = filter.length, value; index < length; value = filter[index++], ((getClass.call(value) == \"[object String]\" || getClass.call(value) == \"[object Number]\") && (properties[value] = 1)));\n      }\n    }\n    if (width) {\n      if (getClass.call(width) == \"[object Number]\") {\n        // Convert the `width` to an integer and create a string containing\n        // `width` number of space characters.\n        if ((width -= width % 1) > 0) {\n          for (whitespace = \"\", width > 10 && (width = 10); whitespace.length < width; whitespace += \" \");\n        }\n      } else if (getClass.call(width) == \"[object String]\") {\n        whitespace = width.length <= 10 ? width : width.slice(0, 10);\n      }\n    }\n    // Opera <= 7.54u2 discards the values associated with empty string keys\n    // (`\"\"`) only if they are used directly within an object member list\n    // (e.g., `!(\"\" in { \"\": 1})`).\n    return serialize(\"\", (value = {}, value[\"\"] = source, value), callback, properties, whitespace, \"\", []);\n  };\n\n  // Public: Parses a source string.\n  var fromCharCode = String.fromCharCode;\n\n  // Internal: A map of escaped control characters and their unescaped\n  // equivalents.\n  var Unescapes = {\n    \"\\\\\": \"\\\\\",\n    '\"': '\"',\n    \"/\": \"/\",\n    \"b\": \"\\b\",\n    \"t\": \"\\t\",\n    \"n\": \"\\n\",\n    \"f\": \"\\f\",\n    \"r\": \"\\r\"\n  };\n\n  // Internal: Stores the parser state.\n  var Index, Source, stack;\n\n  // Internal: Resets the parser state and throws a `SyntaxError`.\n  var abort = function() {\n    Index = Source = null;\n    throw SyntaxError();\n  };\n\n  var parseString = function(prefix) {\n    prefix = prefix || \"\";\n    var source = Source, length = source.length, value, symbol, begin, position;\n    // Advance to the next character and parse a Kamino string at the\n    // current position. String tokens are prefixed with the sentinel\n    // `@` character to distinguish them from punctuators.\n    for (value = prefix, Index++; Index < length;) {\n      symbol = source[Index];\n      if (symbol < \" \") {\n        // Unescaped ASCII control characters are not permitted.\n        abort();\n      } else if (symbol == \"\\\\\") {\n        // Parse escaped Kamino control characters, `\"`, `\\`, `/`, and\n        // Unicode escape sequences.\n        symbol = source[++Index];\n        if ('\\\\\"/btnfr'.indexOf(symbol) > -1) {\n          // Revive escaped control characters.\n          value += Unescapes[symbol];\n          Index++;\n        } else if (symbol == \"u\") {\n          // Advance to the first character of the escape sequence.\n          begin = ++Index;\n          // Validate the Unicode escape sequence.\n          for (position = Index + 4; Index < position; Index++) {\n            symbol = source[Index];\n            // A valid sequence comprises four hexdigits that form a\n            // single hexadecimal value.\n            if (!(symbol >= \"0\" && symbol <= \"9\" || symbol >= \"a\" && symbol <= \"f\" || symbol >= \"A\" && symbol <= \"F\")) {\n              // Invalid Unicode escape sequence.\n              abort();\n            }\n          }\n          // Revive the escaped character.\n          value += fromCharCode(\"0x\" + source.slice(begin, Index));\n        } else {\n          // Invalid escape sequence.\n          abort();\n        }\n      } else {\n        if (symbol == '\"') {\n          // An unescaped double-quote character marks the end of the\n          // string.\n          break;\n        }\n        // Append the original character as-is.\n        value += symbol;\n        Index++;\n      }\n    }\n    if (source[Index] == '\"') {\n      Index++;\n      // Return the revived string.\n      return value;\n    }\n    // Unterminated string.\n    abort();\n  };\n\n  // Internal: Returns the next token, or `\"$\"` if the parser has reached\n  // the end of the source string. A token may be a string, number, `null`\n  // literal, `NaN` literal or Boolean literal.\n  var lex = function () {\n    var source = Source, length = source.length, symbol, value, begin, position, sign,\n        dateString, regExpSource, regExpModifiers;\n    while (Index < length) {\n      symbol = source[Index];\n      if (\"\\t\\r\\n \".indexOf(symbol) > -1) {\n        // Skip whitespace tokens, including tabs, carriage returns, line\n        // feeds, and space characters.\n        Index++;\n      } else if (\"{}[]:,\".indexOf(symbol) > -1) {\n        // Parse a punctuator token at the current position.\n        Index++;\n        return symbol;\n      } else if (symbol == '\"') {\n        // Parse strings.\n        return parseString(\"@\");\n      } else if (symbol == '%') {\n        // Parse dates.\n        Index++;\n        symbol = source[Index];\n        if(symbol == '\"') {\n          dateString = parseString();\n          return new Date( dateString );\n        }\n        abort();\n      } else if (symbol == '^') {\n        // Parse regular expressions.\n        Index++;\n        symbol = source[Index];\n        if(symbol == '\"') {\n          regExpSource = parseString();\n\n          symbol = source[Index];\n          if(symbol == '\"') {\n            regExpModifiers = parseString();\n\n            return new RegExp( regExpSource, regExpModifiers );\n          }\n        }\n        abort();\n      } else if (symbol == '&') {\n        // Parse object references.\n        Index++;\n        symbol = source[Index];\n        if (symbol >= \"0\" && symbol <= \"9\") {\n          Index++;\n          return stack[symbol];\n        }\n        abort();\n      } else {\n        // Parse numbers and literals.\n        begin = Index;\n        // Advance the scanner's position past the sign, if one is\n        // specified.\n        if (symbol == \"-\") {\n          sign = true;\n          symbol = source[++Index];\n        }\n        // Parse an integer or floating-point value.\n        if (symbol >= \"0\" && symbol <= \"9\") {\n          // Leading zeroes are interpreted as octal literals.\n          if (symbol == \"0\" && (symbol = source[Index + 1], symbol >= \"0\" && symbol <= \"9\")) {\n            // Illegal octal literal.\n            abort();\n          }\n          sign = false;\n          // Parse the integer component.\n          for (; Index < length && (symbol = source[Index], symbol >= \"0\" && symbol <= \"9\"); Index++);\n          // Floats cannot contain a leading decimal point; however, this\n          // case is already accounted for by the parser.\n          if (source[Index] == \".\") {\n            position = ++Index;\n            // Parse the decimal component.\n            for (; position < length && (symbol = source[position], symbol >= \"0\" && symbol <= \"9\"); position++);\n            if (position == Index) {\n              // Illegal trailing decimal.\n              abort();\n            }\n            Index = position;\n          }\n          // Parse exponents.\n          symbol = source[Index];\n          if (symbol == \"e\" || symbol == \"E\") {\n            // Skip past the sign following the exponent, if one is\n            // specified.\n            symbol = source[++Index];\n            if (symbol == \"+\" || symbol == \"-\") {\n              Index++;\n            }\n            // Parse the exponential component.\n            for (position = Index; position < length && (symbol = source[position], symbol >= \"0\" && symbol <= \"9\"); position++);\n            if (position == Index) {\n              // Illegal empty exponent.\n              abort();\n            }\n            Index = position;\n          }\n          // Coerce the parsed value to a JavaScript number.\n          return +source.slice(begin, Index);\n        }\n        // A negative sign may only precede numbers.\n        if (sign) {\n          abort();\n        }\n        // `true`, `false`, `Infinity`, `-Infinity`, `NaN` and `null` literals.\n        if (source.slice(Index, Index + 4) == \"true\") {\n          Index += 4;\n          return true;\n        } else if (source.slice(Index, Index + 5) == \"false\") {\n          Index += 5;\n          return false;\n        } else if (source.slice(Index, Index + 8) == \"Infinity\") {\n          Index += 8;\n          return Infinity;\n        } else if (source.slice(Index, Index + 9) == \"NInfinity\") {\n          Index += 9;\n          return -Infinity;\n        } else if (source.slice(Index, Index + 3) == \"NaN\") {\n          Index += 3;\n          return NaN;\n        } else if (source.slice(Index, Index + 4) == \"null\") {\n          Index += 4;\n          return null;\n        }\n        // Unrecognized token.\n        abort();\n      }\n    }\n    // Return the sentinel `$` character if the parser has reached the end\n    // of the source string.\n    return \"$\";\n  };\n\n  // Internal: Parses a Kamino `value` token.\n  var get = function (value) {\n    var results, any, key;\n    if (value == \"$\") {\n      // Unexpected end of input.\n      abort();\n    }\n    if (typeof value == \"string\") {\n      if (value[0] == \"@\") {\n        // Remove the sentinel `@` character.\n        return value.slice(1);\n      }\n      // Parse object and array literals.\n      if (value == \"[\") {\n        // Parses a Kamino array, returning a new JavaScript array.\n        results = [];\n        stack[stack.length] = results;\n        for (;; any || (any = true)) {\n          value = lex();\n          // A closing square bracket marks the end of the array literal.\n          if (value == \"]\") {\n            break;\n          }\n          // If the array literal contains elements, the current token\n          // should be a comma separating the previous element from the\n          // next.\n          if (any) {\n            if (value == \",\") {\n              value = lex();\n              if (value == \"]\") {\n                // Unexpected trailing `,` in array literal.\n                abort();\n              }\n            } else {\n              // A `,` must separate each array element.\n              abort();\n            }\n          }\n          // Elisions and leading commas are not permitted.\n          if (value == \",\") {\n            abort();\n          }\n          results.push(get(typeof value == \"string\" && charIndexBuggy ? value.split(\"\") : value));\n        }\n        return results;\n      } else if (value == \"{\") {\n        // Parses a Kamino object, returning a new JavaScript object.\n        results = {};\n        stack[stack.length] = results;\n        for (;; any || (any = true)) {\n          value = lex();\n          // A closing curly brace marks the end of the object literal.\n          if (value == \"}\") {\n            break;\n          }\n          // If the object literal contains members, the current token\n          // should be a comma separator.\n          if (any) {\n            if (value == \",\") {\n              value = lex();\n              if (value == \"}\") {\n                // Unexpected trailing `,` in object literal.\n                abort();\n              }\n            } else {\n              // A `,` must separate each object member.\n              abort();\n            }\n          }\n          // Leading commas are not permitted, object property names must be\n          // double-quoted strings, and a `:` must separate each property\n          // name and value.\n          if (value == \",\" || typeof value != \"string\" || value[0] != \"@\" || lex() != \":\") {\n            abort();\n          }\n          var result = lex();\n          results[value.slice(1)] = get(typeof result == \"string\" && charIndexBuggy ? result.split(\"\") : result);\n        }\n        return results;\n      }\n      // Unexpected token encountered.\n      abort();\n    }\n    return value;\n  };\n\n  // Internal: Updates a traversed object member.\n  var update = function(source, property, callback) {\n    var element = walk(source, property, callback);\n    if (element === undef) {\n      delete source[property];\n    } else {\n      source[property] = element;\n    }\n  };\n\n  // Internal: Recursively traverses a parsed Kamino object, invoking the\n  // `callback` function for each value. This is an implementation of the\n  // `Walk(holder, name)` operation defined in ES 5.1 section 15.12.2.\n  var walk = function (source, property, callback) {\n    var value = source[property], length;\n    if (typeof value == \"object\" && value) {\n      if (getClass.call(value) == \"[object Array]\") {\n        for (length = value.length; length--;) {\n          update(value, length, callback);\n        }\n      } else {\n        // `forEach` can't be used to traverse an array in Opera <= 8.54,\n        // as `Object#hasOwnProperty` returns `false` for array indices\n        // (e.g., `![1, 2, 3].hasOwnProperty(\"0\")`).\n        forEach(value, function (property) {\n          update(value, property, callback);\n        });\n      }\n    }\n    return callback.call(source, property, value);\n  };\n\n  // Public: `Kamino.parse`. See ES 5.1 section 15.12.2.\n  Kamino.parse = function (source, callback) {\n    var result, value;\n    Index = 0;\n    Source = \"\" + source;\n    stack = [];\n    if (charIndexBuggy) {\n      Source = source.split(\"\");\n    }\n    result = get(lex());\n    // If a Kamino string contains multiple tokens, it is invalid.\n    if (lex() != \"$\") {\n      abort();\n    }\n    // Reset the parser state.\n    Index = Source = null;\n    return callback && getClass.call(callback) == \"[object Function]\" ? walk((value = {}, value[\"\"] = result, value), \"\", callback) : result;\n  };\n\n  Kamino.clone = function(source) {\n    return Kamino.parse( Kamino.stringify(source) );\n  };\n})(this);\n\ndefine(\"kamino\", function(){});\n\n","(function(root) {\n  var self = root,\n      Window = self.Window,\n      usePoly = false,\n      a_slice = [].slice;\n\n  function isFunction(functionToCheck) {\n    return functionToCheck && Object.prototype.toString.call(functionToCheck) === '[object Function]';\n  }\n\n  function isInWorker() {\n    return  typeof Worker === 'undefined' && typeof Window === 'undefined';\n  }\n\n  if( usePoly || !self.MessageChannel ) {\n\n    var isWindowToWindowMessage = function( currentTarget ) {\n          return typeof window !== \"undefined\" && self instanceof Window && ( !isFunction(self.Worker) || !(currentTarget instanceof Worker) );\n        },\n        log = function( message ) {\n          if (MessageChannel.verbose) {\n            var args = a_slice.apply(arguments);\n            args.unshift(\"MCNP: \");\n            console.log.apply(console, args);\n          }\n        },\n        messagePorts = {};\n\n    var MessagePort = self.MessagePort = function( uuid ) {\n      this._entangledPortUuid = null;\n      this.destinationUrl = null;\n      this._listeners = {};\n      this._messageQueue = [];\n      this._messageQueueEnabled = false;\n      this._currentTarget = null;\n\n      this.uuid = uuid || UUID.generate();\n      messagePorts[this.uuid] = this;\n      this.log(\"created\");\n    };\n\n    MessagePort.prototype = {\n      start: function() {\n        var event,\n            self = this;\n\n        // TODO: we have no guarantee that\n        // we will not receive and process events in the correct order\n        setTimeout( function() {\n          self.log('draining ' + self._messageQueue.length + ' queued messages');\n          while( self._messageQueueEnabled && (event = self._messageQueue.shift()) ) {\n            self.dispatchEvent( event );\n          }\n        });\n        this._messageQueueEnabled = true;\n        this.log('started');\n      },\n\n      close: function() {\n        this._messageQueueEnabled = false;\n        if( this._entangledPortUuid ) {\n          this._getEntangledPort()._entangledPortUuid = null;\n          this._entangledPortUuid = null;\n\n          // /!\\ Probably need to send that (?)\n        }\n      },\n\n      postMessage: function( message ) {\n        // Numbers refer to step from the W3C specs. It shows how simplified things are\n        // 1- Let target port be the port with which source port is entangled, if any\n        var target = this._getEntangledPort(),\n            currentTarget = this._currentTarget,\n            messageClone;\n\n\n        // 8- If there is no target port (i.e. if source port is not entangled), then abort these steps.\n        if(!target) {\n          this.log(\"not entangled, discarding message\", message);\n          return;\n        }\n\n        // 12- Add the event to the port message queue of target port.\n        // As the port is cloned when sent to the other user agent,\n        // posting a message can mean different things:\n        // * The port is still local, then we need to queue the event\n        // * the port has been sent, then we need to send that event\n        if( currentTarget ) {\n          // 5- Let message clone be the result of obtaining a structured clone of the message argument\n          messageClone = MessageChannel.encodeEvent( message, [target], true );\n\n          if( isWindowToWindowMessage( currentTarget ) ) {\n            this.log(\"posting message from window to window\", message, this.destinationUrl);\n            currentTarget.postMessage(messageClone, this.destinationUrl);\n          } else {\n            this.log(\"posting message from or to worker\", message);\n            currentTarget.postMessage(messageClone);\n          }\n        } else {\n          this.log(\"not connected, queueing message\", message);\n          target._enqueueEvent(MessageChannel._messageEvent(message, [target], true));\n        }\n      },\n\n      addEventListener: function( type, listener ) {\n        if (typeof this._listeners[type] === \"undefined\"){\n          this._listeners[type] = [];\n        }\n\n        this._listeners[type].push( listener );\n      },\n\n      removeEventListener: function( type, listener) {\n        if (this._listeners[type] instanceof Array){\n          var listeners = this._listeners[type];\n          for (var i=0; i < listeners.length; i++){\n            if (listeners[i] === listener){\n              listeners.splice(i, 1);\n              break;\n            }\n          }\n        }\n      },\n\n      dispatchEvent: function( event ) {\n        var listeners = this._listeners.message;\n        if( listeners ) {\n          for (var i=0; i < listeners.length; i++){\n            listeners[i].call(this, event);\n          }\n        }\n      },\n\n      _enqueueEvent: function( event ) {\n        if(this._messageQueueEnabled) {\n          this.dispatchEvent( event );\n        } else {\n          this._messageQueue.push( event );\n        }\n      },\n\n      _getPort: function( portClone, messageEvent, copyEvents ) {\n        var loadPort = function(uuid) {\n          var port = messagePorts[uuid] || MessageChannel._createPort(uuid);\n          return port;\n        };\n\n        var port = loadPort(portClone.uuid);\n        port._entangledPortUuid = portClone._entangledPortUuid;\n        port._getEntangledPort()._entangledPortUuid = port.uuid;\n        port._currentTarget =  messageEvent.source || messageEvent.currentTarget || self;\n        if( messageEvent.origin === \"null\" ) {\n          port.destinationUrl = \"*\";\n        } else {\n          port.destinationUrl = messageEvent.origin;\n        }\n\n        if( copyEvents ) {\n          for( var i=0 ; i < portClone._messageQueue.length ; i++ ) {\n            port._messageQueue.push( portClone._messageQueue[i] );\n          }\n        }\n\n        return port;\n      },\n\n      _getEntangledPort: function() {\n        if( this._entangledPortUuid ) {\n          return messagePorts[ this._entangledPortUuid ] || MessageChannel._createPort(this._entangledPortUuid);\n        } else {\n          return null;\n        }\n      },\n\n      log: function () {\n        if (MessageChannel.verbose) {\n          var args = a_slice.apply(arguments);\n          args.unshift(\"Port\", this.uuid);\n          log.apply(null, args);\n        }\n      }\n    };\n\n    var MessageChannel = self.MessageChannel = function () {\n      var port1 = MessageChannel._createPort(),\n          port2 = MessageChannel._createPort(),\n          channel;\n\n      port1._entangledPortUuid = port2.uuid;\n      port2._entangledPortUuid = port1.uuid;\n\n      channel = {\n        port1: port1,\n        port2: port2\n      };\n\n      MessageChannel.log(channel, \"created\");\n\n      return channel;\n    };\n\n    MessageChannel.log = function (_channel) {\n      if (MessageChannel.verbose) {\n        var args = [\"Chnl\"],\n            msgArgs = a_slice.call(arguments, 1);\n\n        if (_channel.port1 && _channel.port2) {\n          args.push(_channel.port1.uuid, _channel.port2.uuid);\n        } else {\n          _channel.forEach( function(channel) {\n            args.push(channel._entangledPortUuid);\n          });\n        }\n\n        args.push.apply(args, msgArgs);\n        log.apply(null, args);\n      }\n    };\n\n    MessageChannel._createPort = function() {\n      var args = arguments,\n          MessagePortConstructor = function() {\n            return MessagePort.apply(this, args);\n          };\n\n      MessagePortConstructor.prototype = MessagePort.prototype;\n\n      return new MessagePortConstructor();\n    };\n\n    /**\n        Encode the event to be sent.\n\n        messageEvent.data contains a fake Event encoded with Kamino.js\n\n        It contains:\n        * data: the content that the MessagePort should send\n        * ports: The targeted MessagePorts.\n        * messageChannel: this allows to decide if the MessageEvent was meant for the window or the port\n\n        @param {Object} data\n        @param {Array} ports\n        @param {Boolean} messageChannel\n        @returns {String} a string representation of the data to be sent\n    */\n    MessageChannel.encodeEvent = function( data, ports, messageChannel ) {\n      var strippedPorts = new Array(ports.length),\n          encodedMessage, messageEvent;\n\n      for (var i = 0; i < ports.length; ++i) {\n        strippedPorts[i] = MessageChannel._strippedPort(ports[i]);\n      }\n\n      messageEvent = { event: MessageChannel._messageEvent(data, strippedPorts, messageChannel) };\n      encodedMessage = Kamino.stringify(messageEvent);\n\n      return encodedMessage;\n    };\n\n    MessageChannel._messageEvent = function(data, ports, messageChannel) {\n      return  { data: data, ports: ports, messageChannel: messageChannel};\n    };\n\n    MessageChannel._strippedPort = function (port) {\n      if (!port) { return; }\n\n      var messageQueue = [];\n      for (var msg, msgPorts, ports, i = 0; i < port._messageQueue.length; ++i) {\n        msg = port._messageQueue[i];\n        msgPorts = msg.ports || [];\n        ports = [];\n\n        for (var portRef, j = 0; j < msgPorts.length; ++j) {\n          portRef = msgPorts[j];\n          ports.push({\n            uuid: portRef.uuid,\n            _entangledPortUuid: portRef._entangledPortUuid\n          });\n        }\n        messageQueue.push({\n          data: msg.data,\n          messageChannel: msg.messageChannel,\n          ports: ports\n        });\n      }\n\n      return {\n        uuid: port.uuid,\n        _entangledPortUuid: port._entangledPortUuid,\n        _messageQueue: messageQueue\n      };\n    };\n\n    /**\n        Extract the event from the message.\n\n        messageEvent.data contains a fake Event encoded with Kamino.js\n\n        It contains:\n        * data: the content that the MessagePort should use\n        * ports: The targeted MessagePorts.\n        * messageChannel: this allows to decide if the MessageEvent was meant for the window or the port\n\n        @param {MessageEvent} messageEvent\n        @param {Boolean} copyEvents: copy or not the events from the cloned port to the local one\n        @returns {Object} an object that fakes an event with limited attributes ( data, ports )\n    */\n    MessageChannel.decodeEvent = function( messageEvent, copyEvents ) {\n      var fakeEvent = {\n            data: null,\n            ports: []\n          },\n          data = Kamino.parse( messageEvent.data ),\n          event = data.event,\n          ports = event.ports;\n\n      if( event ) {\n        if( ports ) {\n          for(var i=0; i< ports.length ; i++) {\n            fakeEvent.ports.push( MessagePort.prototype._getPort( ports[i], messageEvent, copyEvents ) );\n          }\n        }\n        fakeEvent.data = event.data;\n        fakeEvent.source = messageEvent.source;\n        fakeEvent.messageChannel = event.messageChannel;\n      }\n\n      return fakeEvent;\n    };\n\n    /**\n        Extract the event from the message if possible.\n\n        A user agent can received events that are not encoded using Kamino.\n\n        @param {MessageEvent} messageEvent\n        @param {Boolean} copyEvents: copy or not the events from the cloned port to the local one\n        @returns {Object} an object that fakes an event or the triggered event\n    */\n    var decodeEvent = function( event, copyEvents ) {\n      var messageEvent;\n\n      try {\n        messageEvent = MessageChannel.decodeEvent( event, copyEvents );\n      } catch( e ) {\n        if( e instanceof SyntaxError ) {\n          messageEvent = event;\n        } else {\n          throw e;\n        }\n      }\n\n      return messageEvent;\n    };\n\n    var propagationHandler = function( event ) {\n      var messageEvent = decodeEvent( event, true );\n\n      if( messageEvent.messageChannel ) {\n        MessageChannel.propagateEvent( messageEvent );\n      }\n    };\n\n    // Add the default message event handler\n    // This is useful so that a user agent can pass ports\n    // without declaring any event handler.\n    //\n    // This handler takes care of copying the events queue passed with a port.\n    // We only need to perform this when passing a port between user agents,\n    // otherwise the event is passed through `postMessage` and not through the queue\n    // and is handled by the port's message listener.\n    //\n    // Ex:\n    //    iFrame1 - iFrame2 - iFrame3\n    //    iFrame2 creates a MessageChannel and passes a port to each iframe\n    //    we need a default handler to receive MessagePorts' events\n    //    and to propagate them\n    var _addMessagePortEventHandler = function( target ) {\n      if( target.addEventListener ) {\n        target.addEventListener( 'message', propagationHandler, false );\n      } else if( target.attachEvent ) {\n        target.attachEvent( 'onmessage', propagationHandler );\n      }\n    };\n\n    var _overrideMessageEventListener = function( target ) {\n      var originalAddEventListener, addEventListenerName,\n          targetRemoveEventListener, removeEventListenerName,\n          messageEventType,\n          messageHandlers = [];\n\n      if( target.addEventListener ) {\n        addEventListenerName = 'addEventListener';\n        removeEventListenerName = 'removeEventListener';\n        messageEventType = 'message';\n      } else if( target.attachEvent ) {\n        addEventListenerName = 'attachEvent';\n        removeEventListenerName = 'detachEvent';\n        messageEventType = 'onmessage';\n      }\n      originalAddEventListener = target[addEventListenerName];\n      targetRemoveEventListener = target[removeEventListenerName];\n\n      target[addEventListenerName] = function() {\n        var args = Array.prototype.slice.call( arguments ),\n            originalHandler = args[1],\n            self = this,\n            messageHandlerWrapper;\n\n        if( args[0] === messageEventType ) {\n          messageHandlerWrapper = function( event ) {\n            var messageEvent = decodeEvent( event );\n\n            if( ! messageEvent.messageChannel ) {\n              originalHandler.call( self, messageEvent );\n            }\n          };\n          originalHandler.messageHandlerWrapper = messageHandlerWrapper;\n\n          args[1] = messageHandlerWrapper;\n        }\n\n        originalAddEventListener.apply( this, args );\n      };\n\n      target[removeEventListenerName] = function() {\n        var args = Array.prototype.slice.call( arguments ),\n            originalHandler = args[1];\n\n        if( args[0] === messageEventType ) {\n          args[1] = originalHandler.messageHandlerWrapper;\n          delete originalHandler.messageHandlerWrapper;\n        }\n\n        if( args[1] ) {\n          targetRemoveEventListener.apply( this, args );\n        }\n      };\n    };\n\n\n    /**\n        Send the event to the targeted ports\n\n        It uses the `messageChannel` attribute to decide\n        if the event is meant for the window or MessagePorts\n\n        @param {Object} fakeEvent\n    */\n    MessageChannel.propagateEvent = function( fakeEvent ) {\n      var ports, port, entangledPort;\n\n      if( fakeEvent.messageChannel ) {\n        ports = fakeEvent.ports;\n\n        for( var i=0 ; i<ports.length ; i++) {\n          port = ports[i];\n          entangledPort = port._getEntangledPort();\n\n          if( port._currentTarget && entangledPort._currentTarget ) {\n            entangledPort.postMessage( fakeEvent.data );\n          } else {\n            port._enqueueEvent( fakeEvent );\n          }\n        }\n      }\n    };\n\n    MessageChannel.reset = function() {\n      messagePorts = {};\n    };\n\n    //\n    _addMessagePortEventHandler( self );\n\n    /**\n        Send the MessagePorts to the other window\n\n        `window.postMessage` doesn't accept fake ports so we have to encode them\n        and pass them in the message.\n\n        @param {Object} otherWindow: A reference to another window.\n        @param {Object} message: Data to be sent to the other window.\n        @param {String} targetOrigin: Specifies what the origin of otherWindow must be for the event to be dispatched.\n        @param {Array} ports: MessagePorts that need to be sent to otherWindow.\n    */\n    if( Window ) {\n      Window.postMessage = function( otherWindow, message, targetOrigin, ports ) {\n        var data, entangledPort;\n\n        // Internet Explorer requires the `ports` parameter\n        ports = ports || [];\n\n        data = MessageChannel.encodeEvent( message, ports, false );\n\n        if( ports ) {\n          // We need to know if a port has been sent to another user agent\n          // to decide when to queue and when to send messages\n          // See `MessageChannel.propagateEvent`\n          for( var i=0 ; i<ports.length ; i++) {\n            entangledPort = ports[i]._getEntangledPort();\n            if( !entangledPort._currentTarget ) {\n              entangledPort._currentTarget = otherWindow;\n              entangledPort.destinationUrl = targetOrigin;\n            }\n          }\n        }\n\n        MessageChannel.log(ports, \"handshake window\", otherWindow);\n        otherWindow.postMessage(data, targetOrigin);\n      };\n\n      // Juggling to find where to override `addEventListener`\n      // Firefox 30.0a1 (2014-02-17) adds `addEventListener` on the global object\n      // Internet Explorer doesn't allow to override `window.attachEvent`\n      var target;\n      if( window.addEventListener ) {\n        target = window;\n      } else if( window.attachEvent ) {\n        target = Window.prototype;\n      } else {\n        throw \"We couldn't find a method to attach an event handler.\";\n      }\n\n      _overrideMessageEventListener( target );\n    } else {\n      //Worker\n      _overrideMessageEventListener( self );\n    }\n\n    if( self.Worker ) {\n      var OriginalWorker = Worker,\n          originalAddEventListener;\n\n      if( OriginalWorker.prototype.addEventListener ) {\n        originalAddEventListener = OriginalWorker.prototype.addEventListener;\n      } else if( OriginalWorker.prototype.attachEvent ) {\n        originalAddEventListener = OriginalWorker.prototype.attachEvent;\n      }\n\n      self.Worker = function() {\n        var worker = new OriginalWorker(arguments[0]),\n            _addEventListener = originalAddEventListener;\n\n        _addEventListener.call(worker, 'message', propagationHandler);\n\n        return worker;\n      };\n      Worker.prototype = OriginalWorker.prototype;\n\n      _overrideMessageEventListener( Worker.prototype );\n\n    } else if (isInWorker()) {\n      self.Worker = { };\n    }\n\n    if (self.Worker) {\n      self.Worker.postMessage = function( worker, message, transferList )  {\n        var data = MessageChannel.encodeEvent( message, transferList, false ),\n            entangledPort;\n\n        for( var i=0 ; i<transferList.length ; i++) {\n          entangledPort = transferList[i]._getEntangledPort();\n          entangledPort._currentTarget = worker;\n        }\n\n        MessageChannel.log(transferList, \"handshake worker\", worker);\n        worker.postMessage( data );\n      };\n    }\n  } else {\n    if( Window ) {\n      Window.postMessage = function( source, message, targetOrigin, ports ) {\n        // Internet Explorer requires the `ports` parameter\n        ports = ports || [];\n        source.postMessage( message, targetOrigin, ports );\n      };\n    } else {\n      // Web worker\n      self.Worker = {\n        postMessage: function( worker, message, transferList ) {\n          worker.postMessage( message, transferList );\n        }\n      };\n    }\n\n    if( self.Worker ) {\n      self.Worker.postMessage = function( worker, message, transferList )  {\n        worker.postMessage( message, transferList);\n      };\n    }\n  }\n})(this);\n\ndefine(\"MessageChannel\", function(){});\n\n","///////////////////////////////////////////////////////////////////////////////\n// General utilities\n///////////////////////////////////////////////////////////////////////////////\n\ndefine('glympse-adapter/lib/utils',['require','exports','module'],function(require, exports, module)\n{\n\tvar defCfg = '__gacfg';\n\n\tfunction returnVal(data, propId)\n\t{\n\t\treturn function()\n\t\t{\n\t\t\treturn (data && data[propId]);\n\t\t};\n\t}\n\n\tfunction returnDataStreamVal(data, propId)\n\t{\n\t\treturn function()\n\t\t{\n\t\t\tvar p = (data && data[propId]);\n\t\t\treturn (p && (p.v || p));\n\t\t};\n\t}\n\n\tvar localStorage = window.localStorage;\n\n\t// Simple lib export\n\tvar utils =\n\t{\n\t\tdbg: function(id, minLevel)\n\t\t{\n\t\t\treturn function(info, data, level)\n\t\t\t{\n\t\t\t\t// Never allow logging if minLevel < 0\n\t\t\t\t// Allow all logging if minLevel is !truthy\n\t\t\t\t// Otherwise, must match min level on a log request\n\t\t\t\tif (!minLevel || (minLevel >= 0 && level >= minLevel))\n\t\t\t\t{\n\t\t\t\t\tconsole.log('[' + id + '] ' + info\n\t\t\t\t\t\t\t + (((data !== undefined) && (': ' + JSON.stringify(data, null, '  '))) || ''));\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\t// Clone-ability status for a given value\n\t\t/*, canBeCloned: function(val)\n\t\t{\n\t\t\tif(Object(val) !== val) // Primitive value\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tvar canBeCloned = utils.canBeCloned;\n\t\t\tswitch({}.toString.call(val).slice(8,-1))\n\t\t\t{ // Class\n\t\t\t\tcase 'Boolean':     case 'Number':      case 'String':      case 'Date':\n\t\t\t\tcase 'RegExp':      case 'Blob':        case 'FileList':\n\t\t\t\tcase 'ImageData':   case 'ImageBitmap': case 'ArrayBuffer':\n\t\t\t\t\treturn true;\n\t\t\t\tcase 'Array':       case 'Object':\n\t\t\t\t\treturn Object.keys(val).every(prop => canBeCloned(val[prop]));\n\t\t\t\tcase 'Map':\n\t\t\t\t\treturn [...val.keys()].every(canBeCloned) && [...val.values()].every(canBeCloned);\n\t\t\t\tcase 'Set':\n\t\t\t\t\treturn [...val.keys()].every(canBeCloned);\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.log('val: ' + val);\n\t\t\t\t\tconsole.log('bail: ' + {}.toString.call(val).slice(8,-1));\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t}*/\n\n\t\t// Deep-copy an object, ensuring it is cloneable\n\t\t, generateClone: function(o)\n\t\t{\n\t\t\tif (!(o instanceof Object))\n\t\t\t{\n\t\t\t\treturn o;\n\t\t\t}\n\n\t\t\tvar ctor = o.constructor;\n\t\t\tif (ctor === Function)\t// TODO: Catch other uncloneable object types\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tvar clone = new ctor();\n\t\t\tfor (var prop in o)\n\t\t\t{\n\t\t\t\tif (o.hasOwnProperty(prop))\n\t\t\t\t{\n\t\t\t\t\tclone[prop] = utils.generateClone(o[prop]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn clone;\n\t\t}\n\n\t\t, domain: window.location.hostname\n\t\t, getCookie: function(id)\n\t\t{\n\t\t\tif (localStorage)\n\t\t\t{\n\t\t\t\tvar val = localStorage.getItem(id);\n\n\t\t\t\t// Some implementations have the localStorage interface available, but not\n\t\t\t\t// writable (i.e. iOS Safari), so need to fall through to cookie lookup just in case.\n\t\t\t\tif (val !== null)\n\t\t\t\t{\n\t\t\t\t\treturn val;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar cookies = document.cookie.split(';');\n\n\t\t\tfor (var i = cookies.length - 1; i >= 0; i--)\n\t\t\t{\n\t\t\t\tvar c = cookies[i];\n\t\t\t\tvar idx = c.indexOf('=');\n\t\t\t\tvar x = c.substr(0, idx);\n\n\t\t\t\tif (x.replace(/^\\s+|\\s+$/g, '') === id)\n\t\t\t\t{\n\t\t\t\t\treturn window.decodeURIComponent(c.substr(idx + 1));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t}\n\n\t\t, setCookie: function(id, val, daysExpire)\n\t\t{\n\t\t\tif (localStorage)\n\t\t\t{\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\t// Some implementations exception when localStorage is defined, but\n\t\t\t\t\t// not available (i.e. iOS Safari)\n\t\t\t\t\tlocalStorage.setItem(id, val);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tcatch (e)\n\t\t\t\t{\n\t\t\t\t\tconsole.log('localStorage error', e);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar d = new Date();\n\t\t\td.setTime(d.getTime() + (daysExpire || 365) * 24 * 3600 * 1000);\n\t\t\tdocument.cookie = id + '=' + val + '; expires=' + d.toGMTString() + '; domain=' + utils.domain + '; path=/';\n\t\t}\n\n\t\t, getCfgVal: function(propertyName, idCfg)\n\t\t{\n\t\t\tvar config = utils.getCookie(idCfg || defCfg);\n\t\t\treturn (config) ? (JSON.parse(config))[propertyName] : null;\n\t\t}\n\n\t\t, setCfgVal: function(propertyName, newValue, idCfg, daysExpire)\n\t\t{\n\t\t\tvar id = idCfg || defCfg;\n\t\t\tvar config = utils.getCookie(id);\n\n\t\t\tconfig = (config) ? JSON.parse(config) : {};\n\t\t\tconfig[propertyName] = newValue;\n\n\t\t\tutils.setCookie(id, JSON.stringify(config), daysExpire);\n\t\t}\n\n\t\t, capFirst: function(str)\n\t\t{\n\t\t\treturn (str && (str.charAt(0).toUpperCase() + str.slice(1)));\n\t\t}\n\n\t\t, toUpperCamel: function(str)\n\t\t{\n\t\t\tvar words = ((str && str.split('_')) || '');\n\t\t\tvar out = '';\n\n\t\t\tfor (var i = 0, len = words.length; i < len; i++)\n\t\t\t{\n\t\t\t\tout += utils.capFirst(words[i]);\n\t\t\t}\n\n\t\t\treturn out;\n\t\t}\n\n\t\t, mapProps: function(targ, props, data, dataStreamProp)\n\t\t{\n\t\t\tfor (var i = 0, len = props.length; i < len; i++)\n\t\t\t{\n\t\t\t\tvar prop = props[i];\n\t\t\t\ttarg['get' + utils.toUpperCamel(prop)] = (dataStreamProp) ? returnDataStreamVal(data, prop)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  : returnVal(data, prop);\n\t\t\t}\n\t\t}\n\n\t\t, simplifyInvite: function(invite)\n\t\t{\n\t\t\treturn (invite && invite.toLowerCase().split('-').join('')) || '';\n\t\t}\n\n\t\t, normalizeInvite: function(invite)\n\t\t{\n\t\t\tif (invite)\n\t\t\t{\n\t\t\t\tinvite = invite.toUpperCase();\n\t\t\t\tvar ilen = invite.length;\n\t\t\t\tvar ilen2 = ilen / 2;\n\n\t\t\t\tif (ilen === 6 || ilen === 8)\n\t\t\t\t{\n\t\t\t\t\tinvite = invite.substr(0, ilen2) + '-' + invite.substr(ilen2, ilen2);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn invite;\n\t\t}\n\n\t\t, cleanInvites: function(invites)\n\t\t{\n\t\t\tinvites = invites || [];\n\t\t\tfor (var i = 0, len = invites.length; i < len; i++)\n\t\t\t{\n\t\t\t\tinvites[i] = utils.simplifyInvite(invites[i]);\n\t\t\t}\n\n\t\t\treturn invites;\n\t\t}\n\n\t};\n\n\n\t// Polyfills\n\tif (!Array.isArray)\n\t{\n\t\tArray.isArray = function(arg)\n\t\t{\n\t\t\treturn Object.prototype.toString.call(arg) === '[object Array]';\n\t\t};\n\t}\n\n\n\tmodule.exports = utils;\n});\n\n","/*eslint-disable */\n/* jscs:disable */\n/*!\n * @overview RSVP - a tiny implementation of Promises/A+.\n * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors\n * @license   Licensed under MIT license\n *            See https://raw.githubusercontent.com/tildeio/rsvp.js/master/LICENSE\n * @version   3.0.17\n */\n\n(function() {\n    \"use strict\";\n    function lib$rsvp$utils$$objectOrFunction(x) {\n      return typeof x === 'function' || (typeof x === 'object' && x !== null);\n    }\n\n    function lib$rsvp$utils$$isFunction(x) {\n      return typeof x === 'function';\n    }\n\n    function lib$rsvp$utils$$isMaybeThenable(x) {\n      return typeof x === 'object' && x !== null;\n    }\n\n    var lib$rsvp$utils$$_isArray;\n    if (!Array.isArray) {\n      lib$rsvp$utils$$_isArray = function (x) {\n        return Object.prototype.toString.call(x) === '[object Array]';\n      };\n    } else {\n      lib$rsvp$utils$$_isArray = Array.isArray;\n    }\n\n    var lib$rsvp$utils$$isArray = lib$rsvp$utils$$_isArray;\n\n    var lib$rsvp$utils$$now = Date.now || function() { return new Date().getTime(); };\n\n    function lib$rsvp$utils$$F() { }\n\n    var lib$rsvp$utils$$o_create = (Object.create || function (o) {\n      if (arguments.length > 1) {\n        throw new Error('Second argument not supported');\n      }\n      if (typeof o !== 'object') {\n        throw new TypeError('Argument must be an object');\n      }\n      lib$rsvp$utils$$F.prototype = o;\n      return new lib$rsvp$utils$$F();\n    });\n    function lib$rsvp$events$$indexOf(callbacks, callback) {\n      for (var i=0, l=callbacks.length; i<l; i++) {\n        if (callbacks[i] === callback) { return i; }\n      }\n\n      return -1;\n    }\n\n    function lib$rsvp$events$$callbacksFor(object) {\n      var callbacks = object._promiseCallbacks;\n\n      if (!callbacks) {\n        callbacks = object._promiseCallbacks = {};\n      }\n\n      return callbacks;\n    }\n\n    var lib$rsvp$events$$default = {\n\n      /**\n        `RSVP.EventTarget.mixin` extends an object with EventTarget methods. For\n        Example:\n\n        ```javascript\n        var object = {};\n\n        RSVP.EventTarget.mixin(object);\n\n        object.on('finished', function(event) {\n          // handle event\n        });\n\n        object.trigger('finished', { detail: value });\n        ```\n\n        `EventTarget.mixin` also works with prototypes:\n\n        ```javascript\n        var Person = function() {};\n        RSVP.EventTarget.mixin(Person.prototype);\n\n        var yehuda = new Person();\n        var tom = new Person();\n\n        yehuda.on('poke', function(event) {\n          console.log('Yehuda says OW');\n        });\n\n        tom.on('poke', function(event) {\n          console.log('Tom says OW');\n        });\n\n        yehuda.trigger('poke');\n        tom.trigger('poke');\n        ```\n\n        @method mixin\n        @for RSVP.EventTarget\n        @private\n        @param {Object} object object to extend with EventTarget methods\n      */\n      'mixin': function(object) {\n        object['on']      = this['on'];\n        object['off']     = this['off'];\n        object['trigger'] = this['trigger'];\n        object._promiseCallbacks = undefined;\n        return object;\n      },\n\n      /**\n        Registers a callback to be executed when `eventName` is triggered\n\n        ```javascript\n        object.on('event', function(eventInfo){\n          // handle the event\n        });\n\n        object.trigger('event');\n        ```\n\n        @method on\n        @for RSVP.EventTarget\n        @private\n        @param {String} eventName name of the event to listen for\n        @param {Function} callback function to be called when the event is triggered.\n      */\n      'on': function(eventName, callback) {\n        var allCallbacks = lib$rsvp$events$$callbacksFor(this), callbacks;\n\n        callbacks = allCallbacks[eventName];\n\n        if (!callbacks) {\n          callbacks = allCallbacks[eventName] = [];\n        }\n\n        if (lib$rsvp$events$$indexOf(callbacks, callback) === -1) {\n          callbacks.push(callback);\n        }\n      },\n\n      /**\n        You can use `off` to stop firing a particular callback for an event:\n\n        ```javascript\n        function doStuff() { // do stuff! }\n        object.on('stuff', doStuff);\n\n        object.trigger('stuff'); // doStuff will be called\n\n        // Unregister ONLY the doStuff callback\n        object.off('stuff', doStuff);\n        object.trigger('stuff'); // doStuff will NOT be called\n        ```\n\n        If you don't pass a `callback` argument to `off`, ALL callbacks for the\n        event will not be executed when the event fires. For example:\n\n        ```javascript\n        var callback1 = function(){};\n        var callback2 = function(){};\n\n        object.on('stuff', callback1);\n        object.on('stuff', callback2);\n\n        object.trigger('stuff'); // callback1 and callback2 will be executed.\n\n        object.off('stuff');\n        object.trigger('stuff'); // callback1 and callback2 will not be executed!\n        ```\n\n        @method off\n        @for RSVP.EventTarget\n        @private\n        @param {String} eventName event to stop listening to\n        @param {Function} callback optional argument. If given, only the function\n        given will be removed from the event's callback queue. If no `callback`\n        argument is given, all callbacks will be removed from the event's callback\n        queue.\n      */\n      'off': function(eventName, callback) {\n        var allCallbacks = lib$rsvp$events$$callbacksFor(this), callbacks, index;\n\n        if (!callback) {\n          allCallbacks[eventName] = [];\n          return;\n        }\n\n        callbacks = allCallbacks[eventName];\n\n        index = lib$rsvp$events$$indexOf(callbacks, callback);\n\n        if (index !== -1) { callbacks.splice(index, 1); }\n      },\n\n      /**\n        Use `trigger` to fire custom events. For example:\n\n        ```javascript\n        object.on('foo', function(){\n          console.log('foo event happened!');\n        });\n        object.trigger('foo');\n        // 'foo event happened!' logged to the console\n        ```\n\n        You can also pass a value as a second argument to `trigger` that will be\n        passed as an argument to all event listeners for the event:\n\n        ```javascript\n        object.on('foo', function(value){\n          console.log(value.name);\n        });\n\n        object.trigger('foo', { name: 'bar' });\n        // 'bar' logged to the console\n        ```\n\n        @method trigger\n        @for RSVP.EventTarget\n        @private\n        @param {String} eventName name of the event to be triggered\n        @param {Any} options optional value to be passed to any event handlers for\n        the given `eventName`\n      */\n      'trigger': function(eventName, options) {\n        var allCallbacks = lib$rsvp$events$$callbacksFor(this), callbacks, callback;\n\n        if (callbacks = allCallbacks[eventName]) {\n          // Don't cache the callbacks.length since it may grow\n          for (var i=0; i<callbacks.length; i++) {\n            callback = callbacks[i];\n\n            callback(options);\n          }\n        }\n      }\n    };\n\n    var lib$rsvp$config$$config = {\n      instrument: false\n    };\n\n    lib$rsvp$events$$default['mixin'](lib$rsvp$config$$config);\n\n    function lib$rsvp$config$$configure(name, value) {\n      if (name === 'onerror') {\n        // handle for legacy users that expect the actual\n        // error to be passed to their function added via\n        // `RSVP.configure('onerror', someFunctionHere);`\n        lib$rsvp$config$$config['on']('error', value);\n        return;\n      }\n\n      if (arguments.length === 2) {\n        lib$rsvp$config$$config[name] = value;\n      } else {\n        return lib$rsvp$config$$config[name];\n      }\n    }\n\n    var lib$rsvp$instrument$$queue = [];\n\n    function lib$rsvp$instrument$$scheduleFlush() {\n      setTimeout(function() {\n        var entry;\n        for (var i = 0; i < lib$rsvp$instrument$$queue.length; i++) {\n          entry = lib$rsvp$instrument$$queue[i];\n\n          var payload = entry.payload;\n\n          payload.guid = payload.key + payload.id;\n          payload.childGuid = payload.key + payload.childId;\n          if (payload.error) {\n            payload.stack = payload.error.stack;\n          }\n\n          lib$rsvp$config$$config['trigger'](entry.name, entry.payload);\n        }\n        lib$rsvp$instrument$$queue.length = 0;\n      }, 50);\n    }\n\n    function lib$rsvp$instrument$$instrument(eventName, promise, child) {\n      if (1 === lib$rsvp$instrument$$queue.push({\n          name: eventName,\n          payload: {\n            key: promise._guidKey,\n            id:  promise._id,\n            eventName: eventName,\n            detail: promise._result,\n            childId: child && child._id,\n            label: promise._label,\n            timeStamp: lib$rsvp$utils$$now(),\n            error: lib$rsvp$config$$config[\"instrument-with-stack\"] ? new Error(promise._label) : null\n          }})) {\n            lib$rsvp$instrument$$scheduleFlush();\n          }\n      }\n    var lib$rsvp$instrument$$default = lib$rsvp$instrument$$instrument;\n\n    function  lib$rsvp$$internal$$withOwnPromise() {\n      return new TypeError('A promises callback cannot return that same promise.');\n    }\n\n    function lib$rsvp$$internal$$noop() {}\n\n    var lib$rsvp$$internal$$PENDING   = void 0;\n    var lib$rsvp$$internal$$FULFILLED = 1;\n    var lib$rsvp$$internal$$REJECTED  = 2;\n\n    var lib$rsvp$$internal$$GET_THEN_ERROR = new lib$rsvp$$internal$$ErrorObject();\n\n    function lib$rsvp$$internal$$getThen(promise) {\n      try {\n        return promise.then;\n      } catch(error) {\n        lib$rsvp$$internal$$GET_THEN_ERROR.error = error;\n        return lib$rsvp$$internal$$GET_THEN_ERROR;\n      }\n    }\n\n    function lib$rsvp$$internal$$tryThen(then, value, fulfillmentHandler, rejectionHandler) {\n      try {\n        then.call(value, fulfillmentHandler, rejectionHandler);\n      } catch(e) {\n        return e;\n      }\n    }\n\n    function lib$rsvp$$internal$$handleForeignThenable(promise, thenable, then) {\n      lib$rsvp$config$$config.async(function(promise) {\n        var sealed = false;\n        var error = lib$rsvp$$internal$$tryThen(then, thenable, function(value) {\n          if (sealed) { return; }\n          sealed = true;\n          if (thenable !== value) {\n            lib$rsvp$$internal$$resolve(promise, value);\n          } else {\n            lib$rsvp$$internal$$fulfill(promise, value);\n          }\n        }, function(reason) {\n          if (sealed) { return; }\n          sealed = true;\n\n          lib$rsvp$$internal$$reject(promise, reason);\n        }, 'Settle: ' + (promise._label || ' unknown promise'));\n\n        if (!sealed && error) {\n          sealed = true;\n          lib$rsvp$$internal$$reject(promise, error);\n        }\n      }, promise);\n    }\n\n    function lib$rsvp$$internal$$handleOwnThenable(promise, thenable) {\n      if (thenable._state === lib$rsvp$$internal$$FULFILLED) {\n        lib$rsvp$$internal$$fulfill(promise, thenable._result);\n      } else if (thenable._state === lib$rsvp$$internal$$REJECTED) {\n        thenable._onError = null;\n        lib$rsvp$$internal$$reject(promise, thenable._result);\n      } else {\n        lib$rsvp$$internal$$subscribe(thenable, undefined, function(value) {\n          if (thenable !== value) {\n            lib$rsvp$$internal$$resolve(promise, value);\n          } else {\n            lib$rsvp$$internal$$fulfill(promise, value);\n          }\n        }, function(reason) {\n          lib$rsvp$$internal$$reject(promise, reason);\n        });\n      }\n    }\n\n    function lib$rsvp$$internal$$handleMaybeThenable(promise, maybeThenable) {\n      if (maybeThenable.constructor === promise.constructor) {\n        lib$rsvp$$internal$$handleOwnThenable(promise, maybeThenable);\n      } else {\n        var then = lib$rsvp$$internal$$getThen(maybeThenable);\n\n        if (then === lib$rsvp$$internal$$GET_THEN_ERROR) {\n          lib$rsvp$$internal$$reject(promise, lib$rsvp$$internal$$GET_THEN_ERROR.error);\n        } else if (then === undefined) {\n          lib$rsvp$$internal$$fulfill(promise, maybeThenable);\n        } else if (lib$rsvp$utils$$isFunction(then)) {\n          lib$rsvp$$internal$$handleForeignThenable(promise, maybeThenable, then);\n        } else {\n          lib$rsvp$$internal$$fulfill(promise, maybeThenable);\n        }\n      }\n    }\n\n    function lib$rsvp$$internal$$resolve(promise, value) {\n      if (promise === value) {\n        lib$rsvp$$internal$$fulfill(promise, value);\n      } else if (lib$rsvp$utils$$objectOrFunction(value)) {\n        lib$rsvp$$internal$$handleMaybeThenable(promise, value);\n      } else {\n        lib$rsvp$$internal$$fulfill(promise, value);\n      }\n    }\n\n    function lib$rsvp$$internal$$publishRejection(promise) {\n      if (promise._onError) {\n        promise._onError(promise._result);\n      }\n\n      lib$rsvp$$internal$$publish(promise);\n    }\n\n    function lib$rsvp$$internal$$fulfill(promise, value) {\n      if (promise._state !== lib$rsvp$$internal$$PENDING) { return; }\n\n      promise._result = value;\n      promise._state = lib$rsvp$$internal$$FULFILLED;\n\n      if (promise._subscribers.length === 0) {\n        if (lib$rsvp$config$$config.instrument) {\n          lib$rsvp$instrument$$default('fulfilled', promise);\n        }\n      } else {\n        lib$rsvp$config$$config.async(lib$rsvp$$internal$$publish, promise);\n      }\n    }\n\n    function lib$rsvp$$internal$$reject(promise, reason) {\n      if (promise._state !== lib$rsvp$$internal$$PENDING) { return; }\n      promise._state = lib$rsvp$$internal$$REJECTED;\n      promise._result = reason;\n      lib$rsvp$config$$config.async(lib$rsvp$$internal$$publishRejection, promise);\n    }\n\n    function lib$rsvp$$internal$$subscribe(parent, child, onFulfillment, onRejection) {\n      var subscribers = parent._subscribers;\n      var length = subscribers.length;\n\n      parent._onError = null;\n\n      subscribers[length] = child;\n      subscribers[length + lib$rsvp$$internal$$FULFILLED] = onFulfillment;\n      subscribers[length + lib$rsvp$$internal$$REJECTED]  = onRejection;\n\n      if (length === 0 && parent._state) {\n        lib$rsvp$config$$config.async(lib$rsvp$$internal$$publish, parent);\n      }\n    }\n\n    function lib$rsvp$$internal$$publish(promise) {\n      var subscribers = promise._subscribers;\n      var settled = promise._state;\n\n      if (lib$rsvp$config$$config.instrument) {\n        lib$rsvp$instrument$$default(settled === lib$rsvp$$internal$$FULFILLED ? 'fulfilled' : 'rejected', promise);\n      }\n\n      if (subscribers.length === 0) { return; }\n\n      var child, callback, detail = promise._result;\n\n      for (var i = 0; i < subscribers.length; i += 3) {\n        child = subscribers[i];\n        callback = subscribers[i + settled];\n\n        if (child) {\n          lib$rsvp$$internal$$invokeCallback(settled, child, callback, detail);\n        } else {\n          callback(detail);\n        }\n      }\n\n      promise._subscribers.length = 0;\n    }\n\n    function lib$rsvp$$internal$$ErrorObject() {\n      this.error = null;\n    }\n\n    var lib$rsvp$$internal$$TRY_CATCH_ERROR = new lib$rsvp$$internal$$ErrorObject();\n\n    function lib$rsvp$$internal$$tryCatch(callback, detail) {\n      try {\n        return callback(detail);\n      } catch(e) {\n        lib$rsvp$$internal$$TRY_CATCH_ERROR.error = e;\n        return lib$rsvp$$internal$$TRY_CATCH_ERROR;\n      }\n    }\n\n    function lib$rsvp$$internal$$invokeCallback(settled, promise, callback, detail) {\n      var hasCallback = lib$rsvp$utils$$isFunction(callback),\n          value, error, succeeded, failed;\n\n      if (hasCallback) {\n        value = lib$rsvp$$internal$$tryCatch(callback, detail);\n\n        if (value === lib$rsvp$$internal$$TRY_CATCH_ERROR) {\n          failed = true;\n          error = value.error;\n          value = null;\n        } else {\n          succeeded = true;\n        }\n\n        if (promise === value) {\n          lib$rsvp$$internal$$reject(promise, lib$rsvp$$internal$$withOwnPromise());\n          return;\n        }\n\n      } else {\n        value = detail;\n        succeeded = true;\n      }\n\n      if (promise._state !== lib$rsvp$$internal$$PENDING) {\n        // noop\n      } else if (hasCallback && succeeded) {\n        lib$rsvp$$internal$$resolve(promise, value);\n      } else if (failed) {\n        lib$rsvp$$internal$$reject(promise, error);\n      } else if (settled === lib$rsvp$$internal$$FULFILLED) {\n        lib$rsvp$$internal$$fulfill(promise, value);\n      } else if (settled === lib$rsvp$$internal$$REJECTED) {\n        lib$rsvp$$internal$$reject(promise, value);\n      }\n    }\n\n    function lib$rsvp$$internal$$initializePromise(promise, resolver) {\n      var resolved = false;\n      try {\n        resolver(function resolvePromise(value){\n          if (resolved) { return; }\n          resolved = true;\n          lib$rsvp$$internal$$resolve(promise, value);\n        }, function rejectPromise(reason) {\n          if (resolved) { return; }\n          resolved = true;\n          lib$rsvp$$internal$$reject(promise, reason);\n        });\n      } catch(e) {\n        lib$rsvp$$internal$$reject(promise, e);\n      }\n    }\n\n    function lib$rsvp$enumerator$$makeSettledResult(state, position, value) {\n      if (state === lib$rsvp$$internal$$FULFILLED) {\n        return {\n          state: 'fulfilled',\n          value: value\n        };\n      } else {\n        return {\n          state: 'rejected',\n          reason: value\n        };\n      }\n    }\n\n    function lib$rsvp$enumerator$$Enumerator(Constructor, input, abortOnReject, label) {\n      this._instanceConstructor = Constructor;\n      this.promise = new Constructor(lib$rsvp$$internal$$noop, label);\n      this._abortOnReject = abortOnReject;\n\n      if (this._validateInput(input)) {\n        this._input     = input;\n        this.length     = input.length;\n        this._remaining = input.length;\n\n        this._init();\n\n        if (this.length === 0) {\n          lib$rsvp$$internal$$fulfill(this.promise, this._result);\n        } else {\n          this.length = this.length || 0;\n          this._enumerate();\n          if (this._remaining === 0) {\n            lib$rsvp$$internal$$fulfill(this.promise, this._result);\n          }\n        }\n      } else {\n        lib$rsvp$$internal$$reject(this.promise, this._validationError());\n      }\n    }\n\n    var lib$rsvp$enumerator$$default = lib$rsvp$enumerator$$Enumerator;\n\n    lib$rsvp$enumerator$$Enumerator.prototype._validateInput = function(input) {\n      return lib$rsvp$utils$$isArray(input);\n    };\n\n    lib$rsvp$enumerator$$Enumerator.prototype._validationError = function() {\n      return new Error('Array Methods must be provided an Array');\n    };\n\n    lib$rsvp$enumerator$$Enumerator.prototype._init = function() {\n      this._result = new Array(this.length);\n    };\n\n    lib$rsvp$enumerator$$Enumerator.prototype._enumerate = function() {\n      var length  = this.length;\n      var promise = this.promise;\n      var input   = this._input;\n\n      for (var i = 0; promise._state === lib$rsvp$$internal$$PENDING && i < length; i++) {\n        this._eachEntry(input[i], i);\n      }\n    };\n\n    lib$rsvp$enumerator$$Enumerator.prototype._eachEntry = function(entry, i) {\n      var c = this._instanceConstructor;\n      if (lib$rsvp$utils$$isMaybeThenable(entry)) {\n        if (entry.constructor === c && entry._state !== lib$rsvp$$internal$$PENDING) {\n          entry._onError = null;\n          this._settledAt(entry._state, i, entry._result);\n        } else {\n          this._willSettleAt(c.resolve(entry), i);\n        }\n      } else {\n        this._remaining--;\n        this._result[i] = this._makeResult(lib$rsvp$$internal$$FULFILLED, i, entry);\n      }\n    };\n\n    lib$rsvp$enumerator$$Enumerator.prototype._settledAt = function(state, i, value) {\n      var promise = this.promise;\n\n      if (promise._state === lib$rsvp$$internal$$PENDING) {\n        this._remaining--;\n\n        if (this._abortOnReject && state === lib$rsvp$$internal$$REJECTED) {\n          lib$rsvp$$internal$$reject(promise, value);\n        } else {\n          this._result[i] = this._makeResult(state, i, value);\n        }\n      }\n\n      if (this._remaining === 0) {\n        lib$rsvp$$internal$$fulfill(promise, this._result);\n      }\n    };\n\n    lib$rsvp$enumerator$$Enumerator.prototype._makeResult = function(state, i, value) {\n      return value;\n    };\n\n    lib$rsvp$enumerator$$Enumerator.prototype._willSettleAt = function(promise, i) {\n      var enumerator = this;\n\n      lib$rsvp$$internal$$subscribe(promise, undefined, function(value) {\n        enumerator._settledAt(lib$rsvp$$internal$$FULFILLED, i, value);\n      }, function(reason) {\n        enumerator._settledAt(lib$rsvp$$internal$$REJECTED, i, reason);\n      });\n    };\n    function lib$rsvp$promise$all$$all(entries, label) {\n      return new lib$rsvp$enumerator$$default(this, entries, true /* abort on reject */, label).promise;\n    }\n    var lib$rsvp$promise$all$$default = lib$rsvp$promise$all$$all;\n    function lib$rsvp$promise$race$$race(entries, label) {\n      /*jshint validthis:true */\n      var Constructor = this;\n\n      var promise = new Constructor(lib$rsvp$$internal$$noop, label);\n\n      if (!lib$rsvp$utils$$isArray(entries)) {\n        lib$rsvp$$internal$$reject(promise, new TypeError('You must pass an array to race.'));\n        return promise;\n      }\n\n      var length = entries.length;\n\n      function onFulfillment(value) {\n        lib$rsvp$$internal$$resolve(promise, value);\n      }\n\n      function onRejection(reason) {\n        lib$rsvp$$internal$$reject(promise, reason);\n      }\n\n      for (var i = 0; promise._state === lib$rsvp$$internal$$PENDING && i < length; i++) {\n        lib$rsvp$$internal$$subscribe(Constructor.resolve(entries[i]), undefined, onFulfillment, onRejection);\n      }\n\n      return promise;\n    }\n    var lib$rsvp$promise$race$$default = lib$rsvp$promise$race$$race;\n    function lib$rsvp$promise$resolve$$resolve(object, label) {\n      /*jshint validthis:true */\n      var Constructor = this;\n\n      if (object && typeof object === 'object' && object.constructor === Constructor) {\n        return object;\n      }\n\n      var promise = new Constructor(lib$rsvp$$internal$$noop, label);\n      lib$rsvp$$internal$$resolve(promise, object);\n      return promise;\n    }\n    var lib$rsvp$promise$resolve$$default = lib$rsvp$promise$resolve$$resolve;\n    function lib$rsvp$promise$reject$$reject(reason, label) {\n      /*jshint validthis:true */\n      var Constructor = this;\n      var promise = new Constructor(lib$rsvp$$internal$$noop, label);\n      lib$rsvp$$internal$$reject(promise, reason);\n      return promise;\n    }\n    var lib$rsvp$promise$reject$$default = lib$rsvp$promise$reject$$reject;\n\n    var lib$rsvp$promise$$guidKey = 'rsvp_' + lib$rsvp$utils$$now() + '-';\n    var lib$rsvp$promise$$counter = 0;\n\n    function lib$rsvp$promise$$needsResolver() {\n      throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\n    }\n\n    function lib$rsvp$promise$$needsNew() {\n      throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\n    }\n\n    /**\n      Promise objects represent the eventual result of an asynchronous operation. The\n      primary way of interacting with a promise is through its `then` method, which\n      registers callbacks to receive either a promises eventual value or the reason\n      why the promise cannot be fulfilled.\n\n      Terminology\n      -----------\n\n      - `promise` is an object or function with a `then` method whose behavior conforms to this specification.\n      - `thenable` is an object or function that defines a `then` method.\n      - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).\n      - `exception` is a value that is thrown using the throw statement.\n      - `reason` is a value that indicates why a promise was rejected.\n      - `settled` the final resting state of a promise, fulfilled or rejected.\n\n      A promise can be in one of three states: pending, fulfilled, or rejected.\n\n      Promises that are fulfilled have a fulfillment value and are in the fulfilled\n      state.  Promises that are rejected have a rejection reason and are in the\n      rejected state.  A fulfillment value is never a thenable.\n\n      Promises can also be said to *resolve* a value.  If this value is also a\n      promise, then the original promise's settled state will match the value's\n      settled state.  So a promise that *resolves* a promise that rejects will\n      itself reject, and a promise that *resolves* a promise that fulfills will\n      itself fulfill.\n\n\n      Basic Usage:\n      ------------\n\n      ```js\n      var promise = new Promise(function(resolve, reject) {\n        // on success\n        resolve(value);\n\n        // on failure\n        reject(reason);\n      });\n\n      promise.then(function(value) {\n        // on fulfillment\n      }, function(reason) {\n        // on rejection\n      });\n      ```\n\n      Advanced Usage:\n      ---------------\n\n      Promises shine when abstracting away asynchronous interactions such as\n      `XMLHttpRequest`s.\n\n      ```js\n      function getJSON(url) {\n        return new Promise(function(resolve, reject){\n          var xhr = new XMLHttpRequest();\n\n          xhr.open('GET', url);\n          xhr.onreadystatechange = handler;\n          xhr.responseType = 'json';\n          xhr.setRequestHeader('Accept', 'application/json');\n          xhr.send();\n\n          function handler() {\n            if (this.readyState === this.DONE) {\n              if (this.status === 200) {\n                resolve(this.response);\n              } else {\n                reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));\n              }\n            }\n          };\n        });\n      }\n\n      getJSON('/posts.json').then(function(json) {\n        // on fulfillment\n      }, function(reason) {\n        // on rejection\n      });\n      ```\n\n      Unlike callbacks, promises are great composable primitives.\n\n      ```js\n      Promise.all([\n        getJSON('/posts'),\n        getJSON('/comments')\n      ]).then(function(values){\n        values[0] // => postsJSON\n        values[1] // => commentsJSON\n\n        return values;\n      });\n      ```\n\n      @class RSVP.Promise\n      @param {function} resolver\n      @param {String} label optional string for labeling the promise.\n      Useful for tooling.\n      @constructor\n    */\n    function lib$rsvp$promise$$Promise(resolver, label) {\n      this._id = lib$rsvp$promise$$counter++;\n      this._label = label;\n      this._state = undefined;\n      this._result = undefined;\n      this._subscribers = [];\n\n      if (lib$rsvp$config$$config.instrument) {\n        lib$rsvp$instrument$$default('created', this);\n      }\n\n      if (lib$rsvp$$internal$$noop !== resolver) {\n        if (!lib$rsvp$utils$$isFunction(resolver)) {\n          lib$rsvp$promise$$needsResolver();\n        }\n\n        if (!(this instanceof lib$rsvp$promise$$Promise)) {\n          lib$rsvp$promise$$needsNew();\n        }\n\n        lib$rsvp$$internal$$initializePromise(this, resolver);\n      }\n    }\n\n    var lib$rsvp$promise$$default = lib$rsvp$promise$$Promise;\n\n    // deprecated\n    lib$rsvp$promise$$Promise.cast = lib$rsvp$promise$resolve$$default;\n    lib$rsvp$promise$$Promise.all = lib$rsvp$promise$all$$default;\n    lib$rsvp$promise$$Promise.race = lib$rsvp$promise$race$$default;\n    lib$rsvp$promise$$Promise.resolve = lib$rsvp$promise$resolve$$default;\n    lib$rsvp$promise$$Promise.reject = lib$rsvp$promise$reject$$default;\n\n    lib$rsvp$promise$$Promise.prototype = {\n      constructor: lib$rsvp$promise$$Promise,\n\n      _guidKey: lib$rsvp$promise$$guidKey,\n\n      _onError: function (reason) {\n        lib$rsvp$config$$config.async(function(promise) {\n          setTimeout(function() {\n            if (promise._onError) {\n              lib$rsvp$config$$config['trigger']('error', reason);\n            }\n          }, 0);\n        }, this);\n      },\n\n    /**\n      The primary way of interacting with a promise is through its `then` method,\n      which registers callbacks to receive either a promise's eventual value or the\n      reason why the promise cannot be fulfilled.\n\n      ```js\n      findUser().then(function(user){\n        // user is available\n      }, function(reason){\n        // user is unavailable, and you are given the reason why\n      });\n      ```\n\n      Chaining\n      --------\n\n      The return value of `then` is itself a promise.  This second, 'downstream'\n      promise is resolved with the return value of the first promise's fulfillment\n      or rejection handler, or rejected if the handler throws an exception.\n\n      ```js\n      findUser().then(function (user) {\n        return user.name;\n      }, function (reason) {\n        return 'default name';\n      }).then(function (userName) {\n        // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\n        // will be `'default name'`\n      });\n\n      findUser().then(function (user) {\n        throw new Error('Found user, but still unhappy');\n      }, function (reason) {\n        throw new Error('`findUser` rejected and we're unhappy');\n      }).then(function (value) {\n        // never reached\n      }, function (reason) {\n        // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\n        // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.\n      });\n      ```\n      If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\n\n      ```js\n      findUser().then(function (user) {\n        throw new PedagogicalException('Upstream error');\n      }).then(function (value) {\n        // never reached\n      }).then(function (value) {\n        // never reached\n      }, function (reason) {\n        // The `PedgagocialException` is propagated all the way down to here\n      });\n      ```\n\n      Assimilation\n      ------------\n\n      Sometimes the value you want to propagate to a downstream promise can only be\n      retrieved asynchronously. This can be achieved by returning a promise in the\n      fulfillment or rejection handler. The downstream promise will then be pending\n      until the returned promise is settled. This is called *assimilation*.\n\n      ```js\n      findUser().then(function (user) {\n        return findCommentsByAuthor(user);\n      }).then(function (comments) {\n        // The user's comments are now available\n      });\n      ```\n\n      If the assimliated promise rejects, then the downstream promise will also reject.\n\n      ```js\n      findUser().then(function (user) {\n        return findCommentsByAuthor(user);\n      }).then(function (comments) {\n        // If `findCommentsByAuthor` fulfills, we'll have the value here\n      }, function (reason) {\n        // If `findCommentsByAuthor` rejects, we'll have the reason here\n      });\n      ```\n\n      Simple Example\n      --------------\n\n      Synchronous Example\n\n      ```javascript\n      var result;\n\n      try {\n        result = findResult();\n        // success\n      } catch(reason) {\n        // failure\n      }\n      ```\n\n      Errback Example\n\n      ```js\n      findResult(function(result, err){\n        if (err) {\n          // failure\n        } else {\n          // success\n        }\n      });\n      ```\n\n      Promise Example;\n\n      ```javascript\n      findResult().then(function(result){\n        // success\n      }, function(reason){\n        // failure\n      });\n      ```\n\n      Advanced Example\n      --------------\n\n      Synchronous Example\n\n      ```javascript\n      var author, books;\n\n      try {\n        author = findAuthor();\n        books  = findBooksByAuthor(author);\n        // success\n      } catch(reason) {\n        // failure\n      }\n      ```\n\n      Errback Example\n\n      ```js\n\n      function foundBooks(books) {\n\n      }\n\n      function failure(reason) {\n\n      }\n\n      findAuthor(function(author, err){\n        if (err) {\n          failure(err);\n          // failure\n        } else {\n          try {\n            findBoooksByAuthor(author, function(books, err) {\n              if (err) {\n                failure(err);\n              } else {\n                try {\n                  foundBooks(books);\n                } catch(reason) {\n                  failure(reason);\n                }\n              }\n            });\n          } catch(error) {\n            failure(err);\n          }\n          // success\n        }\n      });\n      ```\n\n      Promise Example;\n\n      ```javascript\n      findAuthor().\n        then(findBooksByAuthor).\n        then(function(books){\n          // found books\n      }).catch(function(reason){\n        // something went wrong\n      });\n      ```\n\n      @method then\n      @param {Function} onFulfilled\n      @param {Function} onRejected\n      @param {String} label optional string for labeling the promise.\n      Useful for tooling.\n      @return {Promise}\n    */\n      then: function(onFulfillment, onRejection, label) {\n        var parent = this;\n        var state = parent._state;\n\n        if (state === lib$rsvp$$internal$$FULFILLED && !onFulfillment || state === lib$rsvp$$internal$$REJECTED && !onRejection) {\n          if (lib$rsvp$config$$config.instrument) {\n            lib$rsvp$instrument$$default('chained', this, this);\n          }\n          return this;\n        }\n\n        parent._onError = null;\n\n        var child = new this.constructor(lib$rsvp$$internal$$noop, label);\n        var result = parent._result;\n\n        if (lib$rsvp$config$$config.instrument) {\n          lib$rsvp$instrument$$default('chained', parent, child);\n        }\n\n        if (state) {\n          var callback = arguments[state - 1];\n          lib$rsvp$config$$config.async(function(){\n            lib$rsvp$$internal$$invokeCallback(state, child, callback, result);\n          });\n        } else {\n          lib$rsvp$$internal$$subscribe(parent, child, onFulfillment, onRejection);\n        }\n\n        return child;\n      },\n\n    /**\n      `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\n      as the catch block of a try/catch statement.\n\n      ```js\n      function findAuthor(){\n        throw new Error('couldn't find that author');\n      }\n\n      // synchronous\n      try {\n        findAuthor();\n      } catch(reason) {\n        // something went wrong\n      }\n\n      // async with promises\n      findAuthor().catch(function(reason){\n        // something went wrong\n      });\n      ```\n\n      @method catch\n      @param {Function} onRejection\n      @param {String} label optional string for labeling the promise.\n      Useful for tooling.\n      @return {Promise}\n    */\n      'catch': function(onRejection, label) {\n        return this.then(null, onRejection, label);\n      },\n\n    /**\n      `finally` will be invoked regardless of the promise's fate just as native\n      try/catch/finally behaves\n\n      Synchronous example:\n\n      ```js\n      findAuthor() {\n        if (Math.random() > 0.5) {\n          throw new Error();\n        }\n        return new Author();\n      }\n\n      try {\n        return findAuthor(); // succeed or fail\n      } catch(error) {\n        return findOtherAuther();\n      } finally {\n        // always runs\n        // doesn't affect the return value\n      }\n      ```\n\n      Asynchronous example:\n\n      ```js\n      findAuthor().catch(function(reason){\n        return findOtherAuther();\n      }).finally(function(){\n        // author was either found, or not\n      });\n      ```\n\n      @method finally\n      @param {Function} callback\n      @param {String} label optional string for labeling the promise.\n      Useful for tooling.\n      @return {Promise}\n    */\n      'finally': function(callback, label) {\n        var constructor = this.constructor;\n\n        return this.then(function(value) {\n          return constructor.resolve(callback()).then(function(){\n            return value;\n          });\n        }, function(reason) {\n          return constructor.resolve(callback()).then(function(){\n            throw reason;\n          });\n        }, label);\n      }\n    };\n\n    function lib$rsvp$all$settled$$AllSettled(Constructor, entries, label) {\n      this._superConstructor(Constructor, entries, false /* don't abort on reject */, label);\n    }\n\n    lib$rsvp$all$settled$$AllSettled.prototype = lib$rsvp$utils$$o_create(lib$rsvp$enumerator$$default.prototype);\n    lib$rsvp$all$settled$$AllSettled.prototype._superConstructor = lib$rsvp$enumerator$$default;\n    lib$rsvp$all$settled$$AllSettled.prototype._makeResult = lib$rsvp$enumerator$$makeSettledResult;\n    lib$rsvp$all$settled$$AllSettled.prototype._validationError = function() {\n      return new Error('allSettled must be called with an array');\n    };\n\n    function lib$rsvp$all$settled$$allSettled(entries, label) {\n      return new lib$rsvp$all$settled$$AllSettled(lib$rsvp$promise$$default, entries, label).promise;\n    }\n    var lib$rsvp$all$settled$$default = lib$rsvp$all$settled$$allSettled;\n    function lib$rsvp$all$$all(array, label) {\n      return lib$rsvp$promise$$default.all(array, label);\n    }\n    var lib$rsvp$all$$default = lib$rsvp$all$$all;\n    var lib$rsvp$asap$$len = 0;\n    var lib$rsvp$asap$$toString = {}.toString;\n    var lib$rsvp$asap$$vertxNext;\n    function lib$rsvp$asap$$asap(callback, arg) {\n      lib$rsvp$asap$$queue[lib$rsvp$asap$$len] = callback;\n      lib$rsvp$asap$$queue[lib$rsvp$asap$$len + 1] = arg;\n      lib$rsvp$asap$$len += 2;\n      if (lib$rsvp$asap$$len === 2) {\n        // If len is 1, that means that we need to schedule an async flush.\n        // If additional callbacks are queued before the queue is flushed, they\n        // will be processed by this flush that we are scheduling.\n        lib$rsvp$asap$$scheduleFlush();\n      }\n    }\n\n    var lib$rsvp$asap$$default = lib$rsvp$asap$$asap;\n\n    var lib$rsvp$asap$$browserWindow = (typeof window !== 'undefined') ? window : undefined;\n    var lib$rsvp$asap$$browserGlobal = lib$rsvp$asap$$browserWindow || {};\n    var lib$rsvp$asap$$BrowserMutationObserver = lib$rsvp$asap$$browserGlobal.MutationObserver || lib$rsvp$asap$$browserGlobal.WebKitMutationObserver;\n    var lib$rsvp$asap$$isNode = typeof process !== 'undefined' && {}.toString.call(process) === '[object process]';\n\n    // test for web worker but not in IE10\n    var lib$rsvp$asap$$isWorker = typeof Uint8ClampedArray !== 'undefined' &&\n      typeof importScripts !== 'undefined' &&\n      typeof MessageChannel !== 'undefined';\n\n    // node\n    function lib$rsvp$asap$$useNextTick() {\n      var nextTick = process.nextTick;\n      // node version 0.10.x displays a deprecation warning when nextTick is used recursively\n      // setImmediate should be used instead instead\n      var version = process.versions.node.match(/^(?:(\\d+)\\.)?(?:(\\d+)\\.)?(\\*|\\d+)$/);\n      if (Array.isArray(version) && version[1] === '0' && version[2] === '10') {\n        nextTick = setImmediate;\n      }\n      return function() {\n        nextTick(lib$rsvp$asap$$flush);\n      };\n    }\n\n    // vertx\n    function lib$rsvp$asap$$useVertxTimer() {\n      return function() {\n        lib$rsvp$asap$$vertxNext(lib$rsvp$asap$$flush);\n      };\n    }\n\n    function lib$rsvp$asap$$useMutationObserver() {\n      var iterations = 0;\n      var observer = new lib$rsvp$asap$$BrowserMutationObserver(lib$rsvp$asap$$flush);\n      var node = document.createTextNode('');\n      observer.observe(node, { characterData: true });\n\n      return function() {\n        node.data = (iterations = ++iterations % 2);\n      };\n    }\n\n    // web worker\n    function lib$rsvp$asap$$useMessageChannel() {\n      var channel = new MessageChannel();\n      channel.port1.onmessage = lib$rsvp$asap$$flush;\n      return function () {\n        channel.port2.postMessage(0);\n      };\n    }\n\n    function lib$rsvp$asap$$useSetTimeout() {\n      return function() {\n        setTimeout(lib$rsvp$asap$$flush, 1);\n      };\n    }\n\n    var lib$rsvp$asap$$queue = new Array(1000);\n    function lib$rsvp$asap$$flush() {\n      for (var i = 0; i < lib$rsvp$asap$$len; i+=2) {\n        var callback = lib$rsvp$asap$$queue[i];\n        var arg = lib$rsvp$asap$$queue[i+1];\n\n        callback(arg);\n\n        lib$rsvp$asap$$queue[i] = undefined;\n        lib$rsvp$asap$$queue[i+1] = undefined;\n      }\n\n      lib$rsvp$asap$$len = 0;\n    }\n\n    function lib$rsvp$asap$$attemptVertex() {\n      try {\n        var r = require;\n        var vertx = r('vertx');\n        lib$rsvp$asap$$vertxNext = vertx.runOnLoop || vertx.runOnContext;\n        return lib$rsvp$asap$$useVertxTimer();\n      } catch(e) {\n        return lib$rsvp$asap$$useSetTimeout();\n      }\n    }\n\n    var lib$rsvp$asap$$scheduleFlush;\n    // Decide what async method to use to triggering processing of queued callbacks:\n    if (lib$rsvp$asap$$isNode) {\n      lib$rsvp$asap$$scheduleFlush = lib$rsvp$asap$$useNextTick();\n    } else if (lib$rsvp$asap$$BrowserMutationObserver) {\n      lib$rsvp$asap$$scheduleFlush = lib$rsvp$asap$$useMutationObserver();\n    } else if (lib$rsvp$asap$$isWorker) {\n      lib$rsvp$asap$$scheduleFlush = lib$rsvp$asap$$useMessageChannel();\n    } else if (lib$rsvp$asap$$browserWindow === undefined && typeof require === 'function') {\n      lib$rsvp$asap$$scheduleFlush = lib$rsvp$asap$$attemptVertex();\n    } else {\n      lib$rsvp$asap$$scheduleFlush = lib$rsvp$asap$$useSetTimeout();\n    }\n    function lib$rsvp$defer$$defer(label) {\n      var deferred = { };\n\n      deferred['promise'] = new lib$rsvp$promise$$default(function(resolve, reject) {\n        deferred['resolve'] = resolve;\n        deferred['reject'] = reject;\n      }, label);\n\n      return deferred;\n    }\n    var lib$rsvp$defer$$default = lib$rsvp$defer$$defer;\n    function lib$rsvp$filter$$filter(promises, filterFn, label) {\n      return lib$rsvp$promise$$default.all(promises, label).then(function(values) {\n        if (!lib$rsvp$utils$$isFunction(filterFn)) {\n          throw new TypeError(\"You must pass a function as filter's second argument.\");\n        }\n\n        var length = values.length;\n        var filtered = new Array(length);\n\n        for (var i = 0; i < length; i++) {\n          filtered[i] = filterFn(values[i]);\n        }\n\n        return lib$rsvp$promise$$default.all(filtered, label).then(function(filtered) {\n          var results = new Array(length);\n          var newLength = 0;\n\n          for (var i = 0; i < length; i++) {\n            if (filtered[i]) {\n              results[newLength] = values[i];\n              newLength++;\n            }\n          }\n\n          results.length = newLength;\n\n          return results;\n        });\n      });\n    }\n    var lib$rsvp$filter$$default = lib$rsvp$filter$$filter;\n\n    function lib$rsvp$promise$hash$$PromiseHash(Constructor, object, label) {\n      this._superConstructor(Constructor, object, true, label);\n    }\n\n    var lib$rsvp$promise$hash$$default = lib$rsvp$promise$hash$$PromiseHash;\n\n    lib$rsvp$promise$hash$$PromiseHash.prototype = lib$rsvp$utils$$o_create(lib$rsvp$enumerator$$default.prototype);\n    lib$rsvp$promise$hash$$PromiseHash.prototype._superConstructor = lib$rsvp$enumerator$$default;\n    lib$rsvp$promise$hash$$PromiseHash.prototype._init = function() {\n      this._result = {};\n    };\n\n    lib$rsvp$promise$hash$$PromiseHash.prototype._validateInput = function(input) {\n      return input && typeof input === 'object';\n    };\n\n    lib$rsvp$promise$hash$$PromiseHash.prototype._validationError = function() {\n      return new Error('Promise.hash must be called with an object');\n    };\n\n    lib$rsvp$promise$hash$$PromiseHash.prototype._enumerate = function() {\n      var promise = this.promise;\n      var input   = this._input;\n      var results = [];\n\n      for (var key in input) {\n        if (promise._state === lib$rsvp$$internal$$PENDING && input.hasOwnProperty(key)) {\n          results.push({\n            position: key,\n            entry: input[key]\n          });\n        }\n      }\n\n      var length = results.length;\n      this._remaining = length;\n      var result;\n\n      for (var i = 0; promise._state === lib$rsvp$$internal$$PENDING && i < length; i++) {\n        result = results[i];\n        this._eachEntry(result.entry, result.position);\n      }\n    };\n\n    function lib$rsvp$hash$settled$$HashSettled(Constructor, object, label) {\n      this._superConstructor(Constructor, object, false, label);\n    }\n\n    lib$rsvp$hash$settled$$HashSettled.prototype = lib$rsvp$utils$$o_create(lib$rsvp$promise$hash$$default.prototype);\n    lib$rsvp$hash$settled$$HashSettled.prototype._superConstructor = lib$rsvp$enumerator$$default;\n    lib$rsvp$hash$settled$$HashSettled.prototype._makeResult = lib$rsvp$enumerator$$makeSettledResult;\n\n    lib$rsvp$hash$settled$$HashSettled.prototype._validationError = function() {\n      return new Error('hashSettled must be called with an object');\n    };\n\n    function lib$rsvp$hash$settled$$hashSettled(object, label) {\n      return new lib$rsvp$hash$settled$$HashSettled(lib$rsvp$promise$$default, object, label).promise;\n    }\n    var lib$rsvp$hash$settled$$default = lib$rsvp$hash$settled$$hashSettled;\n    function lib$rsvp$hash$$hash(object, label) {\n      return new lib$rsvp$promise$hash$$default(lib$rsvp$promise$$default, object, label).promise;\n    }\n    var lib$rsvp$hash$$default = lib$rsvp$hash$$hash;\n    function lib$rsvp$map$$map(promises, mapFn, label) {\n      return lib$rsvp$promise$$default.all(promises, label).then(function(values) {\n        if (!lib$rsvp$utils$$isFunction(mapFn)) {\n          throw new TypeError(\"You must pass a function as map's second argument.\");\n        }\n\n        var length = values.length;\n        var results = new Array(length);\n\n        for (var i = 0; i < length; i++) {\n          results[i] = mapFn(values[i]);\n        }\n\n        return lib$rsvp$promise$$default.all(results, label);\n      });\n    }\n    var lib$rsvp$map$$default = lib$rsvp$map$$map;\n\n    function lib$rsvp$node$$Result() {\n      this.value = undefined;\n    }\n\n    var lib$rsvp$node$$ERROR = new lib$rsvp$node$$Result();\n    var lib$rsvp$node$$GET_THEN_ERROR = new lib$rsvp$node$$Result();\n\n    function lib$rsvp$node$$getThen(obj) {\n      try {\n       return obj.then;\n      } catch(error) {\n        lib$rsvp$node$$ERROR.value= error;\n        return lib$rsvp$node$$ERROR;\n      }\n    }\n\n\n    function lib$rsvp$node$$tryApply(f, s, a) {\n      try {\n        f.apply(s, a);\n      } catch(error) {\n        lib$rsvp$node$$ERROR.value = error;\n        return lib$rsvp$node$$ERROR;\n      }\n    }\n\n    function lib$rsvp$node$$makeObject(_, argumentNames) {\n      var obj = {};\n      var name;\n      var i;\n      var length = _.length;\n      var args = new Array(length);\n\n      for (var x = 0; x < length; x++) {\n        args[x] = _[x];\n      }\n\n      for (i = 0; i < argumentNames.length; i++) {\n        name = argumentNames[i];\n        obj[name] = args[i + 1];\n      }\n\n      return obj;\n    }\n\n    function lib$rsvp$node$$arrayResult(_) {\n      var length = _.length;\n      var args = new Array(length - 1);\n\n      for (var i = 1; i < length; i++) {\n        args[i - 1] = _[i];\n      }\n\n      return args;\n    }\n\n    function lib$rsvp$node$$wrapThenable(then, promise) {\n      return {\n        then: function(onFulFillment, onRejection) {\n          return then.call(promise, onFulFillment, onRejection);\n        }\n      };\n    }\n\n    function lib$rsvp$node$$denodeify(nodeFunc, options) {\n      var fn = function() {\n        var self = this;\n        var l = arguments.length;\n        var args = new Array(l + 1);\n        var arg;\n        var promiseInput = false;\n\n        for (var i = 0; i < l; ++i) {\n          arg = arguments[i];\n\n          if (!promiseInput) {\n            // TODO: clean this up\n            promiseInput = lib$rsvp$node$$needsPromiseInput(arg);\n            if (promiseInput === lib$rsvp$node$$GET_THEN_ERROR) {\n              var p = new lib$rsvp$promise$$default(lib$rsvp$$internal$$noop);\n              lib$rsvp$$internal$$reject(p, lib$rsvp$node$$GET_THEN_ERROR.value);\n              return p;\n            } else if (promiseInput && promiseInput !== true) {\n              arg = lib$rsvp$node$$wrapThenable(promiseInput, arg);\n            }\n          }\n          args[i] = arg;\n        }\n\n        var promise = new lib$rsvp$promise$$default(lib$rsvp$$internal$$noop);\n\n        args[l] = function(err, val) {\n          if (err)\n            lib$rsvp$$internal$$reject(promise, err);\n          else if (options === undefined)\n            lib$rsvp$$internal$$resolve(promise, val);\n          else if (options === true)\n            lib$rsvp$$internal$$resolve(promise, lib$rsvp$node$$arrayResult(arguments));\n          else if (lib$rsvp$utils$$isArray(options))\n            lib$rsvp$$internal$$resolve(promise, lib$rsvp$node$$makeObject(arguments, options));\n          else\n            lib$rsvp$$internal$$resolve(promise, val);\n        };\n\n        if (promiseInput) {\n          return lib$rsvp$node$$handlePromiseInput(promise, args, nodeFunc, self);\n        } else {\n          return lib$rsvp$node$$handleValueInput(promise, args, nodeFunc, self);\n        }\n      };\n\n      fn.__proto__ = nodeFunc;\n\n      return fn;\n    }\n\n    var lib$rsvp$node$$default = lib$rsvp$node$$denodeify;\n\n    function lib$rsvp$node$$handleValueInput(promise, args, nodeFunc, self) {\n      var result = lib$rsvp$node$$tryApply(nodeFunc, self, args);\n      if (result === lib$rsvp$node$$ERROR) {\n        lib$rsvp$$internal$$reject(promise, result.value);\n      }\n      return promise;\n    }\n\n    function lib$rsvp$node$$handlePromiseInput(promise, args, nodeFunc, self){\n      return lib$rsvp$promise$$default.all(args).then(function(args){\n        var result = lib$rsvp$node$$tryApply(nodeFunc, self, args);\n        if (result === lib$rsvp$node$$ERROR) {\n          lib$rsvp$$internal$$reject(promise, result.value);\n        }\n        return promise;\n      });\n    }\n\n    function lib$rsvp$node$$needsPromiseInput(arg) {\n      if (arg && typeof arg === 'object') {\n        if (arg.constructor === lib$rsvp$promise$$default) {\n          return true;\n        } else {\n          return lib$rsvp$node$$getThen(arg);\n        }\n      } else {\n        return false;\n      }\n    }\n    function lib$rsvp$race$$race(array, label) {\n      return lib$rsvp$promise$$default.race(array, label);\n    }\n    var lib$rsvp$race$$default = lib$rsvp$race$$race;\n    function lib$rsvp$reject$$reject(reason, label) {\n      return lib$rsvp$promise$$default.reject(reason, label);\n    }\n    var lib$rsvp$reject$$default = lib$rsvp$reject$$reject;\n    function lib$rsvp$resolve$$resolve(value, label) {\n      return lib$rsvp$promise$$default.resolve(value, label);\n    }\n    var lib$rsvp$resolve$$default = lib$rsvp$resolve$$resolve;\n    function lib$rsvp$rethrow$$rethrow(reason) {\n      setTimeout(function() {\n        throw reason;\n      });\n      throw reason;\n    }\n    var lib$rsvp$rethrow$$default = lib$rsvp$rethrow$$rethrow;\n\n    // default async is asap;\n    lib$rsvp$config$$config.async = lib$rsvp$asap$$default;\n    var lib$rsvp$$cast = lib$rsvp$resolve$$default;\n    function lib$rsvp$$async(callback, arg) {\n      lib$rsvp$config$$config.async(callback, arg);\n    }\n\n    function lib$rsvp$$on() {\n      lib$rsvp$config$$config['on'].apply(lib$rsvp$config$$config, arguments);\n    }\n\n    function lib$rsvp$$off() {\n      lib$rsvp$config$$config['off'].apply(lib$rsvp$config$$config, arguments);\n    }\n\n    // Set up instrumentation through `window.__PROMISE_INTRUMENTATION__`\n    if (typeof window !== 'undefined' && typeof window['__PROMISE_INSTRUMENTATION__'] === 'object') {\n      var lib$rsvp$$callbacks = window['__PROMISE_INSTRUMENTATION__'];\n      lib$rsvp$config$$configure('instrument', true);\n      for (var lib$rsvp$$eventName in lib$rsvp$$callbacks) {\n        if (lib$rsvp$$callbacks.hasOwnProperty(lib$rsvp$$eventName)) {\n          lib$rsvp$$on(lib$rsvp$$eventName, lib$rsvp$$callbacks[lib$rsvp$$eventName]);\n        }\n      }\n    }\n\n    var lib$rsvp$umd$$RSVP = {\n      'race': lib$rsvp$race$$default,\n      'Promise': lib$rsvp$promise$$default,\n      'allSettled': lib$rsvp$all$settled$$default,\n      'hash': lib$rsvp$hash$$default,\n      'hashSettled': lib$rsvp$hash$settled$$default,\n      'denodeify': lib$rsvp$node$$default,\n      'on': lib$rsvp$$on,\n      'off': lib$rsvp$$off,\n      'map': lib$rsvp$map$$default,\n      'filter': lib$rsvp$filter$$default,\n      'resolve': lib$rsvp$resolve$$default,\n      'reject': lib$rsvp$reject$$default,\n      'all': lib$rsvp$all$$default,\n      'rethrow': lib$rsvp$rethrow$$default,\n      'defer': lib$rsvp$defer$$default,\n      'EventTarget': lib$rsvp$events$$default,\n      'configure': lib$rsvp$config$$configure,\n      'async': lib$rsvp$$async\n    };\n\n    /* global define:true module:true window: true */\n    if (typeof define === 'function' && define['amd']) {\n      define('rsvp',[],function() { return lib$rsvp$umd$$RSVP; });\n    } else if (typeof module !== 'undefined' && module['exports']) {\n      module['exports'] = lib$rsvp$umd$$RSVP;\n    } else if (typeof this !== 'undefined') {\n      this['RSVP'] = lib$rsvp$umd$$RSVP;\n    }\n}).call(this);\n\n/* jscs:enable */\n/*eslint-enable */\n;\n","/*eslint-disable */\n/* jscs:disable */\ndefine(\"oasis/shims\",\n  [\"exports\"],\n  function(__exports__) {\n    \"use strict\";\n    var K = function() {};\n\n    function o_create(obj, props) {\n      K.prototype = obj;\n      obj = new K();\n      if (props) {\n        K.prototype = obj;\n        for (var prop in props) {\n          K.prototype[prop] = props[prop].value;\n        }\n        obj = new K();\n      }\n      K.prototype = null;\n\n      return obj;\n    }\n\n    // If it turns out we need a better polyfill we can grab mozilla's at: \n    // https://developer.mozilla.org/en-US/docs/Web/API/EventTarget.removeEventListener?redirectlocale=en-US&redirectslug=DOM%2FEventTarget.removeEventListener#Polyfill_to_support_older_browsers\n    function addEventListener(receiver, eventName, fn) {\n      if (receiver.addEventListener) {\n        return receiver.addEventListener(eventName, fn);\n      } else if (receiver.attachEvent) {\n        return receiver.attachEvent('on' + eventName, fn);\n      }\n    }\n\n    function removeEventListener(receiver, eventName, fn) {\n      if (receiver.removeEventListener) {\n        return receiver.removeEventListener(eventName, fn);\n      } else if (receiver.detachEvent) {\n        return receiver.detachEvent('on' + eventName, fn);\n      }\n    }\n\n    function isNativeFunc(func) {\n      // This should probably work in all browsers likely to have ES5 array methods\n      return func && Function.prototype.toString.call(func).indexOf('[native code]') > -1;\n    }\n\n    var a_forEach = isNativeFunc(Array.prototype.forEach) ? Array.prototype.forEach : function(fun /*, thisp */) {\n      if (this === void 0 || this === null) {\n        throw new TypeError();\n      }\n\n      var t = Object(this);\n      var len = t.length >>> 0;\n      if (typeof fun !== \"function\") {\n        throw new TypeError();\n      }\n\n      var thisp = arguments[1];\n      for (var i = 0; i < len; i++) {\n        if (i in t) {\n          fun.call(thisp, t[i], i, t);\n        }\n      }\n    };\n\n    var a_reduce = isNativeFunc(Array.prototype.reduce) ? Array.prototype.reduce : function(callback, opt_initialValue){\n      if (null === this || 'undefined' === typeof this) {\n        // At the moment all modern browsers, that support strict mode, have\n        // native implementation of Array.prototype.reduce. For instance, IE8\n        // does not support strict mode, so this check is actually useless.\n        throw new TypeError(\n            'Array.prototype.reduce called on null or undefined');\n      }\n      if ('function' !== typeof callback) {\n        throw new TypeError(callback + ' is not a function');\n      }\n      var index = 0, length = this.length >>> 0, value, isValueSet = false;\n      if (1 < arguments.length) {\n        value = opt_initialValue;\n        isValueSet = true;\n      }\n      for ( ; length > index; ++index) {\n        if (!this.hasOwnProperty(index)) continue;\n        if (isValueSet) {\n          value = callback(value, this[index], index, this);\n        } else {\n          value = this[index];\n          isValueSet = true;\n        }\n      }\n      if (!isValueSet) {\n        throw new TypeError('Reduce of empty array with no initial value');\n      }\n      return value;\n    };\n\n    var a_map = isNativeFunc(Array.prototype.map) ? Array.prototype.map : function(callback, thisArg) {\n\n        var T, A, k;\n\n        if (this == null) {\n          throw new TypeError(\" this is null or not defined\");\n        }\n\n        // 1. Let O be the result of calling ToObject passing the |this| value as the argument.\n        var O = Object(this);\n\n        // 2. Let lenValue be the result of calling the Get internal method of O with the argument \"length\".\n        // 3. Let len be ToUint32(lenValue).\n        var len = O.length >>> 0;\n\n        // 4. If IsCallable(callback) is false, throw a TypeError exception.\n        // See: http://es5.github.com/#x9.11\n        if (typeof callback !== \"function\") {\n          throw new TypeError(callback + \" is not a function\");\n        }\n\n        // 5. If thisArg was supplied, let T be thisArg; else let T be undefined.\n        if (thisArg) {\n          T = thisArg;\n        }\n\n        // 6. Let A be a new array created as if by the expression new Array(len) where Array is\n        // the standard built-in constructor with that name and len is the value of len.\n        A = new Array(len);\n\n        // 7. Let k be 0\n        k = 0;\n\n        // 8. Repeat, while k < len\n        while(k < len) {\n\n          var kValue, mappedValue;\n\n          // a. Let Pk be ToString(k).\n          //   This is implicit for LHS operands of the in operator\n          // b. Let kPresent be the result of calling the HasProperty internal method of O with argument Pk.\n          //   This step can be combined with c\n          // c. If kPresent is true, then\n          if (k in O) {\n\n            // i. Let kValue be the result of calling the Get internal method of O with argument Pk.\n            kValue = O[ k ];\n\n            // ii. Let mappedValue be the result of calling the Call internal method of callback\n            // with T as the this value and argument list containing kValue, k, and O.\n            mappedValue = callback.call(T, kValue, k, O);\n\n            // iii. Call the DefineOwnProperty internal method of A with arguments\n            // Pk, Property Descriptor {Value: mappedValue, : true, Enumerable: true, Configurable: true},\n            // and false.\n\n            // In browsers that support Object.defineProperty, use the following:\n            // Object.defineProperty(A, Pk, { value: mappedValue, writable: true, enumerable: true, configurable: true });\n\n            // For best browser support, use the following:\n            A[ k ] = mappedValue;\n          }\n          // d. Increase k by 1.\n          k++;\n        }\n\n        // 9. return A\n        return A;\n      };  \n\n    var a_indexOf = isNativeFunc(Array.prototype.indexOf) ? Array.prototype.indexOf : function (searchElement /*, fromIndex */ ) {\n      /* jshint eqeqeq:false */\n      \"use strict\";\n      if (this == null) {\n        throw new TypeError();\n      }\n      var t = Object(this);\n      var len = t.length >>> 0;\n\n      if (len === 0) {\n        return -1;\n      }\n      var n = 0;\n      if (arguments.length > 1) {\n        n = Number(arguments[1]);\n        if (n != n) { // shortcut for verifying if it's NaN\n          n = 0;\n        } else if (n != 0 && n != Infinity && n != -Infinity) {\n          n = (n > 0 || -1) * Math.floor(Math.abs(n));\n        }\n      }\n      if (n >= len) {\n        return -1;\n      }\n      var k = n >= 0 ? n : Math.max(len - Math.abs(n), 0);\n      for (; k < len; k++) {\n        if (k in t && t[k] === searchElement) {\n          return k;\n        }\n      }\n      return -1;\n    };\n\n    var a_filter = isNativeFunc(Array.prototype.filter) ? Array.prototype.filter : function(fun /*, thisp*/) {\n      'use strict';\n\n      if (!this) {\n        throw new TypeError();\n      }\n\n      var objects = Object(this);\n      var len = objects.length >>> 0;\n      if (typeof fun !== 'function') {\n        throw new TypeError();\n      }\n\n      var res = [];\n      var thisp = arguments[1];\n      for (var i in objects) {\n        if (objects.hasOwnProperty(i)) {\n          if (fun.call(thisp, objects[i], i, objects)) {\n            res.push(objects[i]);\n          }\n        }\n      }\n\n      return res;\n    };\n\n    __exports__.o_create = o_create;\n    __exports__.addEventListener = addEventListener;\n    __exports__.removeEventListener = removeEventListener;\n    __exports__.a_forEach = a_forEach;\n    __exports__.a_reduce = a_reduce;\n    __exports__.a_map = a_map;\n    __exports__.a_indexOf = a_indexOf;\n    __exports__.a_filter = a_filter;\n  });\n/* jscs:enable */\n/*eslint-enable */\n;\n","/*eslint-disable */\n/* jscs:disable */\ndefine(\"oasis/util\",\n  [\"oasis/shims\",\"exports\"],\n  function(__dependency1__, __exports__) {\n    \"use strict\";\n    var o_create = __dependency1__.o_create;\n    var a_filter = __dependency1__.a_filter;\n\n    function assert(assertion, string) {\n      if (!assertion) {\n        throw new Error(string);\n      }\n    }\n\n    function noop() { }\n\n    function mustImplement(className, name) {\n      return function() {\n        throw new Error(\"Subclasses of \" + className + \" must implement \" + name);\n      };\n    }\n\n    function extend(parent, object) {\n      function OasisObject() {\n        parent.apply(this, arguments);\n        if (this.initialize) {\n          this.initialize.apply(this, arguments);\n        }\n      }\n\n      OasisObject.prototype = o_create(parent.prototype);\n\n      for (var prop in object) {\n        if (!object.hasOwnProperty(prop)) { continue; }\n        OasisObject.prototype[prop] = object[prop];\n      }\n\n      return OasisObject;\n    }\n\n    function delegate(delegateeProperty, delegatedMethod) {\n      return function () {\n        var delegatee = this[delegateeProperty];\n        return delegatee[delegatedMethod].apply(delegatee, arguments);\n      };\n    }\n\n    function uniq() {\n      var seen = {};\n      return a_filter.call(this, function (item) {\n        var _seen = !seen.hasOwnProperty(item);\n        seen[item] = true;\n        return _seen;\n      });\n    }\n\n    function reverseMerge(a, b) {\n      for (var prop in b) {\n        if (!b.hasOwnProperty(prop)) { continue; }\n\n        if (! (prop in a)) {\n          a[prop] = b[prop];\n        }\n      }\n\n      return a;\n    }\n\n    __exports__.assert = assert;\n    __exports__.noop = noop;\n    __exports__.mustImplement = mustImplement;\n    __exports__.extend = extend;\n    __exports__.delegate = delegate;\n    __exports__.uniq = uniq;\n    __exports__.reverseMerge = reverseMerge;\n  });\n/* jscs:enable */\n/*eslint-enable */\n;\n","/*eslint-disable */\n/* jscs:disable */\ndefine(\"oasis/xhr\",\n  [\"oasis/util\",\"rsvp\",\"exports\"],\n  function(__dependency1__, RSVP, __exports__) {\n    \"use strict\";\n    var noop = __dependency1__.noop;\n    /*global XDomainRequest */\n\n\n    var a_slice = Array.prototype.slice;\n\n    function acceptsHeader(options) {\n      var dataType = options.dataType;\n\n      if (dataType && accepts[dataType]) {\n        return accepts[dataType];\n      }\n\n      return accepts['*'];\n    }\n\n    function xhrSetRequestHeader(xhr, options) {\n      xhr.setRequestHeader(\"Accepts\", acceptsHeader(options));\n    }\n\n    function xhrGetLoadStatus(xhr) {\n      return xhr.status;\n    }\n\n    function xdrGetLoadStatus() {\n      return 200;\n    }\n\n    var NONE = {};\n\n    function trigger(event, oasis) {\n      if (!oasis) { return; }\n\n      var args = a_slice.call(arguments, 2);\n\n      args.unshift(event);\n      oasis.trigger.apply(oasis, args);\n    }\n\n    var accepts = {\n      \"*\": \"*/*\",\n      text: \"text/plain\",\n      html: \"text/html\",\n      xml: \"application/xml, text/xml\",\n      json: \"application/json, text/javascript\"\n    };\n\n    var XHR, setRequestHeader, getLoadStatus, send;\n\n    try {\n      if ('withCredentials' in new XMLHttpRequest()) {\n        XHR = XMLHttpRequest;\n        setRequestHeader = xhrSetRequestHeader;\n        getLoadStatus = xhrGetLoadStatus;\n      } else if (typeof XDomainRequest !== 'undefined') {\n        XHR = XDomainRequest;\n        setRequestHeader = noop;\n        getLoadStatus = xdrGetLoadStatus;\n      }\n    } catch( exception ) {\n      if (typeof XDomainRequest !== 'undefined') {\n        XHR = XDomainRequest;\n        setRequestHeader = noop;\n        getLoadStatus = xdrGetLoadStatus;\n      }\n    }\n    // else inline adapter with cross-domain cards is not going to work\n\n\n    function xhr(url, options, oasis) {\n      if (!oasis && this instanceof Oasis) { oasis = this; }\n      if (!options) { options = NONE; }\n\n      return new RSVP.Promise(function(resolve, reject){\n        var xhr = new XHR();\n        xhr.open(\"get\", url, true);\n        setRequestHeader(xhr, options);\n\n        if (options.timeout) {\n          xhr.timeout = options.timeout;\n        }\n\n        xhr.onload = function () {\n          trigger('xhr.load', oasis, url, options, xhr);\n\n          var status = getLoadStatus(xhr);\n          if (status >= 200 && status < 300) {\n            resolve(xhr.responseText);\n          } else {\n            reject(xhr);\n          }\n        };\n\n        xhr.onprogress = noop;\n        xhr.ontimeout = function () {\n          trigger('xhr.timeout', oasis, url, options, xhr);\n          reject(xhr);\n        };\n\n        xhr.onerror = function () {\n          trigger('xhr.error', oasis, url, options, xhr);\n          reject(xhr);\n        };\n\n        trigger('xhr.send', oasis, url, options, xhr);\n        xhr.send();\n      });\n    }\n\n    __exports__.xhr = xhr;\n  });\n/* jscs:enable */\n/*eslint-enable */\n;\n","/*eslint-disable */\n/* jscs:disable */\ndefine(\"oasis/message_channel\",\n  [\"oasis/util\",\"rsvp\",\"exports\"],\n  function(__dependency1__, RSVP, __exports__) {\n    \"use strict\";\n    var extend = __dependency1__.extend;\n    var mustImplement = __dependency1__.mustImplement;\n\n    /**\n      OasisPort is an interface that adapters can use to implement ports.\n      Ports are passed into the `initialize` method of services and consumers,\n      and are available as `this.port` on services and consumers.\n\n      Ports are the low-level API that can be used to communicate with the\n      other side of a connection. In general, you will probably want to use\n      the `events` and `requests` objects inside your service or consumer\n      rather than manually listen for events and requests.\n\n      @constructor\n      @param {OasisPort} oasis\n      @param {OasisPort} port\n    */\n    function OasisPort(oasis, port) {}\n\n\n    function getRequestId(oasis) {\n      return oasis.oasisId + '-' + oasis.requestId++;\n    }\n\n    OasisPort.prototype = {\n      /**\n        This allows you to register an event handler for a particular event\n        name.\n\n        @param {String} eventName the name of the event\n        @param {Function} callback the callback to call when the event occurs\n        @param {any?} binding an optional value of `this` inside of the callback\n      */\n      on: mustImplement('OasisPort', 'on'),\n\n      /**\n        Allows you to register an event handler that is called for all events\n        that are sent to the port.\n      */\n      all: mustImplement('OasisPort', 'all'),\n\n      /**\n        This allows you to unregister an event handler for an event name\n        and callback. You should not pass in the optional binding.\n\n        @param {String} eventName the name of the event\n        @param {Function} callback a reference to the callback that was\n          passed into `.on`.\n      */\n      off: mustImplement('OasisPort', 'off'),\n\n      /**\n        This method sends an event to the other side of the connection.\n\n        @param {String} eventName the name of the event\n        @param {Structured?} data optional data to pass along with the event\n      */\n      send: mustImplement('OasisPort', 'send'),\n\n      /**\n        @private\n\n        Adapters should implement this to start receiving messages from the\n        other side of the connection.\n\n        It is up to the adapter to make sure that no messages are dropped if\n        they are sent before `start` is called.\n      */\n      start: mustImplement('OasisPort', 'start'),\n\n      /**\n        @private\n\n        Adapters should implement this to stop receiving messages from the\n        other side of the connection.\n      */\n      close: mustImplement('OasisPort', 'close'),\n\n      /**\n        This method sends a request to the other side of the connection.\n\n        @param {String} requestName the name of the request\n        @return {Promise} a promise that will be resolved with the value\n          provided by the other side of the connection, or rejected if the other\n          side indicates retrieving the value resulted in an error. The fulfillment\n          value must be structured data.\n      */\n      request: function(eventName) {\n        var oasis = this.oasis;\n        var port = this;\n        var args = [].slice.call(arguments, 1);\n\n        return new RSVP.Promise(function (resolve, reject) {\n          var requestId = getRequestId(oasis);\n\n          var clearObservers = function () {\n            port.off('@response:' + eventName, observer);\n            port.off('@errorResponse:' + eventName, errorObserver);\n          };\n\n          var observer = function(event) {\n            if (event.requestId === requestId) {\n              clearObservers();\n              resolve(event.data);\n            }\n          };\n\n          var errorObserver = function (event) {\n            if (event.requestId === requestId) {\n              clearObservers();\n              reject(event.data);\n            }\n          };\n\n          port.on('@response:' + eventName, observer, port);\n          port.on('@errorResponse:' + eventName, errorObserver, port);\n          port.send('@request:' + eventName, { requestId: requestId, args: args });\n        });\n      },\n\n      /**\n        This method registers a callback to be called when a request is made\n        by the other side of the connection.\n\n        The callback will be called with any arguments passed in the request.  It\n        may either return a value directly, or return a promise if the value must be\n        retrieved asynchronously.\n\n        Examples:\n\n          // This completes the request immediately.\n          service.onRequest('name', function () {\n            return 'David';\n          });\n\n\n          // This completely the request asynchronously.\n          service.onRequest('name', function () {\n            return new Oasis.RSVP.Promise(function (resolve, reject) {\n              setTimeout( function() {\n                resolve('David');\n              }, 200);\n            });\n          });\n\n        @param {String} requestName the name of the request\n        @param {Function} callback the callback to be called when a request\n          is made.\n        @param {any?} binding the value of `this` in the callback\n      */\n      onRequest: function(eventName, callback, binding) {\n        var self = this;\n\n        this.on('@request:' + eventName, function(data) {\n          var requestId = data.requestId,\n              args = data.args,\n              getResponse = new RSVP.Promise(function (resolve, reject) {\n                var value = callback.apply(binding, data.args);\n                if (undefined !== value) {\n                  resolve(value);\n                } else {\n                  reject(\"@request:\" + eventName + \" [\" + data.requestId + \"] did not return a value.  If you want to return a literal `undefined` return `RSVP.resolve(undefined)`\");\n                }\n              });\n\n          getResponse.then(function (value) {\n            self.send('@response:' + eventName, {\n              requestId: requestId,\n              data: value\n            });\n          }, function (error) {\n            var value = error;\n            if (error instanceof Error) {\n              value = {\n                message: error.message,\n                stack: error.stack\n              };\n            }\n            self.send('@errorResponse:' + eventName, {\n              requestId: requestId,\n              data: value\n            });\n          });\n        });\n      }\n    };\n\n\n    function OasisMessageChannel(oasis) {}\n\n    OasisMessageChannel.prototype = {\n      start: mustImplement('OasisMessageChannel', 'start')\n    };\n\n\n    var PostMessageMessageChannel = extend(OasisMessageChannel, {\n      initialize: function(oasis) {\n        this.channel = new MessageChannel();\n        this.port1 = new PostMessagePort(oasis, this.channel.port1);\n        this.port2 = new PostMessagePort(oasis, this.channel.port2);\n      },\n\n      start: function() {\n        this.port1.start();\n        this.port2.start();\n      },\n\n      destroy: function() {\n        this.port1.close();\n        this.port2.close();\n        delete this.port1;\n        delete this.port2;\n        delete this.channel;\n      }\n    });\n\n    var PostMessagePort = extend(OasisPort, {\n      initialize: function(oasis, port) {\n        this.oasis = oasis;\n        this.port = port;\n        this._callbacks = [];\n      },\n\n      on: function(eventName, callback, binding) {\n        var oasis = this.oasis;\n\n        function wrappedCallback(event) {\n          if (event.data.type === eventName) {\n            oasis.configuration.eventCallback(function () {\n              return callback.call(binding, event.data.data);\n            });\n          }\n        }\n\n        this._callbacks.push([callback, wrappedCallback]);\n        this.port.addEventListener('message', wrappedCallback);\n      },\n\n      all: function(callback, binding) {\n        var oasis = this.oasis;\n\n        function wrappedCallback(event) {\n          oasis.configuration.eventCallback(function () {\n            callback.call(binding, event.data.type, event.data.data);\n          });\n        }\n\n        this.port.addEventListener('message', wrappedCallback);\n      },\n\n      off: function(eventName, callback) {\n        var foundCallback;\n\n        for (var i=0, l=this._callbacks.length; i<l; i++) {\n          foundCallback = this._callbacks[i];\n          if (foundCallback[0] === callback) {\n            this.port.removeEventListener('message', foundCallback[1]);\n          }\n        }\n      },\n\n      send: function(eventName, data) {\n        this.port.postMessage({\n          type: eventName,\n          data: data\n        });\n      },\n\n      start: function() {\n        this.port.start();\n      },\n\n      close: function() {\n        var foundCallback;\n\n        for (var i=0, l=this._callbacks.length; i<l; i++) {\n          foundCallback = this._callbacks[i];\n          this.port.removeEventListener('message', foundCallback[1]);\n        }\n        this._callbacks = [];\n\n        this.port.close();\n      }\n    });\n\n    __exports__.OasisPort = OasisPort;\n    __exports__.PostMessageMessageChannel = PostMessageMessageChannel;\n    __exports__.PostMessagePort = PostMessagePort;\n  });\n/* jscs:enable */\n/*eslint-enable */\n;\n","/*eslint-disable */\n/* jscs:disable */\ndefine(\"oasis/logger\",\n  [],\n  function() {\n    \"use strict\";\n    function Logger() {\n      this.enabled = false;\n    }\n\n    Logger.prototype = {\n      enable: function () {\n        this.enabled = true;\n      },\n\n      disable: function () {\n        this.enabled = false;\n      },\n\n      log: function () {\n        if (logger.enabled) {\n          if (typeof console !== 'undefined' && typeof console.log === 'function') {\n            console.log.apply(console, arguments);\n          } else if (typeof console !== 'undefined' && typeof console.log === 'object') {\n            // Log in IE\n            try {\n              switch (arguments.length) {\n                case 1:\n                  console.log(arguments[0]);\n                  break;\n                case 2:\n                  console.log(arguments[0], arguments[1]);\n                  break;\n                default:\n                  console.log(arguments[0], arguments[1], arguments[2]);\n              }\n            } catch(e) {}\n          }\n        }\n      }\n    };\n\n    var logger = new Logger();\n\n\n    return logger;\n  });\n/* jscs:enable */\n/*eslint-enable */\n;\n","/*eslint-disable */\n/* jscs:disable */\ndefine(\"oasis/connect\",\n  [\"oasis/util\",\"oasis/shims\",\"oasis/message_channel\",\"rsvp\",\"oasis/logger\",\"exports\"],\n  function(__dependency1__, __dependency2__, __dependency3__, RSVP, Logger, __exports__) {\n    \"use strict\";\n    var assert = __dependency1__.assert;\n    var a_forEach = __dependency2__.a_forEach;\n    var PostMessagePort = __dependency3__.PostMessagePort;\n\n\n    function registerHandler(oasis, capability, options) {\n      var port = oasis.ports[capability];\n\n      if (port) {\n        Logger.log(oasis.oasisId, \"sandbox: found port, setting up '\" + capability + \"'\");\n        options.setupCapability(port);\n\n        if (options.promise) {\n          options.promise.then(function() {\n            port.start();\n          })['catch'](RSVP.rethrow);\n        } else {\n          port.start();\n        }\n      } else if (!oasis.receivedPorts) {\n        Logger.log(\"No port found, saving handler for '\" + capability + \"'\");\n        oasis.handlers[capability] = options;\n      } else {\n        Logger.log(\"No port was sent for capability '\" + capability + \"'\");\n        options.rejectCapability();\n      }\n    }\n\n    /**\n      This is the main entry point that allows sandboxes to connect back\n      to their containing environment.\n\n      It can be called either with a set of named consumers, with callbacks, or using promises.\n\n      Example\n\n        // Using promises\n        Oasis.connect('foo').then( function (port) {\n          port.send('hello');\n        }, function () {\n          // error\n        });\n\n\n        // using callbacks\n        Oasis.connect('foo', function (port) {\n          port.send('hello');\n        }, errorHandler);\n\n\n        // connecting several consumers at once.\n        var ConsumerA = Oasis.Consumer.extend({\n          initialize: function (port) { this.port = port; },\n\n          error: function () { }\n        });\n\n        var ConsumerB = Oasis.Consumer.extend({\n          initialize: function (port) { this.port = port; },\n\n          error: function () { }\n        });\n\n        Oasis.connect({\n          consumers: {\n            capabilityA: ConsumerA,\n            capabilityB: ConsumerB\n          }\n        });\n\n      @param {String} capability the name of the service to connect to, or an object\n        containing named consumers to connect.\n      @param {Function?} callback the callback to trigger once the other\n        side of the connection is available.\n      @param {Function?} errorCallback the callback to trigger if the capability is\n        not provided by the environment.\n      @return {Promise} a promise that will be resolved once the other\n        side of the connection is available. You can use this instead\n        of the callbacks.\n    */\n    function connect(capability, callback, errorCallback) {\n      if (typeof capability === 'object') {\n        return connectConsumers(this, capability.consumers);\n      } else if (callback) {\n        return connectCallbacks(this, capability, callback, errorCallback);\n      } else {\n        return connectPromise(this, capability);\n      }\n    }\n\n    function connectCapabilities(capabilities, eventPorts) {\n      var oasis = this;\n      a_forEach.call(capabilities, function(capability, i) {\n        var handler = oasis.handlers[capability],\n            port = new PostMessagePort(oasis, eventPorts[i]);\n\n        if (handler) {\n          Logger.log(\"Invoking handler for '\" + capability + \"'\");\n\n          RSVP.resolve(handler.setupCapability(port)).then(function () {\n            port.start();\n          })['catch'](RSVP.rethrow);\n        }\n\n        oasis.ports[capability] = port;\n      });\n\n      // for each handler w/o capability, reject\n      for( var prop in oasis.handlers ) {\n        if( ! oasis.ports[prop] ) {\n          oasis.handlers[prop].rejectCapability();\n        }\n      }\n\n      this.receivedPorts = true;\n    }\n\n    function portFor(capability) {\n      var port = this.ports[capability];\n      assert(port, \"You asked for the port for the '\" + capability + \"' capability, but the environment did not provide one.\");\n      return port;\n    }\n\n\n    function connectConsumers(oasis, consumers) {\n      function setupCapability(Consumer, name) {\n        return function(port) {\n          var consumer = new Consumer(port);\n          oasis.consumers[name] = consumer;\n          consumer.initialize(port, name);\n        };\n      }\n\n      function rejectCapability(prop) {\n        return function () {\n          consumers[prop].prototype.error();\n        };\n      }\n\n      for (var prop in consumers) {\n        registerHandler(oasis, prop, {\n          setupCapability: setupCapability(consumers[prop], prop),\n          rejectCapability: rejectCapability(prop)\n        });\n      }\n    }\n\n    function connectCallbacks(oasis, capability, callback, errorCallback) {\n      Logger.log(\"Connecting to '\" + capability + \"' with callback.\");\n\n      registerHandler(oasis, capability, {\n        setupCapability: function(port) {\n          callback(port);\n        },\n        rejectCapability: function () {\n          if (errorCallback) {\n            errorCallback();\n          }\n        }\n      });\n    }\n\n    function connectPromise(oasis, capability) {\n      Logger.log(\"Connecting to '\" + capability + \"' with promise.\");\n\n      var defered = RSVP.defer();\n      registerHandler(oasis, capability, {\n        promise: defered.promise,\n        setupCapability: function(port) {\n          defered.resolve(port);\n          return defered.promise;\n        },\n        rejectCapability: function () {\n          defered.reject();\n        }\n      });\n      return defered.promise;\n    }\n\n    __exports__.registerHandler = registerHandler;\n    __exports__.connect = connect;\n    __exports__.connectCapabilities = connectCapabilities;\n    __exports__.portFor = portFor;\n  });\n/* jscs:enable */\n/*eslint-enable */\n;\n","/* jscs:disable */\ndefine(\"oasis/version\",\n  [],\n  function() {\n    \"use strict\";\n\n    return '0.4.0';\n  });\n/* jscs:enable */\n;\n","/*eslint-disable */\n/* jscs:disable */\ndefine(\"oasis/config\",\n  [],\n  function() {\n    \"use strict\";\n    /**\n      Stores Oasis configuration.  Options include:\n\n      - `eventCallback` - a function that wraps `message` event handlers.  By\n        default the event hanlder is simply invoked.\n      - `allowSameOrigin` - a card can be hosted on the same domain\n      - `reconnect` - the default reconnect options for iframe sandboxes.  Possible values are:\n        - \"none\" - do not allow sandbox reconnection\n        - \"verify\" - only allow reconnections from the original origin of the sandbox\n        - \"any\" - allow any sandbox reconnections.  Only use this setting if you are\n          using Oasis strictly for isolation of trusted applications or if it's safe\n          to connect your sandbox to arbitrary origins.  This is an advanced setting\n          and should be used with care.\n    */\n    function OasisConfiguration() {\n      this.eventCallback = function (callback) { callback(); };\n      this.allowSameOrigin = false;\n      this.reconnect = 'verify';\n    }\n\n\n    return OasisConfiguration;\n  });\n/* jscs:enable */\n/*eslint-enable */\n;\n","/*eslint-disable */\n/* jscs:disable */\ndefine(\"oasis/sandbox\",\n  [\"oasis/util\",\"oasis/shims\",\"oasis/message_channel\",\"rsvp\",\"oasis/logger\"],\n  function(__dependency1__, __dependency2__, __dependency3__, RSVP, Logger) {\n    \"use strict\";\n    var assert = __dependency1__.assert;\n    var uniq = __dependency1__.uniq;\n    var reverseMerge = __dependency1__.reverseMerge;\n    var a_forEach = __dependency2__.a_forEach;\n    var a_reduce = __dependency2__.a_reduce;\n    var a_filter = __dependency2__.a_filter;\n    var OasisPort = __dependency3__.OasisPort;\n\n\n    var OasisSandbox = function(oasis, options) {\n      options = reverseMerge(options || {}, {\n        reconnect: oasis.configuration.reconnect\n      });\n\n      var reconnect = options.reconnect;\n      assert( reconnect === \"none\" || reconnect === \"verify\" || reconnect === \"any\",\n              \"`reconnect` must be one of 'none', 'verify' or 'any'.  '\" + reconnect + \"' is invalid.\");\n\n      this.connections = {};\n      this.wiretaps = [];\n\n      this.oasis = oasis;\n\n      // Generic capabilities code\n      var pkg = oasis.packages[options.url];\n\n      var capabilities = options.capabilities;\n      if (!capabilities) {\n        assert(pkg, \"You are trying to create a sandbox from an unregistered URL without providing capabilities. Please use Oasis.register to register your package or pass a list of capabilities to createSandbox.\");\n        capabilities = pkg.capabilities;\n      }\n\n      pkg = pkg || {};\n\n      this.adapter = options.adapter || Oasis.adapters.iframe;\n\n      this._capabilitiesToConnect = this._filterCapabilities(capabilities);\n      this.envPortDefereds = {};\n      this.sandboxPortDefereds = {};\n      this.channels = {};\n      this.capabilities = {};\n      this.options = options;\n      this.firstLoad = true;\n\n      var sandbox = this;\n      this.promisePorts();\n      this.adapter.initializeSandbox(this);\n    };\n\n    OasisSandbox.prototype = {\n      waitForLoad: function () {\n        return this._waitForLoadDeferred().promise;\n      },\n\n      wiretap: function(callback) {\n        this.wiretaps.push(callback);\n      },\n\n      connect: function(capability) {\n        var portPromise = this.envPortDefereds[capability].promise;\n\n        assert(portPromise, \"Connect was called on '\" + capability + \"' but no such capability was registered.\");\n\n        return portPromise;\n      },\n\n      createAndTransferCapabilities: function () {\n        if (!this.firstLoad) { this.promisePorts(); }\n\n        this.createChannels();\n        this.connectPorts();\n\n        // subsequent calls to `createAndTransferCapabilities` requires new port promises\n        this.firstLoad = false;\n      },\n\n      promisePorts: function () {\n        a_forEach.call(this._capabilitiesToConnect, function(capability) {\n          this.envPortDefereds[capability] = RSVP.defer();\n          this.sandboxPortDefereds[capability] = RSVP.defer();\n        }, this);\n      },\n\n      createChannels: function () {\n        var sandbox = this,\n            services = this.options.services || {},\n            channels = this.channels;\n        a_forEach.call(this._capabilitiesToConnect, function (capability) {\n\n          Logger.log(\"container: Will create port for '\" + capability + \"'\");\n          var service = services[capability],\n              channel, port;\n\n          // If an existing port is provided, just\n          // pass it along to the new sandbox.\n\n          // TODO: This should probably be an OasisPort if possible\n          if (service instanceof OasisPort) {\n            port = this.adapter.proxyPort(this, service);\n            this.capabilities[capability] = service;\n          } else {\n            channel = channels[capability] = this.adapter.createChannel(sandbox.oasis);\n\n            var environmentPort = this.adapter.environmentPort(this, channel),\n                sandboxPort = this.adapter.sandboxPort(this, channel);\n\n            Logger.log(\"container: Wiretapping '\" + capability + \"'\");\n\n            environmentPort.all(function(eventName, data) {\n              a_forEach.call(this.wiretaps, function(wiretap) {\n                wiretap(capability, {\n                  type: eventName,\n                  data: data,\n                  direction: 'received'\n                });\n              });\n            }, this);\n\n            a_forEach.call(this.wiretaps, function(wiretap) {\n              var originalSend = environmentPort.send;\n\n              environmentPort.send = function(eventName, data) {\n                wiretap(capability, {\n                  type: eventName,\n                  data: data,\n                  direction: 'sent'\n                });\n\n                originalSend.apply(environmentPort, arguments);\n              };\n            });\n\n            if (service) {\n              Logger.log(\"container: Creating service for '\" + capability + \"'\");\n              /*jshint newcap:false*/\n              // Generic\n              service = new service(environmentPort, this);\n              service.initialize(environmentPort, capability);\n              sandbox.oasis.services.push(service);\n              this.capabilities[capability] = service;\n            }\n\n            // Law of Demeter violation\n            port = sandboxPort;\n\n            this.envPortDefereds[capability].resolve(environmentPort);\n          }\n\n          Logger.log(\"container: Port created for '\" + capability + \"'\");\n          this.sandboxPortDefereds[capability].resolve(port);\n        }, this);\n      },\n\n      destroyChannels: function() {\n        for( var prop in this.channels ) {\n          this.channels[prop].destroy();\n          delete this.channels[prop];\n        }\n        this.channels = [];\n      },\n\n      connectPorts: function () {\n        var sandbox = this;\n\n        var allSandboxPortPromises = a_reduce.call(this._capabilitiesToConnect, function (accumulator, capability) {\n          return accumulator.concat(sandbox.sandboxPortDefereds[capability].promise);\n        }, []);\n\n        RSVP.all(allSandboxPortPromises).then(function (ports) {\n          Logger.log(\"container: All \" + ports.length + \" ports created.  Transferring them.\");\n          sandbox.adapter.connectPorts(sandbox, ports);\n        })['catch'](RSVP.rethrow);\n      },\n\n      start: function(options) {\n        this.adapter.startSandbox(this, options);\n      },\n\n      terminate: function() {\n        var sandbox = this,\n            channel,\n            environmentPort;\n\n        if( this.isTerminated ) { return; }\n        this.isTerminated = true;\n\n        this.adapter.terminateSandbox(this);\n\n        this.destroyChannels();\n\n        for( var index=0 ; index<sandbox.oasis.services.length ; index++) {\n          sandbox.oasis.services[index].destroy();\n          delete sandbox.oasis.services[index];\n        }\n        sandbox.oasis.services = [];\n      },\n\n      onerror: function(error) {\n        throw error;\n      },\n\n      name: function() {\n        return this.adapter.name(this);\n      },\n\n      // Oasis internal\n\n      _filterCapabilities: function(capabilities) {\n        return uniq.call(this.adapter.filterCapabilities(capabilities));\n      },\n\n      _waitForLoadDeferred: function () {\n        if (!this._loadDeferred) {\n          // the adapter will resolve this\n          this._loadDeferred = RSVP.defer();\n        }\n\n        return this._loadDeferred;\n      }\n    };\n\n\n    return OasisSandbox;\n  });\n/* jscs:enable */\n/*eslint-enable */\n;\n","/*eslint-disable */\n/* jscs:disable */\ndefine(\"oasis/sandbox_init\",\n  [],\n  function() {\n    \"use strict\";\n    function autoInitializeSandbox () {\n      if (typeof window !== 'undefined') {\n        if (/PhantomJS/.test(navigator.userAgent)) {\n          // We don't support phantomjs for several reasons, including\n          //  - window.constructor vs Window\n          //  - postMessage must not have ports (but recall in IE postMessage must\n          //    have ports)\n          //  - because of the above we need to polyfill, but we fail to do so\n          //    because we see MessageChannel in global object\n          //  - we erroneously try to decode the oasis load message; alternatively\n          //    we should just encode the init message\n          //  - all the things we haven't noticed yet\n          return;\n        }\n\n        if (window.parent && window.parent !== window) {\n          Oasis.adapters.iframe.connectSandbox(this);\n        } \n      } else {\n        Oasis.adapters.webworker.connectSandbox(this);\n      }\n    }\n\n\n    return autoInitializeSandbox;\n  });\n/* jscs:enable */\n/*eslint-enable */\n;\n","/*eslint-disable */\n/* jscs:disable */\ndefine(\"oasis/events\",\n  [],\n  function() {\n    \"use strict\";\n    var a_slice = Array.prototype.slice;\n\n    function Events() {\n      this.listenerArrays = {};\n    }\n\n    Events.prototype = {\n      on: function (eventName, listener) {\n        var listeners = this.listenerArrays[eventName] = this.listenerArrays[eventName] || [];\n\n        listeners.push(listener);\n      },\n\n      off: function (eventName, listener) {\n        var listeners = this.listenerArrays[eventName];\n        if (!listeners) { return; }\n\n        for (var i=0; i<listeners.length; ++i) {\n          if (listeners[i] === listener) {\n            listeners.splice(i, 1);\n            break;\n          }\n        }\n      },\n\n      clear: function(eventName) {\n        delete this.listenerArrays[eventName];\n      },\n\n      trigger: function(eventName) {\n        var listeners = this.listenerArrays[eventName];\n        if (!listeners) { return; }\n\n        var args = a_slice.call(arguments, 1);\n\n        for (var i=0; i<listeners.length; ++i) {\n          listeners[i].apply(null, args);\n        }\n      }\n    };\n\n\n    return Events;\n  });\n/* jscs:enable */\n/*eslint-enable */\n;\n","/*eslint-disable */\n/* jscs:disable */\ndefine(\"oasis/service\",\n  [\"oasis/shims\"],\n  function(__dependency1__) {\n    \"use strict\";\n    var o_create = __dependency1__.o_create;\n\n    /**\n      This is a base class that services and consumers can subclass to easily\n      implement a number of events and requests at once.\n\n      Example:\n\n          var MetadataService = Oasis.Service.extend({\n            initialize: function() {\n              this.send('data', this.sandbox.data);\n            },\n\n            events: {\n              changed: function(data) {\n                this.sandbox.data = data;\n              }\n            },\n\n            requests: {\n              valueForProperty: function(name, promise) {\n                promise.resolve(this.sandbox.data[name]);\n              }\n            }\n          });\n\n      In the above example, the metadata service implements the Service\n      API using `initialize`, `events` and `requests`.\n\n      Both services (implemented in the containing environment) and\n      consumers (implemented in the sandbox) use the same API for\n      registering events and requests.\n\n      In the containing environment, a service is registered in the\n      `createSandbox` method. In the sandbox, a consumer is registered\n      using `Oasis.connect`.\n\n      ### `initialize`\n\n      Oasis calls the `initialize` method once the other side of the\n      connection has initialized the connection.\n\n      This method is useful to pass initial data back to the other side\n      of the connection. You can also set up events or requests manually,\n      but you will usually want to use the `events` and `requests` sections\n      for events and requests.\n\n      ### `events`\n\n      The `events` object is a list of event names and associated callbacks.\n      Oasis will automatically set up listeners for each named event, and\n      trigger the callback with the data provided by the other side of the\n      connection.\n\n      ### `requests`\n\n      The `requests` object is a list of request names and associated\n      callbacks. Oasis will automatically set up listeners for requests\n      made by the other side of the connection, and trigger the callback\n      with the request information as well as a promise that you should\n      use to fulfill the request.\n\n      Once you have the information requested, you should call\n      `promise.resolve` with the response data.\n\n      @constructor\n      @param {OasisPort} port\n      @param {OasisSandbox} sandbox in the containing environment, the\n        OasisSandbox that this service is connected to.\n    */\n    function Service (port, sandbox) {\n      var service = this, prop, callback;\n\n      this.sandbox = sandbox;\n      this.port = port;\n\n      function xform(callback) {\n        return function() {\n          return callback.apply(service, arguments);\n        };\n      }\n\n      for (prop in this.events) {\n        callback = this.events[prop];\n        port.on(prop, xform(callback));\n      }\n\n      for (prop in this.requests) {\n        callback = this.requests[prop];\n        port.onRequest(prop, xform(callback));\n      }\n    }\n\n    Service.prototype = {\n      /**\n        This hook is called when the connection is established. When\n        `initialize` is called, it is safe to register listeners and\n        send data to the other side.\n\n        The implementation of Oasis makes it impossible for messages\n        to get dropped on the floor due to timing issues.\n\n        @param {OasisPort} port the port to the other side of the connection\n        @param {String} name the name of the service\n      */\n      initialize: function() {},\n\n\n      /**\n        This hooks is called when an attempt is made to connect to a capability the\n        environment does not provide.\n      */\n      error: function() {},\n\n      /**\n        This hook is called when the connection is stopped. When\n        `destroy` is called, it is safe to unregister listeners.\n      */\n      destroy: function() {},\n\n      /**\n        This method can be used to send events to the other side of the\n        connection.\n\n        @param {String} eventName the name of the event to send to the\n          other side of the connection\n        @param {Structured} data an additional piece of data to include\n          as the data for the event.\n      */\n      send: function() {\n        return this.port.send.apply(this.port, arguments);\n      },\n\n      /**\n        This method can be used to request data from the other side of\n        the connection.\n\n        @param {String} requestName the name of the request to send to\n          the other side of the connection.\n        @return {Promise} a promise that will be resolved by the other\n          side of the connection. Use `.then` to wait for the resolution.\n      */\n      request: function() {\n        return this.port.request.apply(this.port, arguments);\n      }\n    };\n\n    Service.extend = function extend(object) {\n      var superConstructor = this;\n\n      function Service() {\n        if (Service.prototype.init) { Service.prototype.init.call(this); }\n        superConstructor.apply(this, arguments);\n      }\n\n      Service.extend = extend;\n\n      var ServiceProto = Service.prototype = o_create(this.prototype);\n\n      for (var prop in object) {\n        ServiceProto[prop] = object[prop];\n      }\n\n      return Service;\n    };\n\n\n    return Service;\n  });\n/* jscs:enable */\n/*eslint-enable */\n;\n","/*eslint-disable */\n/* jscs:disable */\ndefine(\"oasis/base_adapter\",\n  [\"oasis/util\",\"oasis/shims\",\"oasis/connect\",\"oasis/message_channel\",\"rsvp\",\"oasis/logger\"],\n  function(__dependency1__, __dependency2__, __dependency3__, __dependency4__, RSVP, Logger) {\n    \"use strict\";\n    var mustImplement = __dependency1__.mustImplement;\n    var addEventListener = __dependency2__.addEventListener;\n    var removeEventListener = __dependency2__.removeEventListener;\n    var a_indexOf = __dependency2__.a_indexOf;\n    var a_filter = __dependency2__.a_filter;\n    var connectCapabilities = __dependency3__.connectCapabilities;\n    var PostMessageMessageChannel = __dependency4__.PostMessageMessageChannel;\n\n\n\n    function BaseAdapter() {\n      this._unsupportedCapabilities = [];\n    }\n\n    BaseAdapter.prototype = {\n      initializeSandbox: mustImplement('BaseAdapter', 'initializeSandbox'),\n      name: mustImplement('BaseAdapter', 'name'),\n\n      unsupportedCapabilities: function () {\n        return this._unsupportedCapabilities;\n      },\n\n      addUnsupportedCapability: function (capability) {\n        this._unsupportedCapabilities.push(capability);\n      },\n\n      filterCapabilities: function(capabilities) {\n        var unsupported = this._unsupportedCapabilities;\n        return a_filter.call(capabilities, function (capability) {\n          var index = a_indexOf.call(unsupported, capability);\n          return index === -1;\n        });\n      },\n\n      createChannel: function(oasis) {\n        var channel = new PostMessageMessageChannel(oasis);\n        channel.port1.start();\n        return channel;\n      },\n\n      environmentPort: function(sandbox, channel) {\n        return channel.port1;\n      },\n\n      sandboxPort: function(sandbox, channel) {\n        return channel.port2;\n      },\n\n      proxyPort: function(sandbox, port) {\n        return port;\n      },\n\n      connectSandbox: function (receiver, oasis) {\n        var adapter = this;\n\n        Logger.log(\"Sandbox listening for initialization message\");\n\n        function initializeOasisSandbox(event) {\n          if (!event.data.isOasisInitialization) { return; }\n\n          removeEventListener(receiver, 'message', initializeOasisSandbox);\n          adapter.initializeOasisSandbox(event, oasis);\n        }\n        addEventListener(receiver, 'message', initializeOasisSandbox);\n\n        adapter.oasisLoaded(oasis);\n      },\n\n      initializeOasisSandbox: function (event, oasis) {\n        var adapter = this;\n        oasis.configuration.eventCallback(function () {\n          Logger.log(\"sandbox: received initialization message.\");\n\n          oasis.connectCapabilities(event.data.capabilities, event.ports);\n\n          adapter.didConnect(oasis);\n        });\n      },\n\n      createInitializationMessage: function (sandbox) {\n        return {\n          isOasisInitialization: true,\n          capabilities: sandbox._capabilitiesToConnect,\n        };\n      },\n\n      oasisLoadedMessage: \"oasisSandboxLoaded\",\n      sandboxInitializedMessage:  \"oasisSandboxInitialized\"\n    };\n\n\n    return BaseAdapter;\n  });\n/* jscs:enable */\n/*eslint-enable */\n;\n","/*eslint-disable */\n/* jscs:disable */\ndefine(\"oasis/iframe_adapter\",\n  [\"oasis/util\",\"oasis/shims\",\"rsvp\",\"oasis/logger\",\"oasis/base_adapter\"],\n  function(__dependency1__, __dependency2__, RSVP, Logger, BaseAdapter) {\n    \"use strict\";\n    var assert = __dependency1__.assert;\n    var extend = __dependency1__.extend;\n    var a_forEach = __dependency2__.a_forEach;\n    var addEventListener = __dependency2__.addEventListener;\n    var removeEventListener = __dependency2__.removeEventListener;\n    var a_map = __dependency2__.a_map;\n    /*global Window, UUID */\n\n\n\n    function verifySandbox(oasis, sandboxUrl) {\n      var iframe = document.createElement('iframe'),\n          link;\n\n      if( (oasis.configuration.allowSameOrigin && iframe.sandbox !== undefined) ||\n          (iframe.sandbox === undefined) ) {\n        // The sandbox attribute isn't supported (IE8/9) or we want a child iframe\n        // to access resources from its own domain (youtube iframe),\n        // we need to make sure the sandbox is loaded from a separate domain\n        link = document.createElement('a');\n        link.href = sandboxUrl;\n\n        if( !link.host || (link.protocol === window.location.protocol && link.host === window.location.host) ) {\n          throw new Error(\"Security: iFrames from the same host cannot be sandboxed in older browsers and is disallowed.  \" +\n                          \"For HTML5 browsers supporting the `sandbox` attribute on iframes, you can add the `allow-same-origin` flag\" +\n                          \"only if you host the sandbox on a separate domain.\");\n        }\n      }\n    }\n\n    function verifyCurrentSandboxOrigin(sandbox, event) {\n      var linkOriginal, linkCurrent;\n\n      if (sandbox.firstLoad || sandbox.options.reconnect === \"any\") {\n        return true;\n      }\n\n      if (!sandbox.oasis.configuration.allowSameOrigin || event.origin === \"null\") {\n        fail();\n      } else {\n        linkOriginal = document.createElement('a');\n        linkCurrent = document.createElement('a');\n\n        linkOriginal.href = sandbox.options.url;\n        linkCurrent.href = event.origin;\n\n        if (linkCurrent.protocol === linkOriginal.protocol &&\n            linkCurrent.host === linkOriginal.host) {\n          return true;\n        }\n\n        fail();\n      }\n\n      function fail() {\n        sandbox.onerror(\n          new Error(\"Cannot reconnect null origins unless `reconnect` is set to \" +\n                    \"'any'.  `reconnect: 'verify' requires `allowSameOrigin: \" +\n                    \"true`\"));\n      }\n    }\n\n    function isUrl(s) {\n      var regexp = /(ftp|http|https):\\/\\/(\\w+:{0,1}\\w*@)?(\\S+)(:[0-9]+)?(\\/|\\/([\\w#!:.?+=&%@!\\-\\/]))?/;\n      return regexp.test(s);\n    }\n\n    var IframeAdapter = extend(BaseAdapter, {\n      //-------------------------------------------------------------------------\n      // Environment API\n\n      initializeSandbox: function(sandbox) {\n        var options = sandbox.options,\n            iframe = document.createElement('iframe'),\n            sandboxAttributes = ['allow-scripts'];\n\n\n        //==GLYMPSE==\n        // allow to skip using iframe's sandbox feature for safe content (like journey)\n        var useSandbox = !options || !options.sandbox || !options.sandbox.disabled;\n        if (useSandbox) {\n            if (sandbox.oasis.configuration.allowSameOrigin) {\n                sandboxAttributes.push('allow-same-origin');\n            }\n            if (options && options.sandbox && options.sandbox.popups) {\n                sandboxAttributes.push('allow-popups');\n            }\n        }\n        //==GLYMPSE==\n\n\n        iframe.name = sandbox.options.url + '?uuid=' + UUID.generate();\n\n        //==GLYMPSE==\n        if (useSandbox) iframe.sandbox = sandboxAttributes.join(' ');\n        //==GLYMPSE==\n\n        iframe.seamless = true;\n\n        // rendering-specific code\n        if (options.width) {\n          iframe.width = options.width;\n        } else if (options.height) {\n          iframe.height = options.height;\n        }\n\n        // Error handling inside the iFrame\n        iframe.errorHandler = function(event) {\n          if(!event.data.sandboxException) {return;}\n          try {\n            // verify this message came from the expected sandbox; try/catch\n            // because ie8 will disallow reading contentWindow in the case of\n            // another sandbox's message\n            if( event.source !== iframe.contentWindow ) {return;}\n          } catch(e) {\n            return;\n          }\n\n          sandbox.onerror( event.data.sandboxException );\n        };\n        addEventListener(window, 'message', iframe.errorHandler);\n\n        //==GLYMPSE==\n        if (useSandbox) verifySandbox( sandbox.oasis, sandbox.options.url );\n        //==GLYMPSE==\n\n        iframe.src = sandbox.options.url;\n\n        Logger.log('Initializing sandbox ' + iframe.name);\n\n        // Promise that sandbox has loaded and capabilities connected at least once.\n        // This does not mean that the sandbox will be loaded & connected in the\n        // face of reconnects (eg pages that navigate)\n        sandbox._waitForLoadDeferred().resolve(new RSVP.Promise( function(resolve, reject) {\n          iframe.initializationHandler = function (event) {\n            if( event.data !== sandbox.adapter.sandboxInitializedMessage ) {return;}\n            try {\n              // verify this message came from the expected sandbox; try/catch\n              // because ie8 will disallow reading contentWindow in the case of\n              // another sandbox's message\n              if( event.source !== iframe.contentWindow ) {return;}\n            } catch(e) {\n              return;\n            }\n            removeEventListener(window, 'message', iframe.initializationHandler);\n\n            sandbox.oasis.configuration.eventCallback(function () {\n              Logger.log(\"container: iframe sandbox has initialized (capabilities connected)\");\n              resolve(sandbox);\n            });\n          };\n          addEventListener(window, 'message', iframe.initializationHandler);\n        }));\n\n        sandbox.el = iframe;\n\n        iframe.oasisLoadHandler = function (event) {\n          if( event.data !== sandbox.adapter.oasisLoadedMessage ) {return;}\n          try {\n            // verify this message came from the expected sandbox; try/catch\n            // because ie8 will disallow reading contentWindow in the case of\n            // another sandbox's message\n            if( event.source !== iframe.contentWindow ) {return;}\n          } catch(e) {\n            return;\n          }\n\n          Logger.log(\"container: iframe sandbox has loaded Oasis\");\n\n\n          if (verifyCurrentSandboxOrigin(sandbox, event)) {\n            sandbox.createAndTransferCapabilities();\n          }\n\n          if (sandbox.options.reconnect === \"none\") {\n            removeEventListener(window, 'message', iframe.oasisLoadHandler);\n          }\n        };\n        addEventListener(window, 'message', iframe.oasisLoadHandler);\n      },\n\n      startSandbox: function(sandbox) {\n        var head = document.head || document.documentElement.getElementsByTagName('head')[0];\n        head.appendChild(sandbox.el);\n      },\n\n      terminateSandbox: function(sandbox) {\n        var el = sandbox.el;\n\n        sandbox.terminated = true;\n\n        if (el.loadHandler) {\n          // no load handler for HTML sandboxes\n          removeEventListener(el, 'load', el.loadHandler);\n        }\n        removeEventListener(window, 'message', el.initializationHandler);\n        removeEventListener(window, 'message', el.oasisLoadHandler);\n\n        if (el.parentNode) {\n          Logger.log(\"Terminating sandbox \", sandbox.el.name);\n          el.parentNode.removeChild(el);\n        }\n\n        sandbox.el = null;\n      },\n\n      connectPorts: function(sandbox, ports) {\n        var rawPorts = a_map.call(ports, function(port) { return port.port; }),\n            message = this.createInitializationMessage(sandbox);\n\n        if (sandbox.terminated) { return; }\n        Window.postMessage(sandbox.el.contentWindow, message, '*', rawPorts);\n      },\n\n      //-------------------------------------------------------------------------\n      // Sandbox API\n\n      connectSandbox: function(oasis) {\n        return BaseAdapter.prototype.connectSandbox.call(this, window, oasis);\n      },\n\n      oasisLoaded: function() {\n        window.parent.postMessage(this.oasisLoadedMessage, '*', []);\n      },\n\n      didConnect: function() {\n        window.parent.postMessage(this.sandboxInitializedMessage, '*', []);\n      },\n\n      name: function(sandbox) {\n        return sandbox.el.name;\n      }\n\n    });\n\n\n    return IframeAdapter;\n  });\n/* jscs:enable */\n/*eslint-enable */\n;\n","/*eslint-disable */\n/* jscs:disable */\ndefine(\"oasis/webworker_adapter\",\n  [\"oasis/util\",\"oasis/shims\",\"rsvp\",\"oasis/logger\",\"oasis/base_adapter\"],\n  function(__dependency1__, __dependency2__, RSVP, Logger, BaseAdapter) {\n    \"use strict\";\n    var assert = __dependency1__.assert;\n    var extend = __dependency1__.extend;\n    var a_forEach = __dependency2__.a_forEach;\n    var addEventListener = __dependency2__.addEventListener;\n    var removeEventListener = __dependency2__.removeEventListener;\n    /*global self, postMessage, importScripts, UUID */\n\n\n\n    var WebworkerAdapter = extend(BaseAdapter, {\n      type: 'js',\n\n      //-------------------------------------------------------------------------\n      // Environment API\n\n      initializeSandbox: function(sandbox) {\n        var worker = new Worker(sandbox.options.url);\n        worker.name = sandbox.options.url + '?uuid=' + UUID.generate();\n        sandbox.worker = worker;\n\n        // Error handling inside the worker\n        worker.errorHandler = function(event) {\n          if(!event.data.sandboxException) {return;}\n\n          sandbox.onerror( event.data.sandboxException );\n        };\n        addEventListener(worker, 'message', worker.errorHandler);\n\n        sandbox._waitForLoadDeferred().resolve(new RSVP.Promise( function(resolve, reject) {\n          worker.initializationHandler = function (event) {\n            sandbox.oasis.configuration.eventCallback(function () {\n              if( event.data !== sandbox.adapter.sandboxInitializedMessage ) {return;}\n              removeEventListener(worker, 'message', worker.initializationHandler);\n\n              Logger.log(\"worker sandbox initialized\");\n              resolve(sandbox);\n            });\n          };\n          addEventListener(worker, 'message', worker.initializationHandler);\n        }));\n\n        worker.loadHandler = function (event) {\n          sandbox.oasis.configuration.eventCallback(function () {\n            if( event.data !== sandbox.adapter.oasisLoadedMessage ) {return;}\n            removeEventListener(worker, 'message', worker.loadHandler);\n\n            Logger.log(\"worker sandbox initialized\");\n            sandbox.createAndTransferCapabilities();\n          });\n        };\n        addEventListener(worker, 'message', worker.loadHandler);\n      },\n\n      startSandbox: function(sandbox) { },\n\n      terminateSandbox: function(sandbox) {\n        var worker = sandbox.worker;\n\n        removeEventListener(worker, 'message', worker.loadHandler);\n        removeEventListener(worker, 'message', worker.initializationHandler);\n        sandbox.worker.terminate();\n      },\n\n      connectPorts: function(sandbox, ports) {\n        var rawPorts = ports.map(function(port) { return port.port; }),\n            message = this.createInitializationMessage(sandbox);\n\n        Worker.postMessage(sandbox.worker, message, rawPorts);\n      },\n\n      connectSandbox: function(oasis) {\n        return BaseAdapter.prototype.connectSandbox.call(this, self, oasis);\n      },\n\n      //-------------------------------------------------------------------------\n      // Sandbox API\n\n      name: function(sandbox) {\n        return sandbox.worker.name;\n      },\n\n      oasisLoaded: function() {\n        postMessage(this.oasisLoadedMessage, []);\n      },\n\n      didConnect: function() {\n        postMessage(this.sandboxInitializedMessage, []);\n      }\n    });\n\n\n    return WebworkerAdapter;\n  });\n/* jscs:enable */\n/*eslint-enable */\n;\n","/*eslint-disable */\n/* jscs:disable */\ndefine(\"oasis/inline_adapter\",\n  [\"oasis/util\",\"oasis/config\",\"oasis/shims\",\"oasis/xhr\",\"rsvp\",\"oasis/logger\",\"oasis/base_adapter\"],\n  function(__dependency1__, __dependency2__, __dependency3__, __dependency4__, RSVP, Logger, BaseAdapter) {\n    \"use strict\";\n    var assert = __dependency1__.assert;\n    var extend = __dependency1__.extend;\n    var noop = __dependency1__.noop;\n    var configuration = __dependency2__.configuration;\n    var a_forEach = __dependency3__.a_forEach;\n    var a_map = __dependency3__.a_map;\n    var xhr = __dependency4__.xhr;\n    /*global self, postMessage, importScripts */\n\n\n\n    var InlineAdapter = extend(BaseAdapter, {\n      //-------------------------------------------------------------------------\n      // Environment API\n\n      initializeSandbox: function(sandbox) {\n        sandbox.el = document.createElement('div');\n\n        var oasis = sandbox.sandboxedOasis = new Oasis();\n        sandbox.sandboxedOasis.sandbox = sandbox;\n        RSVP.async(function () {\n          sandbox.createAndTransferCapabilities();\n        });\n      },\n \n      startSandbox: function(sandbox) {\n        var body = document.body || document.documentElement.getElementsByTagName('body')[0];\n        body.appendChild(sandbox.el);\n      },\n\n      terminateSandbox: function(sandbox) {\n        var el = sandbox.el;\n\n        if (el.parentNode) {\n          Logger.log(\"Terminating sandbox \", sandbox.el.name);\n          el.parentNode.removeChild(el);\n        }\n\n        sandbox.el = null;\n      },\n\n      connectPorts: function(sandbox, ports) {\n        var rawPorts = a_map.call(ports, function(oasisPort){ return oasisPort.port; }),\n            message = this.createInitializationMessage(sandbox),\n            event = { data: message, ports: rawPorts };\n\n        // Normally `connectSandbox` is called in autoinitialization, but there\n        // isn't a real sandbox here.\n        this.connectSandbox(sandbox.sandboxedOasis, event);\n      },\n\n      fetchResource: function (url, oasis) {\n        var adapter = this;\n\n        return xhr(url, {\n          dataType: 'text'\n        }, oasis).then(function (code) {\n          return adapter.wrapResource(code);\n        })['catch'](RSVP.rethrow);\n      },\n\n      wrapResource: function (code) {\n        return new Function(\"oasis\", code);\n      },\n\n      //-------------------------------------------------------------------------\n      // Sandbox API\n\n      connectSandbox: function(oasis, pseudoEvent) {\n        return this.initializeOasisSandbox(pseudoEvent, oasis);\n      },\n\n      oasisLoaded: noop,\n\n      didConnect: function(oasis) {\n        var adapter = this;\n\n        return oasis.sandbox._waitForLoadDeferred().resolve(loadSandboxJS()['catch'](RSVP.rethrow));\n\n        function applySandboxJS(sandboxFn) {\n          Logger.log(\"sandbox: inline sandbox initialized\");\n          sandboxFn(oasis);\n          return oasis.sandbox;\n        }\n\n        function loadSandboxJS() {\n          return new RSVP.Promise(function (resolve, reject) {\n            resolve(adapter.fetchResource(oasis.sandbox.options.url, oasis).\n              then(applySandboxJS));\n          });\n        }\n      },\n    });\n\n\n    return InlineAdapter;\n  });\n/* jscs:enable */\n/*eslint-enable */\n;\n","/* jscs:disable */\ndefine('oasis',['require','exports','module','rsvp','oasis/util','oasis/xhr','oasis/connect','oasis/logger','oasis/version','oasis/config','oasis/sandbox','oasis/sandbox_init','oasis/events','oasis/service','oasis/iframe_adapter','oasis/webworker_adapter','oasis/inline_adapter'],function(require, exports, module)\n{\n\t\"use strict\";\n\t\n\trequire('rsvp');\n\t\n\tvar __dependency1__ = require('oasis/util');\n\tvar __dependency2__ = require('oasis/xhr');\n\tvar __dependency3__ = require('oasis/connect');\n\tvar RSVP = window.RSVP;//require('rsvp');\n\tvar logger = require('oasis/logger');\n\tvar Version = require('oasis/version');\n\tvar OasisConfiguration = require('oasis/config');\n\tvar Sandbox = require('oasis/sandbox');\n\tvar autoInitializeSandbox = require('oasis/sandbox_init');\n\tvar Events = require('oasis/events');\n\tvar Service = require('oasis/service');\n\tvar IframeAdapter = require('oasis/iframe_adapter');\n\tvar WebworkerAdapter = require('oasis/webworker_adapter');\n\tvar InlineAdapter = require('oasis/inline_adapter');\n\t\t\n    var assert = __dependency1__.assert;\n    var delegate = __dependency1__.delegate;\n    var xhr = __dependency2__.xhr;\n    var connect = __dependency3__.connect;\n    var connectCapabilities = __dependency3__.connectCapabilities;\n    var portFor = __dependency3__.portFor;\n\n\n\n    function Oasis() {\n      // Data structures used by Oasis when creating sandboxes\n      this.packages = {};\n      this.requestId = 0;\n      this.oasisId = 'oasis' + (+new Date());\n\n      this.consumers = {};\n      this.services = [];\n\n      // Data structures used when connecting to a parent sandbox\n      this.ports = {};\n      this.handlers = {};\n\n      this.receivedPorts = false;\n\n      this.configuration = new OasisConfiguration();\n      this.events = new Events();\n\n      this.didCreate();\n    }\n\n    Oasis.Version = Version;\n    Oasis.Service = Oasis.Consumer = Service;\n    Oasis.RSVP = RSVP;\n\n    Oasis.reset = function () {\n      Oasis.adapters = {\n        iframe: new IframeAdapter(),\n        webworker: new WebworkerAdapter(),\n        inline: new InlineAdapter()\n      };\n    };\n\n    Oasis.reset();\n\n    Oasis.prototype = {\n      logger: logger,\n      log: function () {\n        this.logger.log.apply(this.logger, arguments);\n      },\n\n      on: delegate('events', 'on'),\n      off: delegate('events', 'off'),\n      trigger: delegate('events', 'trigger'),\n\n      didCreate: function() {},\n\n      xhr: xhr,\n\n      /**\n        This is the entry point that allows the containing environment to create a\n        child sandbox.\n\n        Options:\n\n        * `capabilities`: an array of registered services\n        * `url`: a registered URL to a JavaScript file that will initialize the\n          sandbox in the sandboxed environment\n        * `adapter`: a reference to an adapter that will handle the lifecycle\n          of the sandbox. Right now, there are iframe and web worker adapters.\n\n        @param {Object} options\n      */\n      createSandbox: function (options) {\n        return new Sandbox(this, options);\n      },\n\n      /**\n        This registers a sandbox type inside of the containing environment so that\n        it can be referenced by URL in `createSandbox`.\n\n        Options:\n\n        * `capabilities`: An array of service names that will be supplied when calling\n          `createSandbox`\n        * `url`: The URL of the JavaScript file that contains the sandbox code\n\n        @param {Object} options\n      */\n      register: function (options) {\n        assert(options.capabilities, \"You are trying to register a package without any capabilities. Please provide a list of requested capabilities, or an empty array ([]).\");\n\n        this.packages[options.url] = options;\n      },\n\n      configure: function(name, value) { this.configuration[name] = value; },\n      autoInitializeSandbox: autoInitializeSandbox,\n\n      connect: connect,\n      connectCapabilities: connectCapabilities,\n      portFor: portFor\n    };\n\n    module.exports = Oasis;\n  });\n/* jscs:enable */\n;\n","// Auto-generated content during a grunt build\n//\n// ---> 'id' and 'version' are pulled from Gruntfile.js\n// ---> Please review grunt/replace.js for adding additional\n//      dynamic fields, or changing existing content\n//\ndefine('glympse-adapter/VersionInfo',['require','exports','module'],function(require, exports, module)\n{\n    'use strict';\n\n\tmodule.exports =\n\t{\n\t\tid: 'glympse-adapter',\n\t\tversion: '2.12.1',\n\t\tbuildDate: '2018-05-17 08:43:51 UTC'\n\t};\n});\n\n","// App entry point\ndefine('glympse-adapter/GlympseAdapterDefines',['require','exports','module'],function(require, exports, module)\n{\n    'use strict';\n\n\tvar Defines =\n\t{\n\t\t  PORT: 'glympse'\n\n\t\t, MAP: {\n\n\t\t\t/////////////////////////////////////////\n\t\t\t// API Endpoints - host and client\n\t\t\t/////////////////////////////////////////\n\n\t\t\tREQUESTS: {\n\t\t\t\t  addInvites: 'addInvites'\n\t\t\t\t, addGroups: 'addGroups'\n\t\t\t\t, addMarkers: 'addMarkers'\n\t\t\t\t, addTwitterTopics: 'addTwitterTopics'\n\t\t\t\t, addTwitterUsers: 'addTwitterUsers'\n\t\t\t\t, refreshView: 'refreshView'\n\t\t\t\t, removeInvites: 'removeInvites'\n\t\t\t\t, setApiServices: 'setApiServices'\n\t\t\t\t, setPadding: 'setPadding'\n\t\t\t\t, setUserInfo: 'setUserInfo'\t// Send-only... break it out?\n\t\t\t\t, updateSetting: 'updateSetting'\n\t\t\t}\n\n\n\t\t\t/////////////////////////////////////////\n\t\t\t// API Endpoints: client-only\n\t\t\t/////////////////////////////////////////\n\n\t\t\t, REQUESTS_LOCAL: {\n\t\t\t\t  getInvites: 'getInvites'\n\t\t\t\t, getMap: 'getMap'\n\t\t\t\t, getMapContainer: 'getMapContainer'\n\t\t\t\t, generateRoute: 'generateRoute'\n\t\t\t\t, ignoreDestinations: 'ignoreDestinations'\n\t\t\t}\n\t\t}\n\n\t\t, CARDS: {\n\n\t\t\t/////////////////////////////////////////\n\t\t\t// API Endpoints - host and client\n\t\t\t/////////////////////////////////////////\n\n\t\t\tREQUESTS: {\n\t\t\t\trequestCards: 'requestCards'\n\t\t\t\t, request: 'request'\n\t\t\t\t, joinRequest: 'joinRequest'\n\t\t\t\t, joinRequestCancel: 'joinRequestCancel'\n\t\t\t\t, getActiveJoinRequests: 'getActiveJoinRequests'\n\t\t\t\t, removeMember: 'removeMember'\n\t\t\t\t, activity: 'activity'\n\t\t\t\t//  addInvites: 'addInvites'\n\t\t\t\t//, getInvites: 'getInvites'\n\t\t\t\t//, removeInvites: 'removeInvites'\n\t\t\t\t//, setServices: 'setServices'\n\t\t\t\t//, updateSetting: 'updateSetting'\n\t\t\t}\n\n\n\t\t\t/////////////////////////////////////////\n\t\t\t// API Endpoints: client-only\n\t\t\t/////////////////////////////////////////\n\n\t\t\t, REQUESTS_LOCAL: {\n\t\t\t\tgetCards: 'getCards'\n\t\t\t}\n\n\t\t\t/////////////////////////////////////////\n\t\t\t// API Endpoints: client-only\n\t\t\t/////////////////////////////////////////\n\n\t\t\t, REQUEST_TYPES: {\n\t\t\t\tLINK: 'link'\n\t\t\t\t, CLIPBOARD: 'clipboard'\n\t\t\t\t, SMS: 'sms'\n\t\t\t\t, EMAIL: 'email'\n\t\t\t\t, ACCOUNT: 'account'\n\t\t\t}\n\t\t}\n\n\t\t, CORE: {\n\n\t\t\t/////////////////////////////////////////\n\t\t\t// API Endpoints - host and client\n\t\t\t/////////////////////////////////////////\n\n\t\t\tREQUESTS: {\n\t\t\t\taddGroup: 'addGroup'\n\t\t\t\t, getGroups: 'getGroups'\n\t\t\t\t, removeGroup: 'removeGroup'\n\t\t\t\t, getOrgObjects: 'getOrgObjects'\n\t\t\t\t, getEtaInfo: 'getEtaInfo'\n\t\t\t}\n\n\n\t\t\t/////////////////////////////////////////\n\t\t\t// API Endpoints: client-only\n\t\t\t/////////////////////////////////////////\n\n\t\t\t, REQUESTS_LOCAL: {\n\t\t\t\taccountCreate: 'accountCreate'\n\t\t\t\t, accountDelete: 'accountDelete'\n\t\t\t\t, generateAuthToken: 'generateAuthToken'\n\t\t\t\t, getUserInfo: 'getUserInfo'\n\t\t\t\t, setUserName: 'setUserName'\n\t\t\t\t, setUserAvatar: 'setUserAvatar'\n\t\t\t\t, hasAccount: 'hasAccount'\n\t\t\t\t, createRequest: 'createRequest'\n\t\t\t}\n\t\t}\n\n\n\t\t/////////////////////////////////////////\n\t\t// Notification messages\n\t\t/////////////////////////////////////////\n\n\t\t, MSG: {\n\t\t\t//Account Events\n\t\t\t  AccountCreateStatus: 'AccountCreateStatus'\n\t\t\t, AccountDeleteStatus: 'AccountDeleteStatus'\n\t\t    , AccountLoginStatus: 'AccountLoginStatus'\n\t\t\t, UserNameUpdateStatus: 'UserNameUpdateStatus'\n\t\t\t, UserAvatarUpdateStatus: 'UserAvatarUpdateStatus'\n\t\t\t, UserInfoStatus: 'UserInfoStatus'\n\t\t\t, CreateRequestStatus: 'CreateRequestStatus'\n\n\t\t    , AdapterInit: 'AdapterInit'\n\t\t\t, AdapterReady: 'AdapterReady'\n\n\t\t\t//Card events\n\t\t\t, CardInit: 'CardInit'\n\t\t\t, CardReady: 'CardReady'\n\t\t\t, CardsInitEnd: 'CardsInitEnd'\n\t\t\t, CardsInitStart: 'CardsInitStart'\n\t\t\t, CardUpdated: 'CardUpdated'\n\t\t\t, CardAdded: 'CardAdded'\n\t\t\t, CardRemoved: 'CardRemoved'\n\t\t\t, CardsRequestStatus: 'CardsRequestStatus'\n\t\t\t, CardsJoinRequestStatus: 'CardsJoinRequestStatus'\n\t\t\t, CardsJoinRequestCancelStatus: 'CardsJoinRequestCancelStatus'\n\t\t\t, CardActivityStatus: 'CardActivityStatus'\n\t\t\t, CardsActiveJoinRequestsStatus: 'CardsActiveJoinRequestsStatus'\n\t\t\t, CardRemoveMemberStatus: 'CardRemoveMemberStatus'\n\t\t\t, CardsLocationRequestStatus: 'CardsLocationRequestStatus'\n\n\t\t\t// Public group events\n\t\t\t, GroupLoaded: 'GroupLoaded'\n\t\t\t, GroupStatus: 'GroupStatus'\n\t\t\t, OrgObjects: 'OrgObjects'\n\n\t\t\t, EtaInfo: 'EtaInfo'\n\n\t\t\t, DataUpdate: 'DataUpdate'\n\t\t\t, InviteAdded: 'InviteAdded'\n\t\t\t, InviteClicked: 'InviteClicked'\n\t\t\t, InviteError: 'InviteError'\n\t\t\t, InviteInit: 'InviteInit'\n\t\t\t, InviteReady: 'InviteReady'\n\t\t\t, InviteRemoved: 'InviteRemoved'\n\t\t\t, OauthError: 'OauthError'\n\t\t\t, Progress: 'Progress'\n\t\t\t, StateUpdate: 'StateUpdate'\n\t\t\t, ViewerInit: 'ViewerInit'\n\t\t\t, ViewerReady: 'ViewerReady'\n\t\t\t, ViewerZoomChanged: 'ViewerZoomChanged'\n\t\t}\n\n\n\t\t///////////////////////////////////////////////////\n\t\t// State updates -- probably will move/remove\n\t\t///////////////////////////////////////////////////\n\n\t\t, STATE: {\n\t\t\t// Known data stream properties\n\t\t\t  Avatar: 'avatar'\n\t\t\t, Destination: 'destination'\n\t\t\t, Eta: 'eta'\n\t\t\t, InviteEnd: 'end_time'\n\t\t\t, InviteCompleted: 'completed'\n\t\t\t, InviteStart: 'start_time'\n\t\t\t, Message: 'message'\n\t\t\t, Name: 'name'\n\t\t\t, Owner: 'owner'\n\t\t\t, Phase: 'phase'\n\n\t\t\t// Additional meta-data state\n\t\t\t, Arrived: 'Arrived'\t// needed?\n\t\t\t, Expired: 'Expired'\n\t\t\t, NoInvites: 'NoInvites'\n\t\t\t, App: 'app'\n\t\t}\n\t};\n\n\n\t// Global namespace registration\n\t(function(w) {\n\t\tvar g = w.glympse || {};\n\t\t/* eslint-disable no-unused-expressions */\n\t\tg.broadcastTypes || (g.broadcastTypes = {\n\t\t\t\t\t\t\t\tDATA: 'DATA',\n\t\t\t\t\t\t\t\tETA: 'ETA',\n\t\t\t\t\t\t\t\tINVITE_STATUS: 'INVITE_STATUS',\n\t\t\t\t\t\t\t\tZOOM: 'ZOOM'\n\t\t\t\t\t\t\t});\n\t\tg.GlympseAdapterDefines || (g.GlympseAdapterDefines = Defines);\n\t\t/* eslint-enable no-unused-expressions */\n\n\t\tw.glympse = g;\n\t})(window);\n\n\n\tmodule.exports = Defines;\n});\n\n","define('glympse-adapter/lib/rafUtils',['require','exports','module'],function(require, exports, module)\n{\n\tvar w = window;\n\tvar g = w.glympse;\n\tvar glib = (g && g.lib);\n\tvar initted = false;\n\n\tvar performance = w.performance;\n\n\t/**\n\t * Emulate window.setTimeout via RAF, if available. Polyfills to\n\t * regular window.setTimeout if RAF is not available. Assumes RAF\n\t * has already been polyfilled as necessary.\n\t * @param   {function} fn    Callback with timeout is complete\n\t * @param   {number}   delay Delay, in milliseconds\n\t * @returns {object}   Timeout handle\n\t */\n\tfunction rafSetTimeout(fn, delay)\n\t{\n\t\tif (!initted)\n\t\t{\n\t\t\tinitted = true;\n\t\t\tvar syncRaf = (glib && glib.syncRAF);\t// FIXME: Should centralize syncRAF here as well?\n\t\t\tif (syncRaf)\n\t\t\t{\n\t\t\t\tsyncRaf();\n\t\t\t}\n\t\t}\n\n\t\tvar raf = w.requestAnimationFrame;\n\t\tif (!raf || !w.cancelAnimationFrame)\n\t\t{\n\t\t\treturn w.setTimeout(fn, delay);\n\t\t}\n\n\t\tvar handle = {};\n\t\tvar targetTime = ((performance && performance.now()) || new Date().getTime()) + delay;\n\n\t\tfunction run(ctime)\n\t\t{\n\t\t\tif (handle.cancel)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!performance)\n\t\t\t{\n\t\t\t\tctime = new Date().getTime();\n\t\t\t}\n\n\t\t\tif (ctime >= targetTime)\n\t\t\t{\n\t\t\t\tfn.call();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\thandle.raf = raf(run);\n\t\t}\n\n\t\thandle.raf = raf(run);\n\t\treturn handle;\n\t}\n\n\t/**\n\t * Emulate window.clearTimeout via RAF, if available. Polyfills to\n\t * regular window.clearTimeout if RAF is not available. Assumes RAF has\n\t * already been polyfilled as necessary.\n\t * @param {object} handle Handle returned from window.requestAnimationFrame\n\t */\n\tfunction rafClearTimeout(handle)\n\t{\n\t\tif (handle && handle.raf)\n\t\t{\n\t\t\thandle.cancel = true;\n\t\t\tw.cancelAnimationFrame(handle.raf);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tw.clearTimeout(handle);\n\t\t}\n\t}\n\n\t/**\n\t * Emulate window.setInterval via RAF, if available. Polyfills to\n\t * regular window.setInterval if RAF is not available. Assumes RAF\n\t * has already been polyfilled as necessary.\n\t * @param   {function} fn    Callback with time interval is complete\n\t * @param   {number}   delay Delay, in milliseconds\n\t * @returns {object}   Timeout handle\n\t */\n\tfunction rafSetInterval(fn, delay, handle)\n\t{\n\t\tif (!initted)\n\t\t{\n\t\t\tinitted = true;\n\t\t\tvar syncRaf = (glib && glib.syncRAF);\n\t\t\tif (syncRaf)\n\t\t\t{\n\t\t\t\tsyncRaf();\n\t\t\t}\n\t\t}\n\n\t\tvar raf = w.requestAnimationFrame;\n\t\tif (!raf || !w.cancelAnimationFrame)\n\t\t{\n\t\t\treturn w.setInterval(fn, delay);\n\t\t}\n\n\t\tvar targetTime = ((performance && performance.now()) || new Date().getTime()) + delay;\n\n\t\thandle = handle || {};\t// Update previous reference\n\n\t\tfunction run(ctime)\n\t\t{\n\t\t\tif (handle.cancel)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (ctime >= targetTime)\n\t\t\t{\n\t\t\t\tfn.call();\n\t\t\t\trafSetInterval(fn, delay, handle);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\thandle.raf = raf(run);\n\t\t}\n\n\t\thandle.raf = raf(run);\n\t\treturn handle;\n\t}\n\n\t/**\n\t * Emulate window.clearInterval via RAF, if available. Polyfills to\n\t * default window.clearInterval if RAF is not available. Assumes RAF has\n\t * already been polyfilled as necessary.\n\t * @param {object} handle Handle returned from window.rafInterval\n\t */\n\tfunction rafClearInterval(handle)\n\t{\n\t\tif (handle && handle.raf)\n\t\t{\n\t\t\thandle.cancel = true;\n\t\t\tw.cancelAnimationFrame(handle.raf);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tw.clearInterval(handle);\n\t\t}\n\t}\n\n\tmodule.exports = {\n\t\tsetTimeout: rafSetTimeout,\n\t\tclearTimeout: rafClearTimeout,\n\t\tsetInterval: rafSetInterval,\n\t\tclearInterval: rafClearInterval\n\t};\n});\n\n","define('glympse-adapter/adapter/ViewerMonitor',['require','exports','module','glympse-adapter/GlympseAdapterDefines','glympse-adapter/lib/utils','glympse-adapter/lib/rafUtils'],function(require, exports, module)\n{\n    'use strict';\n\n\t// defines\n\tvar Defines = require('glympse-adapter/GlympseAdapterDefines');\n\tvar lib = require('glympse-adapter/lib/utils');\n\tvar raf = require('glympse-adapter/lib/rafUtils');\n\tvar m = Defines.MSG;\n\tvar s = Defines.STATE;\n\tvar r = Defines.MAP.REQUESTS;\n\n\tvar cEtaVal = 'eta';\n\tvar cEtaTime = 'eta_ts';\n\n\t// Exported class\n\tfunction MapController(controller, cfg)\n\t{\n\t\t// consts\n\t\tvar glyEvents = window.glympse.events;\n\t\tvar propMap = [ s.Avatar\n\t\t\t\t\t  , s.Destination\n\t\t\t\t\t  , s.InviteStart\n\t\t\t\t\t  , s.InviteEnd\n\t\t\t\t\t  , s.Eta\n\t\t\t\t\t  , s.Message\n\t\t\t\t\t  , s.Name\n\t\t\t\t\t  , s.Phase\n\t\t\t\t\t  , s.Expired\n\t\t\t\t\t  , s.App\n\t\t\t\t\t  ];\t// Known/tracked properties\n\n\t\t// state\n\t\tvar viewerApp;\n\t\tvar viewerElement;\n\n\t\tvar that = this;\n\t\tvar cmdQueue = [];\n\t\tvar props = {};\n\n\t\tvar dbg = lib.dbg('MapController', cfg.dbg);\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// PROPERTIES\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\t\t//this.getViewer = function()\n\t\t//{\n\t\t//\treturn viewerApp;\n\t\t//};\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// PUBLICS\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\t\tthis.run = function()\n\t\t{\n\t\t\tif (!cfg.viewer)\n\t\t\t{\n\t\t\t\tdbg('No viewer set. Aborting...');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Set up handlers\n\t\t\tviewerElement = cfg.viewer;\n\t\t\tviewerElement.addEventListener(glyEvents.INIT, viewerInit, false);\n\t\t\tviewerElement.addEventListener(glyEvents.READY, viewerReady, false);\n\t\t\tviewerElement.addEventListener(glyEvents.DATA, viewerData, false);\n\t\t\tviewerElement.addEventListener(glyEvents.PROPERTIES, viewerData, false);\n\t\t\tviewerElement.addEventListener(glyEvents.ETA, viewerEta, false);\n\t\t\tviewerElement.addEventListener(glyEvents.INVITE_ADDED, viewerInviteAdded, false);\n\t\t\tviewerElement.addEventListener(glyEvents.INVITE_REMOVED, viewerInviteRemoved, false);\n\t\t\tviewerElement.addEventListener(glyEvents.INVITE_CLICKED, viewerInviteClicked, false);\n\t\t\tviewerElement.addEventListener(glyEvents.INVITE_ERROR, viewerInviteError, false);\n\t\t\tviewerElement.addEventListener(glyEvents.OAUTH_TOKEN_ERROR, viewerOauthTokenError, false);\n\t\t\tviewerElement.addEventListener(glyEvents.ZOOM_CHANGED, viewerZoomChanged, false);\n\t\t};\n\n\t\tthis.shutdown = function()\n\t\t{\n\t\t\tviewerElement.removeEventListener(glyEvents.DATA, viewerData, false);\n\t\t\tviewerElement.removeEventListener(glyEvents.PROPERTIES, viewerData, false);\n\t\t\tviewerElement.removeEventListener(glyEvents.ETA, viewerEta, false);\n\t\t};\n\n\t\tthis.getCurrentProperties = function(idInvite)\n\t\t{\n\t\t\tidInvite = (idInvite && lib.simplifyInvite(idInvite));\n\n\t\t\t// Allow for simpler property-bag retrieval if only\n\t\t\t// tracking one invite\n\t\t\tif (!idInvite)\n\t\t\t{\n\t\t\t\tfor (idInvite in props)\n\t\t\t\t{\n\t\t\t\t\tif (idInvite)\n\t\t\t\t\t{\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (props.hasOwnProperty(idInvite))\n\t\t\t{\n\t\t\t\treturn props[idInvite];\n\t\t\t}\n\n\t\t\treturn 'Unknown invite \"' + idInvite + '\"';\n\t\t};\n\n\t\tthis.getCurrentValue = function(idProperty, idInvite)\n\t\t{\n\t\t\tvar prop = this.getCurrentProperties(idInvite);\n\n\t\t\tif (typeof prop === 'string')\n\t\t\t{\n\t\t\t\treturn prop;\n\t\t\t}\n\n\t\t\tif (idProperty && prop.hasOwnProperty(idProperty))\n\t\t\t{\n\t\t\t\treturn prop[idProperty];\n\t\t\t}\n\n\t\t\treturn 'Unknown property id \"' + idProperty + '\" for invite \"' + idInvite + '\"';\n\t\t};\n\n\t\tthis.cmd = function(cmd, args)\n\t\t{\n\t\t\t//dbg('cmd = ' + cmd + ', args', args);\n\n\t\t\tif (!viewerApp)\n\t\t\t{\n\t\t\t\tcmdQueue.push({ cmd: cmd, args: args });\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tswitch (cmd)\n\t\t\t{\n\t\t\t\tcase MapController.GetInviteProperties:\n\t\t\t\t{\n\t\t\t\t\treturn this.getCurrentProperties(args);\n\t\t\t\t}\n\n\t\t\t\tcase MapController.GetInviteProperty:\n\t\t\t\t{\n\t\t\t\t\t// args = { idProperty: name_of_property_to_retrieve\n\t\t\t\t\t//\t\t  , idInvite:   glympse_invite_id --> can be null if first invite is targetted\n\t\t\t\t\t//\t\t  }\n\t\t\t\t\treturn this.getCurrentValue(args.idProperty, args.idInvite);\n\t\t\t\t}\n\n\t\t\t\tcase r.setPadding:\n\t\t\t\t{\n\t\t\t\t\tif (!(args instanceof Array))\n\t\t\t\t\t{\n\t\t\t\t\t\tif (typeof args === 'number')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// Replicate old paddingLeft semantics for now\n\t\t\t\t\t\t\targs = [ null, null, null, args ];\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn 'Invalid paddingArray type!';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tdefault:\n\t\t\t\t{\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn viewerApp[cmd](args);\n\t\t};\n\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////////\n\t\t// EVENT HANDLERS\n\t\t///////////////////////////////////////////////////////////////////////////////////\n\n\t\tfunction viewerInit(e)\n\t\t{\n\t\t\t//dbg('**** VIEWER INIT **** - viewerApp=' + e.detail.app);\n\t\t\tviewerElement.removeEventListener(glyEvents.INIT, viewerInit, false);\n\t\t\tcontroller.notify(m.ViewerInit, true);\n\t\t}\n\n\t\tfunction viewerReady(e)\n\t\t{\n\t\t\t//dbg('!!!!!!!! READY !!!!!!!!');\n\t\t\tviewerElement.removeEventListener(glyEvents.READY, viewerReady, false);\n\n\t\t\tviewerApp = e.detail.app;\n\t\t\tif (!viewerApp)\n\t\t\t{\n\t\t\t\tdbg('Error getting viewer. Aborting!');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Process any queued commands issued before VIEWER_READY fired\n\t\t\tfor (var i = 0; i < cmdQueue.length; i++)\n\t\t\t{\n\t\t\t\tvar o = cmdQueue[i];\n\t\t\t\tthat.cmd(o.cmd, o.args);\n\t\t\t}\n\n\t\t\tcontroller.notify(m.ViewerReady, viewerApp);\n\n\t\t\t// Notify if no invites found\n\t\t\tvar invites = viewerApp.getInvites();\n\t\t\tif (!invites || invites.length === 0)\n\t\t\t{\n\t\t\t\tcontroller.infoUpdate(s.NoInvites, null, null, new Date().getTime(), true);\n\t\t\t}\n\t\t}\n\n\t\tfunction viewerData(e)\n\t\t{\n\t\t\tvar detail = e.detail;\n\t\t\tvar idInvite = (detail.id && lib.simplifyInvite(detail.id));\n\t\t\tvar data = [];\n\t\t\tvar ddata = detail.data || [];\n\t\t\tvar owner = detail.owner;\n\t\t\tvar i, ilen, iprop, ipropName, ipropIndex;\n\n\t\t\tvar newProps = [];\n\t\t\tfor (i = 0, ilen = ddata.length; i < ilen; i++)\n\t\t\t{\n\t\t\t\tiprop = ddata[i];\n\t\t\t\tipropName = iprop.n;\n\t\t\t\tipropIndex = newProps.indexOf(ipropName);\n\n\t\t\t\tif (ipropIndex !== -1)\n\t\t\t\t{\n\t\t\t\t\tnewProps.splice(ipropIndex, 1);\n\t\t\t\t\tdata.splice(ipropIndex, 1);\n\t\t\t\t\tdbg('> Cleaned-up outdated prop:' + ipropName);\n\t\t\t\t}\n\n\t\t\t\tnewProps.push(ipropName);\n\t\t\t\tdata.push($.extend({}, ddata[i]));\n\t\t\t}\n\n\t\t\tvar unknowns = [];\t// Unknown properties that are passed along\n\n\t\t\tif (!props[idInvite])\n\t\t\t{\n\t\t\t\tprops[idInvite] = { _timer: 0 };\n\t\t\t\t//console.log('New props for ' + idInvite);\n\t\t\t}\n\n\t\t\tvar prop = props[idInvite];\n\n\t\t\t//console.log('DATA: ' + JSON.stringify(detail, null, '  '));\n\n\t\t\tfor (i = 0, ilen = data.length; i < ilen; i++)\n\t\t\t{\n\t\t\t\tvar val = data[i];\n\t\t\t\tvar v = val.v;\n\t\t\t\tvar n = val.n;\n\t\t\t\tvar t = val.t;\n\t\t\t\tvar found = false;\n\n\t\t\t\tfor (var j = 0, jlen = propMap.length; j < jlen; j++)\n\t\t\t\t{\n\t\t\t\t\tvar id = propMap[j];\n\n\t\t\t\t\tif (n === id)\n\t\t\t\t\t{\n\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\tif (prop[id] !== v)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tval.n = undefined;\n\t\t\t\t\t\t\tprop[id] = val;\n\n\t\t\t\t\t\t\t// Viewer sets non-cloneable lat/lng vals when using gmaps\n\t\t\t\t\t\t\t// FIXME: Fixable in the viewer instead?\n\t\t\t\t\t\t\tif (id === s.Destination)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tv.lat = (typeof v.lat === 'function') ? v.lat() : v.lat;\n\t\t\t\t\t\t\t\tv.lng = (typeof v.lng === 'function') ? v.lng() : v.lng;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t//dbg('id=' + id + ', v', v);\n\t\t\t\t\t\t\tcontroller.infoUpdate(id, idInvite, owner, t, v);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Check for additional processing\n\t\t\t\tif (n === s.InviteEnd)\n\t\t\t\t{\n\t\t\t\t\tnotifyExpired(idInvite, owner);\n\t\t\t\t}\n\n\t\t\t\tif (!found)\n\t\t\t\t{\n\t\t\t\t\tunknowns.push(val);\n\t\t\t\t\tval = $.extend({}, val);\n\t\t\t\t\tval.n = undefined;\n\t\t\t\t\tprop[n] = val;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (unknowns.length > 0)\n\t\t\t{\n\t\t\t\tdetail.data = unknowns;\n\t\t\t\tcontroller.notify(m.DataUpdate, detail);\n\t\t\t}\n\n\t\t\t//dbg('>>>> props[\"' + idInvite + '\"]', prop);\n\t\t}\n\n\t\tfunction viewerEta(e)\n\t\t{\n\t\t\tvar d = e.detail;\n\t\t\tvar t = new Date().getTime();\n\t\t\tvar idProp = s.Eta;\n\t\t\tvar id = lib.simplifyInvite(d.id);\n\t\t\tvar prop = props[id];\n\t\t\tvar val = prop[idProp];\n\n\t\t\tif (!val)\n\t\t\t{\n\t\t\t\tval = {};\n\t\t\t\tprop[idProp] = val;\n\t\t\t}\n\n\t\t\tval[cEtaVal] = d.data * 1000;\n\t\t\tval[cEtaTime] = t;\n\n\t\t\tcontroller.infoUpdate(idProp, id, d.owner, t, val);\n\t\t}\n\n\t\tfunction viewerInviteAdded(e)\n\t\t{\n\t\t\t//dbg('InviteAdded', e.detail);\n\t\t\te.detail.data = undefined;\n\t\t\tcontroller.notify(m.InviteAdded, e.detail);\n\t\t}\n\n\t\tfunction viewerInviteRemoved(e)\n\t\t{\n\t\t\tvar detail = (e && e.detail) || {};\n\t\t\t//dbg('InviteRemoved', detail);\n\t\t\tvar id = detail.id;\n\t\t\tif (id)\n\t\t\t{\n\t\t\t\tvar prop = props[id];\n\t\t\t\tif (prop && prop._timer)\n\t\t\t\t{\n\t\t\t\t\traf.clearTimeout(prop._timer);\n\t\t\t\t}\n\n\t\t\t\tdelete props[id]\n\t\t\t}\n\n\t\t\tdetail.data = undefined;\n\t\t\tcontroller.notify(m.InviteRemoved, detail);\n\t\t}\n\n\t\tfunction viewerInviteClicked(e)\n\t\t{\n\t\t\t//dbg('InviteClicked', e.detail);\n\t\t\te.detail.data = undefined;\n\t\t\tcontroller.notify(m.InviteClicked, e.detail);\n\t\t}\n\n\t\tfunction viewerInviteError(e)\n\t\t{\n\t\t\tcontroller.notify(m.InviteError, e.detail);\n\t\t}\n\n\t\tfunction viewerOauthTokenError(e)\n\t\t{\n\t\t\tcontroller.notify(m.OauthError, e.detail);\n\t\t}\n\n\t\tfunction viewerZoomChanged(e)\n\t\t{\n\t\t\tcontroller.notify(m.ViewerZoomChanged, e.detail);\n\t\t}\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////////\n\t\t// INTERNAL\n\t\t///////////////////////////////////////////////////////////////////////////////////\n\n\t\tfunction notifyExpired(idInvite, owner)\n\t\t{\n\t\t\tvar prop = props[idInvite];\n\n\t\t\tif (!prop)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (prop._timer)\n\t\t\t{\n\t\t\t\traf.clearTimeout(prop._timer);\n\t\t\t\tprop._timer = 0;\n\t\t\t}\n\n\t\t\tvar t = new Date().getTime();\n\t\t\tvar stateExpired = s.Expired.toLowerCase();\n\t\t\tvar endTime = prop[s.InviteEnd].v;\n\t\t\tvar propExpired = prop[stateExpired];\n\t\t\tvar expired = (t >= endTime);\n\n\t\t\tif (!propExpired)\n\t\t\t{\n\t\t\t\tpropExpired = { t: t, v: expired };\n\t\t\t\tprop[stateExpired] = propExpired;\n\t\t\t}\n\n\t\t\tpropExpired.v = expired;\n\n\t\t\tif (expired)\n\t\t\t{\n\t\t\t\tcontroller.infoUpdate(s.Expired, idInvite, owner, t, expired);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// If not immediately expired, set up a timer for when it should,\n\t\t\t// in case we don't get another expired update\n\t\t\tprop._timer = raf.setTimeout(function()\n\t\t\t{\n\t\t\t\tnotifyExpired(idInvite, owner);\n\t\t\t}\n\t\t\t, (endTime - t + 1000));\n\t\t}\n\t}\n\n\tMapController.GetInviteProperties = 'getInviteProperties';\n\tMapController.GetInviteProperty = 'getInviteProperty';\n\n\n\tmodule.exports = MapController;\n});\n\n","///////////////////////////////////////////////////////////////////////////////\n// AJAX requests utilities\n///////////////////////////////////////////////////////////////////////////////\n\ndefine('glympse-adapter/lib/ajax',['require','exports','module','glympse-adapter/lib/utils'],function(require, exports, module)\n{\n\t'use strict';\n\n\tvar lib = require('glympse-adapter/lib/utils');\n\n\tvar MAX_ATTEMPTS = 3;\n\tvar DEFAULT_OPTIONS = {\n\t\tALL: { dataType: 'json' },\n\t\tPOST: { contentType: 'application/json' }\n\t};\n\n\tfunction addAuthData(authHeaderPrefix, authToken, opts)\n\t{\n\t\tif (authHeaderPrefix)\n\t\t{\n\t\t\topts.headers.Authorization = authHeaderPrefix + authToken;\n\t\t}\n\t\telse\n\t\t{\n\t\t\topts.url += ((opts.url.indexOf('?') < 0) ? '?' : '&') + 'oauth_token=' + authToken;\n\t\t}\n\t}\n\n\tfunction parseResponse(data)\n\t{\n\t\tvar result = null;\n\n\t\tif (data && (data.response || data.body))\n\t\t{\n\t\t\tresult = { status: false, response: {} };\n\n\t\t\tif (data.result === 'ok')\n\t\t\t{\n\t\t\t\tresult.status = true;\n\t\t\t\tresult.response = (data.response || data.body);\n\t\t\t\tresult.time = data.meta && data.meta.time;\n\t\t\t}\n\n\t\t\tif (data.result === 'failure')\n\t\t\t{\n\t\t\t\tvar meta = data.meta || {};\n\n\t\t\t\tresult.response = meta;\n\t\t\t\t// check if we need them, left for now for backward compatibility\n\t\t\t\tresult.error = meta.error;\n\t\t\t\tresult.errorDetail = meta.error_detail;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tfunction processResponse(account)\n\t{\n\t\tvar that = this;\n\n\t\treturn function(data)\n\t\t{\n\t\t\t// arguments\n\t\t\t// data|jqXHR, textStatus, jqXHR|errorThrown\n\n\t\t\tthat.attempts--;\n\n\t\t\tvar result = parseResponse(data);\n\n\t\t\tif (result)\n\t\t\t{\n\t\t\t\t// in case of token error try to get new token & re-run action\n\t\t\t\tif (['oauth_token', 'token_expired', 'access_denied'].indexOf(result.error) !== -1)\n\t\t\t\t{\n\t\t\t\t\tif (account)\n\t\t\t\t\t{\n\t\t\t\t\t\tconsole.warn('[ajax] token error for authorized API request');\n\t\t\t\t\t\taccount.generateToken(function(authResult)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (authResult.status)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (that.retry)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthat.retry();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tresult.authResult = authResult;\n\t\t\t\t\t\t\t\tthat.request.resolve(result);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tconsole.warn('[ajax] token error for public API request');\n\t\t\t\t\t\tresult.invalidToken = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthat.request.resolve(result);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tresult = { status: false };\n\n\t\t\tif (that.retry && that.attempts > 0)\n\t\t\t{\n\t\t\t\tvar attempt = (MAX_ATTEMPTS - that.attempts);\n\t\t\t\tsetTimeout(\n\t\t\t\t\tfunction()\n\t\t\t\t\t{\n\t\t\t\t\t\tthat.retry();\n\t\t\t\t\t},\n\t\t\t\t\t// Incremental + random offset delay between retry in case of short availability outage\n\t\t\t\t\t(attempt * (500 + Math.round(1000 * Math.random())))\n\t\t\t\t);\n\n\t\t\t\tresult.info = { attempt: attempt, result: data };\n\n\t\t\t\tthat.request.notify(result);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tresult.info = { status: 'max_attempts', lastResult: data };\n\t\t\tresult.error = 'Still failing after ' + MAX_ATTEMPTS + ' attempts';\n\n\t\t\tthat.request.resolve(result);\n\t\t};\n\t}\n\n\tvar api = {\n\t\trequestHeaders: {},\n\n\t\t/**\n\t\t * @function ajax.makeRequest\n\t\t *\n\t\t * @param {object} jqOptions - options for jQuery ajax method\n\t\t * @param {object} [auth|account] - authorization data (required for auth requests):\n\t\t * \t\t\t\t\t\t\t\t\tcan be either auth object (documented below) or account instance\n\t\t *\n\t\t * @param {object} [auth.account] - account instance\n\t\t * @param {boolean} [auth.useHeader] - if should add auth header instead of url param (default: true)\n\t\t * @param {boolean} [auth.useGlympseAuthHeader] - if should use \"Glympse\" auth header prefix instead of the default \"Bearer\" (default: false)\n\t\t * @param {boolean} [retryOnError] - if should re-try on temporary server errors (default: true)\n\t\t *\n\t\t * @returns {$.Deferred}\n\t\t */\n\t\tmakeRequest: function makeRequest(jqOptions, auth, retryOnError)\n\t\t{\n\t\t\tvar account;\n\t\t\tvar useHeader;\n\t\t\tvar authHeaderPrefix;\n\t\t\tvar options = $.extend({}, DEFAULT_OPTIONS.ALL, jqOptions);\n\n\t\t\tif (auth)\n\t\t\t{\n\t\t\t\tif (auth.account)\n\t\t\t\t{\n\t\t\t\t\taccount = auth.account;\n\t\t\t\t\t// TRUE if not exact FALSE is passed\n\t\t\t\t\tuseHeader = (auth.useHeader !== false);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\taccount = auth;\n\t\t\t\t\tuseHeader = true;\n\t\t\t\t}\n\n\t\t\t\tif (useHeader)\n\t\t\t\t{\n\t\t\t\t\t// Two definable types of auth headers..\n\t\t\t\t\tauthHeaderPrefix = (auth.useGlympseAuthHeader === true) ? 'Glympse ' : 'Bearer ';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\toptions.headers = $.extend({}, options.headers, this.requestHeaders);\n\n\t\t\tvar context = {\n\t\t\t\trequest: $.Deferred(),\n\t\t\t\tattempts: ((retryOnError === false) ? 1 : MAX_ATTEMPTS),\n\t\t\t\tretry: function()\n\t\t\t\t{\n\t\t\t\t\tvar token = (account && account.getToken());\n\t\t\t\t\tif (token)\n\t\t\t\t\t{\n\t\t\t\t\t\taddAuthData(authHeaderPrefix, token, options);\n\t\t\t\t\t}\n\t\t\t\t\t$.ajax(options).always(processResponse.call(context, account));\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tif (!account || account.getToken())\n\t\t\t{\n\t\t\t\t// try now as we have all data\n\t\t\t\tcontext.retry();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\taccount.generateToken(function(authResult)\n\t\t\t\t{\n\t\t\t\t\tif (authResult.status)\n\t\t\t\t\t{\n\t\t\t\t\t\t// try after login when auth token is set\n\t\t\t\t\t\tcontext.retry();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\t// resolve with auth status in case of error on login\n\t\t\t\t\t\tcontext.request.resolve(authResult);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn context.request;\n\t\t},\n\n\t\t/**\n\t\t * @function ajax.get\n\t\t */\n\t\tget: function reqGet(url, data, auth, jqOptions, retryOnError)\n\t\t{\n\t\t\treturn api.makeRequest($.extend({ url: url, type: 'GET', data: data }, jqOptions), auth, retryOnError);\n\t\t},\n\n\t\t/**\n\t\t * @function ajax.post\n\t\t */\n\t\tpost: function reqPost(url, data, auth, jqOptions, retryOnError)\n\t\t{\n\t\t\tvar options = $.extend({ url: url, type: 'POST' }, DEFAULT_OPTIONS.POST, jqOptions);\n\n\t\t\tif (data)\n\t\t\t{\n\t\t\t\tif (options.contentType === 'application/json')\n\t\t\t\t{\n\t\t\t\t\tdata = JSON.stringify(data);\n\t\t\t\t}\n\n\t\t\t\toptions.data = data;\n\t\t\t}\n\n\t\t\treturn api.makeRequest(options, auth, retryOnError);\n\t\t},\n\n\t\t/**\n\t\t * @function ajax.delete\n\t\t */\n\t\tdelete: function reqDelete(url, auth, jqOptions, retryOnError)\n\t\t{\n\t\t\treturn api.makeRequest($.extend({ url: url, type: 'DELETE'}, DEFAULT_OPTIONS.POST, jqOptions), auth, retryOnError);\n\t\t},\n\n\t\t/**\n\t\t * @function ajax.batch\n\t\t */\n\t\tbatch: function reqBatch(batchEndpoint, batchRequests, auth, jqOptions, retryOnError)\n\t\t{\n\t\t\treturn api.post(batchEndpoint, batchRequests, auth, jqOptions, retryOnError)\n\t\t\t\t.then(function(batchResponse)\n\t\t\t\t{\n\t\t\t\t\tvar i, len, response;\n\t\t\t\t\tvar responses = [];\n\n\t\t\t\t\tif (batchResponse.status)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar results = batchResponse.response.items || [];\n\t\t\t\t\t\tfor (i = 0, len = results.length; i < len; i++)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tresponse = parseResponse(results[i].body);\n\t\t\t\t\t\t\tresponse.time = batchResponse.time;\n\n\t\t\t\t\t\t\tresponses.push({\n\t\t\t\t\t\t\t\tname: results[i].name,\n\t\t\t\t\t\t\t\tresult: response\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tfor (i = 0, len = batchRequests.length; i < len; i++)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar req = batchRequests[i];\n\t\t\t\t\t\t\tresponses.push({\n\t\t\t\t\t\t\t\tname: req.name,\n\t\t\t\t\t\t\t\tresult: batchResponse\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn responses;\n\t\t\t\t});\n\t\t}\n\n\t};\n\n\tmodule.exports = api;\n});\n\n","///////////////////////////////////////////////////////////////////////////////\n// Image processing utilities\n///////////////////////////////////////////////////////////////////////////////\n\ndefine('glympse-adapter/lib/image',['require','exports','module'],function(require, exports, module)\n{\n\tfunction getImageType(arrayBuffer)\n\t{\n\t\tvar type = '';\n\t\tvar dv = new DataView(arrayBuffer, 0, 5);\n\t\tvar nume1 = dv.getUint8(0, true);\n\t\tvar nume2 = dv.getUint8(1, true);\n\t\tvar hex = nume1.toString(16) + nume2.toString(16);\n\n\t\tswitch (hex)\n\t\t{\n\t\t\tcase '8950':\n\t\t\t{\n\t\t\t\ttype = 'image/png';\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase '4749':\n\t\t\t{\n\t\t\t\ttype = 'image/gif';\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase '424d':\n\t\t\t{\n\t\t\t\ttype = 'image/bmp';\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'ffd8':\n\t\t\t{\n\t\t\t\ttype = 'image/jpeg';\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdefault:\n\t\t\t{\n\t\t\t\ttype = null;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn type;\n\t}\n\n\tvar imageProcessing = {\n\t\timageScale: function(imgData, config, callback)\n\t\t{\n\t\t\t//create a canvas\n\t\t\tthis.imageInfo(imgData, gettingImageInfoCallback);\n\n\t\t\tfunction gettingImageInfoCallback(image)\n\t\t\t{\n\t\t\t\tvar width = image.width;\n\t\t\t\tvar height = image.height;\n\n\t\t\t\tvar startX = 0, startY = 0,\n\t\t\t\t\tscaleX, scaleY,\n\t\t\t\t\tresultImageWidth, resultImageHeight;\n\t\t\t\tvar persistRatio = config.maintainAspectRatio;\n\n\t\t\t\tvar scaleSize = [width, height];\n\n\t\t\t\tif (scaleSize[0] >= scaleSize[1])\n\t\t\t\t{\n\t\t\t\t\tif (scaleSize[0] > config.maxSize[0])\n\t\t\t\t\t{\n\t\t\t\t\t\tscaleSize[0] = config.maxSize[0];\n\t\t\t\t\t\tscaleSize[1] = height * config.maxSize[0] / width;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (scaleSize[0] < config.minSize[0])\n\t\t\t\t\t{\n\t\t\t\t\t\tscaleSize[0] = config.minSize[0];\n\t\t\t\t\t\tscaleSize[1] = height * config.minSize[0] / width;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (scaleSize[1] > config.maxSize[1])\n\t\t\t\t\t{\n\t\t\t\t\t\tscaleSize[0] = width * config.maxSize[1] / height;\n\t\t\t\t\t\tscaleSize[1] = config.maxSize[1];\n\t\t\t\t\t}\n\t\t\t\t\tif (scaleSize[1] < config.minSize[1])\n\t\t\t\t\t{\n\t\t\t\t\t\tscaleSize[0] = width * config.minSize[1] / height;\n\t\t\t\t\t\tscaleSize[1] = config.minSize[1];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t//we need to get square image\n\t\t\t\tif (scaleSize[0] !== scaleSize[1])\n\t\t\t\t{\n\t\t\t\t\tscaleSize[0] = Math.max(scaleSize[0], scaleSize[1]);\n\t\t\t\t\tscaleSize[1] = Math.max(scaleSize[0], scaleSize[1]);\n\t\t\t\t}\n\n\t\t\t\tvar canvas = document.createElement('canvas');\n\n\t\t\t\tcanvas.id = 'glympse-adapter-image-processing';\n\n\t\t\t\tcanvas.width = scaleSize[0];\n\t\t\t\tcanvas.height = scaleSize[1];\n\n\t\t\t\t//uncomment it for debugging\n\t\t\t\t//canvas.style = 'position:fixed; top:0; left:0';\n\n\t\t\t\tdocument.body.appendChild(canvas);\n\n\t\t\t\tvar context = canvas.getContext('2d');\n\t\t\t\t//fill alpha with convertAlpha color\n\t\t\t\tcontext.fillStyle = config.convertAlpha || '#FFFFFF';\n\t\t\t\tcontext.fillRect(0, 0, canvas.width, canvas.height);\n\n\t\t\t\tscaleX = width / scaleSize[0];\n\t\t\t\tscaleY = height / scaleSize[1];\n\n\t\t\t\tif (persistRatio)\n\t\t\t\t{\n\t\t\t\t\tscaleX = Math.max(scaleX, scaleY);\n\t\t\t\t\tscaleY = Math.max(scaleX, scaleY);\n\t\t\t\t}\n\n\t\t\t\tresultImageWidth = width / scaleX;\n\t\t\t\tresultImageHeight = height / scaleY;\n\t\t\t\tstartX = (canvas.width - resultImageWidth) / 2;\n\t\t\t\tstartY = (canvas.height - resultImageHeight) / 2;\n\n\t\t\t\t//fill spaces during scale\n\t\t\t\tcontext.fillStyle = config.sidebandFill || '#FFFFFF';\n\t\t\t\tcontext.fillRect(0, 0, startX, canvas.height);\n\t\t\t\tcontext.fillRect(startX + resultImageWidth, 0, canvas.width, canvas.height);\n\t\t\t\tcontext.fillRect(0, 0, canvas.width, startY);\n\t\t\t\tcontext.fillRect(0, startY + resultImageHeight, canvas.width, canvas.height);\n\n\t\t\t\tcontext.drawImage(image.img, startX, startY, resultImageWidth, resultImageHeight);\n\n\t\t\t\tvar dataURI = canvas.toDataURL('image/jpeg');\n\n\t\t\t\tvar byteString = atob(dataURI.split(',')[1]);\n\n\t\t\t\t// write the bytes of the string to an ArrayBuffer\n\t\t\t\tvar ab = new ArrayBuffer(byteString.length);\n\t\t\t\tvar ia = new Uint8Array(ab);\n\t\t\t\tfor (var i = 0; i < byteString.length; i++)\n\t\t\t\t{\n\t\t\t\t\tia[i] = byteString.charCodeAt(i);\n\t\t\t\t}\n\n\t\t\t\tcallback(ab);\n\t\t\t\tcanvas.remove();\n\t\t\t}\n\t\t},\n\t\timageInfo: function(imgData, callback)\n\t\t{\n\t\t\tvar blob = new Blob([imgData], { type: 'image/jpeg' });\n\n\t\t\tvar urlCreator = window.URL || window.webkitURL;\n\t\t\tvar imageUrl = urlCreator.createObjectURL(blob);\n\n\t\t\tvar img = new Image();\n\t\t\timg.src = imageUrl;\n\n\t\t\timg.onload = function()\n\t\t\t{\n\t\t\t\tcallback({\n\t\t\t\t\twidth: $(img).width(),\n\t\t\t\t\theight: $(img).height(),\n\t\t\t\t\ttype: getImageType(imgData),\n\t\t\t\t\timg: img\n\t\t\t\t});\n\t\t\t\timg.remove();\n\t\t\t};\n\n\t\t\timg.onerror = function()\n\t\t\t{\n\t\t\t\t//cannot load image from array buffer\n\t\t\t\timg.remove();\n\t\t\t};\n\n\t\t\tdocument.body.appendChild(img);\n\t\t},\n\n\t\tloadDataArrayByUrl: function(url, callback)\n\t\t{\n\t\t\tvar that = this;\n\t\t\tvar xhr = new XMLHttpRequest();\n\n\t\t\txhr.open('GET', url, true);\n\t\t\txhr.responseType = 'arraybuffer';\n\t\t\txhr.setRequestHeader('x-force-header', 'true');\n\n\t\t\txhr.onload = function()\n\t\t\t{\n\t\t\t\tvar arrayBuffer = xhr.response;\n\t\t\t\tif (arrayBuffer) {\n\t\t\t\t\tcallback(arrayBuffer);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\txhr.onerror = function(error)\n\t\t\t{\n\t\t\t\tvar result = {\n\t\t\t\t\tstatus: false,\n\t\t\t\t\terrorDetail: 'Could not load image by url',\n\t\t\t\t\tresponse: error\n\t\t\t\t};\n\t\t\t\tcallback(null, result);\n\t\t\t};\n\n\t\t\txhr.send(null);\n\t\t}\n\t};\n\n\tmodule.exports = imageProcessing;\n});\n\n","/*\n * JavaScript MD5\n *\n * IMPORTANT:\n *  - Based on https://github.com/blueimp/JavaScript-MD5 - v2.7.0\n *  - Contains small tweaks + removed unnecessary methods\n */\n\n/* global define */\n\n(function(w)\n{\n\t'use strict';\n\n\t/*\n\t * Add integers, wrapping at 2^32. This uses 16-bit operations internally\n\t * to work around bugs in some JS interpreters.\n\t */\n\tfunction safeAdd(x, y)\n\t{\n\t\tvar lsw = (x & 0xFFFF) + (y & 0xFFFF);\n\t\tvar msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n\t\treturn (msw << 16) | (lsw & 0xFFFF);\n\t}\n\n\t/*\n\t * Bitwise rotate a 32-bit number to the left.\n\t */\n\tfunction bitRotateLeft(num, cnt)\n\t{\n\t\treturn (num << cnt) | (num >>> (32 - cnt));\n\t}\n\n\t/*\n\t * These functions implement the four basic operations the algorithm uses.\n\t */\n\tfunction md5cmn(q, a, b, x, s, t)\n\t{\n\t\treturn safeAdd(bitRotateLeft(safeAdd(safeAdd(a, q), safeAdd(x, t)), s), b);\n\t}\n\n\tfunction md5ff(a, b, c, d, x, s, t)\n\t{\n\t\treturn md5cmn((b & c) | ((~b) & d), a, b, x, s, t);\n\t}\n\n\tfunction md5gg(a, b, c, d, x, s, t)\n\t{\n\t\treturn md5cmn((b & d) | (c & (~d)), a, b, x, s, t);\n\t}\n\n\tfunction md5hh(a, b, c, d, x, s, t)\n\t{\n\t\treturn md5cmn(b ^ c ^ d, a, b, x, s, t);\n\t}\n\n\tfunction md5ii(a, b, c, d, x, s, t)\n\t{\n\t\treturn md5cmn(c ^ (b | (~d)), a, b, x, s, t);\n\t}\n\n\t/*\n\t * Calculate the MD5 of an array of little-endian words, and a bit length.\n\t */\n\tfunction binlMD5(x, len)\n\t{\n\t\t/* append padding */\n\t\tx[len >> 5] |= 0x80 << (len % 32);\n\t\tx[(((len + 64) >>> 9) << 4) + 14] = len;\n\n\t\tvar i;\n\t\tvar olda;\n\t\tvar oldb;\n\t\tvar oldc;\n\t\tvar oldd;\n\t\tvar a = 1732584193;\n\t\tvar b = -271733879;\n\t\tvar c = -1732584194;\n\t\tvar d = 271733878;\n\n\t\tfor (i = 0; i < x.length; i += 16)\n\t\t{\n\t\t\tolda = a;\n\t\t\toldb = b;\n\t\t\toldc = c;\n\t\t\toldd = d;\n\n\t\t\ta = md5ff(a, b, c, d, x[i], 7, -680876936);\n\t\t\td = md5ff(d, a, b, c, x[i + 1], 12, -389564586);\n\t\t\tc = md5ff(c, d, a, b, x[i + 2], 17, 606105819);\n\t\t\tb = md5ff(b, c, d, a, x[i + 3], 22, -1044525330);\n\t\t\ta = md5ff(a, b, c, d, x[i + 4], 7, -176418897);\n\t\t\td = md5ff(d, a, b, c, x[i + 5], 12, 1200080426);\n\t\t\tc = md5ff(c, d, a, b, x[i + 6], 17, -1473231341);\n\t\t\tb = md5ff(b, c, d, a, x[i + 7], 22, -45705983);\n\t\t\ta = md5ff(a, b, c, d, x[i + 8], 7, 1770035416);\n\t\t\td = md5ff(d, a, b, c, x[i + 9], 12, -1958414417);\n\t\t\tc = md5ff(c, d, a, b, x[i + 10], 17, -42063);\n\t\t\tb = md5ff(b, c, d, a, x[i + 11], 22, -1990404162);\n\t\t\ta = md5ff(a, b, c, d, x[i + 12], 7, 1804603682);\n\t\t\td = md5ff(d, a, b, c, x[i + 13], 12, -40341101);\n\t\t\tc = md5ff(c, d, a, b, x[i + 14], 17, -1502002290);\n\t\t\tb = md5ff(b, c, d, a, x[i + 15], 22, 1236535329);\n\n\t\t\ta = md5gg(a, b, c, d, x[i + 1], 5, -165796510);\n\t\t\td = md5gg(d, a, b, c, x[i + 6], 9, -1069501632);\n\t\t\tc = md5gg(c, d, a, b, x[i + 11], 14, 643717713);\n\t\t\tb = md5gg(b, c, d, a, x[i], 20, -373897302);\n\t\t\ta = md5gg(a, b, c, d, x[i + 5], 5, -701558691);\n\t\t\td = md5gg(d, a, b, c, x[i + 10], 9, 38016083);\n\t\t\tc = md5gg(c, d, a, b, x[i + 15], 14, -660478335);\n\t\t\tb = md5gg(b, c, d, a, x[i + 4], 20, -405537848);\n\t\t\ta = md5gg(a, b, c, d, x[i + 9], 5, 568446438);\n\t\t\td = md5gg(d, a, b, c, x[i + 14], 9, -1019803690);\n\t\t\tc = md5gg(c, d, a, b, x[i + 3], 14, -187363961);\n\t\t\tb = md5gg(b, c, d, a, x[i + 8], 20, 1163531501);\n\t\t\ta = md5gg(a, b, c, d, x[i + 13], 5, -1444681467);\n\t\t\td = md5gg(d, a, b, c, x[i + 2], 9, -51403784);\n\t\t\tc = md5gg(c, d, a, b, x[i + 7], 14, 1735328473);\n\t\t\tb = md5gg(b, c, d, a, x[i + 12], 20, -1926607734);\n\n\t\t\ta = md5hh(a, b, c, d, x[i + 5], 4, -378558);\n\t\t\td = md5hh(d, a, b, c, x[i + 8], 11, -2022574463);\n\t\t\tc = md5hh(c, d, a, b, x[i + 11], 16, 1839030562);\n\t\t\tb = md5hh(b, c, d, a, x[i + 14], 23, -35309556);\n\t\t\ta = md5hh(a, b, c, d, x[i + 1], 4, -1530992060);\n\t\t\td = md5hh(d, a, b, c, x[i + 4], 11, 1272893353);\n\t\t\tc = md5hh(c, d, a, b, x[i + 7], 16, -155497632);\n\t\t\tb = md5hh(b, c, d, a, x[i + 10], 23, -1094730640);\n\t\t\ta = md5hh(a, b, c, d, x[i + 13], 4, 681279174);\n\t\t\td = md5hh(d, a, b, c, x[i], 11, -358537222);\n\t\t\tc = md5hh(c, d, a, b, x[i + 3], 16, -722521979);\n\t\t\tb = md5hh(b, c, d, a, x[i + 6], 23, 76029189);\n\t\t\ta = md5hh(a, b, c, d, x[i + 9], 4, -640364487);\n\t\t\td = md5hh(d, a, b, c, x[i + 12], 11, -421815835);\n\t\t\tc = md5hh(c, d, a, b, x[i + 15], 16, 530742520);\n\t\t\tb = md5hh(b, c, d, a, x[i + 2], 23, -995338651);\n\n\t\t\ta = md5ii(a, b, c, d, x[i], 6, -198630844);\n\t\t\td = md5ii(d, a, b, c, x[i + 7], 10, 1126891415);\n\t\t\tc = md5ii(c, d, a, b, x[i + 14], 15, -1416354905);\n\t\t\tb = md5ii(b, c, d, a, x[i + 5], 21, -57434055);\n\t\t\ta = md5ii(a, b, c, d, x[i + 12], 6, 1700485571);\n\t\t\td = md5ii(d, a, b, c, x[i + 3], 10, -1894986606);\n\t\t\tc = md5ii(c, d, a, b, x[i + 10], 15, -1051523);\n\t\t\tb = md5ii(b, c, d, a, x[i + 1], 21, -2054922799);\n\t\t\ta = md5ii(a, b, c, d, x[i + 8], 6, 1873313359);\n\t\t\td = md5ii(d, a, b, c, x[i + 15], 10, -30611744);\n\t\t\tc = md5ii(c, d, a, b, x[i + 6], 15, -1560198380);\n\t\t\tb = md5ii(b, c, d, a, x[i + 13], 21, 1309151649);\n\t\t\ta = md5ii(a, b, c, d, x[i + 4], 6, -145523070);\n\t\t\td = md5ii(d, a, b, c, x[i + 11], 10, -1120210379);\n\t\t\tc = md5ii(c, d, a, b, x[i + 2], 15, 718787259);\n\t\t\tb = md5ii(b, c, d, a, x[i + 9], 21, -343485551);\n\n\t\t\ta = safeAdd(a, olda);\n\t\t\tb = safeAdd(b, oldb);\n\t\t\tc = safeAdd(c, oldc);\n\t\t\td = safeAdd(d, oldd);\n\t\t}\n\t\treturn [a, b, c, d];\n\t}\n\n\t/*\n\t * Convert an array of little-endian words to a string\n\t */\n\tfunction binl2rstr(input)\n\t{\n\t\tvar i;\n\t\tvar output = '';\n\t\tvar length32 = input.length * 32;\n\t\tfor (i = 0; i < length32; i += 8)\n\t\t{\n\t\t\toutput += String.fromCharCode((input[i >> 5] >>> (i % 32)) & 0xFF);\n\t\t}\n\t\treturn output;\n\t}\n\n\t/*\n\t * Convert a raw string to an array of little-endian words\n\t * Characters >255 have their high-byte silently ignored.\n\t */\n\tfunction rstr2binl(input)\n\t{\n\t\tvar i;\n\t\tvar output = [];\n\t\toutput[(input.length >> 2) - 1] = undefined;\n\t\tfor (i = 0; i < output.length; i += 1)\n\t\t{\n\t\t\toutput[i] = 0;\n\t\t}\n\t\tvar length8 = input.length * 8;\n\t\tfor (i = 0; i < length8; i += 8)\n\t\t{\n\t\t\toutput[i >> 5] |= (input.charCodeAt(i / 8) & 0xFF) << (i % 32);\n\t\t}\n\t\treturn output;\n\t}\n\n\t/*\n\t * Calculate the MD5 of a raw string\n\t */\n\tfunction rstrMD5(s)\n\t{\n\t\treturn binl2rstr(binlMD5(rstr2binl(s), s.length * 8));\n\t}\n\n\t/*\n\t * Convert a raw string to a hex string\n\t */\n\tfunction rstr2hex(input)\n\t{\n\t\tvar hexTab = '0123456789abcdef';\n\t\tvar output = '';\n\t\tvar x;\n\t\tvar i;\n\t\tfor (i = 0; i < input.length; i += 1)\n\t\t{\n\t\t\tx = input.charCodeAt(i);\n\t\t\toutput += hexTab.charAt((x >>> 4) & 0x0F) + hexTab.charAt(x & 0x0F);\n\t\t}\n\t\treturn output;\n\t}\n\n\t/*\n\t * Encode a string as utf-8\n\t */\n\tfunction str2rstrUTF8(input)\n\t{\n\t\treturn unescape(encodeURIComponent(input));\n\t}\n\n\t/*\n\t * Take string arguments and return either raw or hex encoded strings\n\t */\n\tfunction rawMD5(s)\n\t{\n\t\treturn rstrMD5(str2rstrUTF8(s));\n\t}\n\n\tfunction hexMD5(s)\n\t{\n\t\treturn rstr2hex(rawMD5(s));\n\t}\n\n\tfunction md5(string)\n\t{\n\t\treturn hexMD5(string);\n\t}\n\n\tif (typeof define === 'function' && define.amd)\n\t{\n\t\tdefine('glympse-adapter/lib/md5',[],function()\n\t\t{\n\t\t\treturn md5;\n\t\t});\n\t}\n\telse if (typeof module === 'object' && module.exports)\n\t{\n\t\tmodule.exports = md5;\n\t}\n\telse\n\t{\n\t\t// Global namespace registration\n\t\tvar g = w.glympse || (w.glympse = {});\n\t\tvar lib = g.lib || (g.lib = {});\n\t\tlib.md5 = md5;\n\t}\n\n}(window));\n\n","define('glympse-adapter/adapter/models/Account',['require','exports','module','glympse-adapter/lib/utils','glympse-adapter/lib/ajax','glympse-adapter/GlympseAdapterDefines','glympse-adapter/lib/image','glympse-adapter/lib/md5'],function(require, exports, module)\n{\n    'use strict';\n\n\tvar lib = require('glympse-adapter/lib/utils');\n\tvar ajax = require('glympse-adapter/lib/ajax');\n\tvar Defines = require('glympse-adapter/GlympseAdapterDefines');\n\tvar imageProcessing = require('glympse-adapter/lib/image');\n\tvar md5 = require('glympse-adapter/lib/md5');\n\n\tvar m = Defines.MSG;\n\tvar REQUEST_TYPES = Defines.CARDS.REQUEST_TYPES;\n\n\tvar cAcctTokenName = 't0';\n\tvar cAccountInfo = 'accountInfo';\n\tvar cApiKey = 'api_key';\n\tvar cPassword = 'p0';\n\tvar cUserName = 'n0';\n\tvar cSvcPassword = 'password';\n\tvar cSvcUserName = 'username';\n\tvar cEnvProduction = 'EnvProd';\n\tvar cEnvSandbox = 'EnvSandbox';\n\n\tvar anonymousUserName = 'viewer';\n\tvar anonymousPassword = 'password';\n\n\t// Exported class\n\tfunction Account(controller, cfg)\n\t{\n\t\t// consts\n\t\tvar dbg = lib.dbg('Account', cfg.dbg);\n\n\t\tvar svr = cfg.svcGlympse;\n\t\tvar sandbox = cfg.sandbox;\n\t\tvar idEnvironment = (sandbox) ? Account[cEnvSandbox] : Account[cEnvProduction];\n\n\t\tvar account = {};\n\n\t\tvar apiKey = cfg.apiKey;\n\t\tvar hashApiKey = md5(apiKey);\n\n\t\tvar urlCreate = (svr + 'account/create');\n\t\tvar urlLogin = (svr + 'account/login');\n\n\t\t// state\n\t\tvar isAnon = cfg.isAnon;\n\t\tvar token;\n\n\t\tvar settings;\n\t\tvar currentEnvKeys;\n\t\tvar currentKeySettings;\n\n\t\tvar that = this;\n\n\t\tvar gettingTokenProcess = null;\n\n\t\taccount[cApiKey] = apiKey;\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// PROPERTIES\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\t\tthis.getToken = function()\n\t\t{\n\t\t\treturn token;\n\t\t};\n\n\t\tthis.getId = function()\n\t\t{\n\t\t\treturn account[cSvcUserName];\n\t\t};\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// PUBLICS\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\t\tthis.init = function()\n\t\t{\n\t\t\tgetSettings();\n\n\t\t\t// If not anonymous, add saved username/password to token request\n\t\t\tif (!isAnon)\n\t\t\t{\n\t\t\t\tvar u = currentKeySettings[cUserName];\n\t\t\t\tvar p = currentKeySettings[cPassword];\n\n\t\t\t\tif (!u || !p)\n\t\t\t\t{\n\t\t\t\t\tcontroller.notify(m.AccountLoginStatus, {\n\t\t\t\t\t\tstatus: false,\n\t\t\t\t\t\terror: 'no_account',\n\t\t\t\t\t\terrorDetail: 'No account exists for the current apiKey.'\n\t\t\t\t\t});\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\taccount[cSvcUserName] = u;\n\t\t\t\taccount[cSvcPassword] = p;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\taccount[cSvcUserName] = anonymousUserName;\n\t\t\t\taccount[cSvcPassword] = anonymousPassword;\n\t\t\t}\n\n\t\t\t// check for token after checking for user/password as they are required for getting new token (after expiration or smth)\n\t\t\ttoken = currentKeySettings[cAcctTokenName];\n\t\t\tif (token)\n\t\t\t{\n\t\t\t\t// validate token before sending init event\n\t\t\t\tif (!isAnon)\n\t\t\t\t{\n\t\t\t\t\tgetUserInfo(null, true);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tcontroller.notify(m.AccountLoginStatus, {\n\t\t\t\t\t\tstatus: true,\n\t\t\t\t\t\ttoken: token,\n\t\t\t\t\t\tanonymous: true\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tgetNewToken();\n\n\t\t\treturn false;\n\t\t};\n\n\t\tthis.generateToken = function(callback)\n\t\t{\n\t\t\ttoken = null;\n\t\t\tgetNewToken(callback);\n\t\t};\n\n\t\tthis.create = function()\n\t\t{\n\t\t\tif (!isAnon)\n\t\t\t{\n\t\t\t\tcreateAccount();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tdbg('Creating account failed, no API key available');\n\t\t\t}\n\t\t};\n\n\t\tthis.setName = function(newName)\n\t\t{\n\t\t\tvar apiUrl = (svr + 'users/self/update');\n\n\t\t\tajax.get(apiUrl, { name: newName }, that)\n\t\t\t\t.then(function(result)\n\t\t\t\t{\n\t\t\t\t\tcontroller.notify(m.UserNameUpdateStatus, result);\n\t\t\t\t});\n\t\t};\n\n\t\tthis.setAvatar = function(urlOrAvatarDataArray)\n\t\t{\n\t\t\tvar that = this;\n\t\t\tvar avatarCfg = cfg.avatar || {};\n\n\t\t\tif (typeof urlOrAvatarDataArray === 'string')\n\t\t\t{\n\t\t\t\timageProcessing.loadDataArrayByUrl(urlOrAvatarDataArray, loadImageCallback);\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tvar imageScaleConfig = {\n\t\t\t\tminSize: [\n\t\t\t\t\tavatarCfg.minSize || 120,\n\t\t\t\t\tavatarCfg.minSize || 120\n\t\t\t\t],\n\t\t\t\tmaxSize: [\n\t\t\t\t\tavatarCfg.maxSize || 512,\n\t\t\t\t\tavatarCfg.maxSize || 512\n\t\t\t\t],\n\t\t\t\tmaintainAspectRatio: true,\n\t\t\t\tsidebandFill: '#fff',\n\t\t\t\tconvertAlpha: '#fff'\n\t\t\t};\n\n\t\t\timageProcessing.imageScale(urlOrAvatarDataArray, imageScaleConfig, imageScaleCallback);\n\n\t\t\tfunction loadImageCallback(dataArray, error)\n\t\t\t{\n\t\t\t\tif (dataArray)\n\t\t\t\t{\n\t\t\t\t\tthat.setAvatar(dataArray);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tcontroller.notify(m.UserAvatarUpdateStatus, error);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction imageScaleCallback(dataArray)\n\t\t\t{\n\t\t\t\tvar apiUrl = (svr + 'users/self/upload_avatar');\n\n\t\t\t\tajax.post(apiUrl, new Uint8Array(dataArray), that, {\n\t\t\t\t\tcontentType: 'image/jpeg',\n\t\t\t\t\tprocessData: false\n\t\t\t\t})\n\t\t\t\t\t.then(function(result)\n\t\t\t\t\t{\n\t\t\t\t\t\tcontroller.notify(m.UserAvatarUpdateStatus, result);\n\t\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\tthis.getUserInfo = getUserInfo;\n\n\t\tthis.hasAccount = function()\n\t\t{\n\t\t\tgetSettings();\n\n\t\t\treturn !!(!isAnon && currentKeySettings[cUserName] && currentKeySettings[cPassword]);\n\t\t};\n\n\t\t/**\n\t\t * Allow logged in user to generate a sharing request.\n\t\t * @param {Object} config endpoint options\n\t\t * request_params format:\n\t\t * {\n         *  type: string,     // Type of request -- email|sms|link|account|app ---> only accepts/uses \"link\" for now\n         *  subtype: string,  // [OPTIONAL] Subtype of \"app\" types (50 char max) --> unused for now\n         *  address: string,  // [OPTIONAL] Address of recipient for some types of requests (256 char max) --> unused for now\n         *  name: string,     // [OPTIONAL] A friendly display name to be associated with the requestee. (150 char max)\n         *  text: string,     // [OPTIONAL] Message to send --> unused for now\n         *  send: string,     // [OPTIONAL] Values server|client --> unused for now\n         *  locale: string,   // [OPTIONAL] Locale for localized resources --> unused for now\n         *  brand: string,    // [OPTIONAL] Defines any sub-brand customization for the invite --> unused for now\n         * }\n\t\t */\n\t\tthis.createRequest = function(config)\n\t\t{\n\t\t\tif (!config || !config.type || config.type !== REQUEST_TYPES.LINK)\n\t\t\t{\n\t\t\t\tvar error = '\"type\" must be provided (NOTE: only Defines.CARDS.REQUEST_TYPES.LINK type is supported for now)';\n\n\t\t\t\tdbg(error, config, 3);\n\n\t\t\t\tcontroller.notify(m.CreateRequestStatus, {\n\t\t\t\t\tstatus: false,\n\t\t\t\t\tresponse: { error: error }\n\t\t\t\t});\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar url = svr + 'users/self/create_request?' + $.param(config);\n\n\t\t\tajax.post(url, null, that)\n\t\t\t\t.then(function(result)\n\t\t\t\t{\n\t\t\t\t\tcontroller.notify(m.CreateRequestStatus, result);\n\t\t\t\t});\n\t\t};\n\n\t\tthis.delete = function()\n\t\t{\n\t\t\t//delete all storages for this account\n\t\t\tdeleteSettings();\n\n\t\t\tcontroller.notify(m.AccountDeleteStatus, { status: true });\n\t\t};\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// UTILITY\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\t\tfunction saveSettings()\n\t\t{\n\t\t\tcurrentEnvKeys[hashApiKey] = currentKeySettings;\n\t\t\tsettings[idEnvironment] = currentEnvKeys;\n\t\t\tlib.setCfgVal(cAccountInfo, settings);\n\t\t}\n\n\t\tfunction getSettings()\n\t\t{\n\t\t\tsettings = lib.getCfgVal(cAccountInfo) || {};\n\t\t\tcurrentEnvKeys = settings[idEnvironment] || {};\n\n\t\t\t// check for settings under apiKey first to not break old accounts\n\t\t\tcurrentKeySettings = currentEnvKeys[apiKey];\n\n\t\t\tif (currentKeySettings)\n\t\t\t{\n\t\t\t\tdbg('.. migrating old settings ..');\n\n\t\t\t\t// save in new format\n\t\t\t\tdelete currentEnvKeys[apiKey];\n\t\t\t\tsaveSettings();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcurrentKeySettings = currentEnvKeys[hashApiKey] || {};\n\t\t\t}\n\t\t}\n\n\t\tfunction deleteSettings()\n\t\t{\n\t\t\tgetSettings();\n\t\t\tcurrentKeySettings = {};\n\t\t\tsaveSettings();\n\t\t}\n\n\t\tfunction getNewToken(callback)\n\t\t{\n\t\t\t// do not allow multiple log-ins at the same time\n\t\t\tif (!gettingTokenProcess)\n\t\t\t{\n\t\t\t\tgettingTokenProcess = ajax.get(urlLogin, account)\n\t\t\t\t\t.then(function(result)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (result.status)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttoken = result.response.access_token;\n\t\t\t\t\t\t\tcurrentKeySettings[cAcctTokenName] = token;\n\t\t\t\t\t\t\tsaveSettings();\n\n\t\t\t\t\t\t\t//dbg('>> new token: ' + token);\n\n\t\t\t\t\t\t\tresult.id = account[cSvcUserName];\n\t\t\t\t\t\t\tresult.token = token;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcontroller.notify(m.AccountLoginStatus, result);\n\n\t\t\t\t\t\tgettingTokenProcess = null;\n\n\t\t\t\t\t\treturn result;\n\t\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (callback)\n\t\t\t{\n\t\t\t\tgettingTokenProcess.then(function(result)\n\t\t\t\t{\n\t\t\t\t\tcallback(result);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tfunction getUserInfo(userId, checkToken)\n\t\t{\n\t\t\tvar apiUrl = svr + 'users/' + (userId || 'self');\n\n\t\t\tajax.get(apiUrl, null, that)\n\t\t\t\t.then(function(result)\n\t\t\t\t{\n\t\t\t\t\tif (result.status)\n\t\t\t\t\t{\n\t\t\t\t\t\t// can be useful for properly filtering events on consumer side\n\t\t\t\t\t\tresult.response.userId = userId;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (checkToken)\n\t\t\t\t\t{\n\t\t\t\t\t\tcontroller.notify(m.AccountLoginStatus, {\n\t\t\t\t\t\t\tstatus: true,\n\t\t\t\t\t\t\ttoken: token,\n\t\t\t\t\t\t\tid: currentKeySettings[cUserName]\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tcontroller.notify(m.UserInfoStatus, result);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\n\t\tfunction createAccount()\n\t\t{\n\t\t\tvar opts = {};\n\n\t\t\topts[cApiKey] = account[cApiKey];\n\n\t\t\tajax.get(urlCreate, opts)\n\t\t\t\t.then(function(result)\n\t\t\t\t{\n\t\t\t\t\tif (result.status)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar resp = result.response;\n\n\t\t\t\t\t\tvar id = resp.id;\n\t\t\t\t\t\tvar pw = resp.password;\n\n\t\t\t\t\t\taccount[cSvcUserName] = id;\n\t\t\t\t\t\taccount[cSvcPassword] = pw;\n\n\t\t\t\t\t\tcurrentKeySettings[cUserName] = id;\n\t\t\t\t\t\tcurrentKeySettings[cPassword] = pw;\n\n\t\t\t\t\t\tsaveSettings();\n\t\t\t\t\t}\n\n\t\t\t\t\tcontroller.notify(m.AccountCreateStatus, result);\n\t\t\t\t});\n\t\t}\n\t}\n\n\t// Account defines\n\n\t// Environment\n\tAccount[cEnvProduction] = 'prod';\n\tAccount[cEnvSandbox] = 'sbox';\n\n\n\tmodule.exports = Account;\n});\n\n","define('glympse-adapter/adapter/models/MemberInvite',['require','exports','module','glympse-adapter/lib/utils'],function(require, exports, module)\n{\n    'use strict';\n\n\tvar lib = require('glympse-adapter/lib/utils');\n\n\n\t// Exported class\n\tfunction MemberInvite(data, cfg)\n\t{\n\t\t// state\n\n\t\t// consts\n\t\tvar dbg = lib.dbg('MemberInvite', cfg.dbg);\n\n\t\t// TODO: Just map data props directly??\n\t\t//\t---> Only want immediate non-Objects/Arrays\n\t\tvar props = [ 'locale'\n\t\t\t\t\t, 'type'\n\t\t\t\t\t, 'send'\n\t\t\t\t\t, 'invite_code'\n\t\t\t\t\t, 'address'\n\t\t\t\t\t];\n\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// PROPERTIES\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\t\t// NOTE: some properties created via lib.mapProps\n\n\t\tthis.getData = function()\n\t\t{\n\t\t\treturn data;\n\t\t};\n\n\t\tthis.setData = function(val)\n\t\t{\n\t\t\tdata = val;\n\t\t\tlib.mapProps(this, props, data);\n\t\t};\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// PUBLICS\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\t\tthis.toJSON = function()\n\t\t{\n\t\t\treturn data;\n\t\t};\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// UTILITY\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// CTOR\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\t\tthis.setData(data);\n\t}\n\n\t// MemberInvite defines\n\n\n\tmodule.exports = MemberInvite;\n});\n\n","define('glympse-adapter/adapter/models/MemberPermissions',['require','exports','module','glympse-adapter/lib/utils'],function(require, exports, module)\n{\n    'use strict';\n\n\tvar lib = require('glympse-adapter/lib/utils');\n\n\n\t// Exported class\n\tfunction MemberPermissions(data, cfg)\n\t{\n\t\t// state\n\n\t\t// consts\n\t\tvar dbg = lib.dbg('MemberTicket', cfg.dbg);\n\n\t\t// TODO: Just map data props directly??\n\t\t//\t---> Only want immediate non-Objects/Arrays\n\t\tvar props = [\n\t\t\t\t\t];\n\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// PROPERTIES\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\t\t// NOTE: some properties created via lib.mapProps\n\n\t\tthis.getData = function()\n\t\t{\n\t\t\treturn data;\n\t\t};\n\n\t\tthis.setData = function(val)\n\t\t{\n\t\t\tdata = val;\n\t\t\tlib.mapProps(this, props, data);\n\t\t};\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// PUBLICS\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\t\tthis.toJSON = function()\n\t\t{\n\t\t\treturn data;\n\t\t};\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// UTILITY\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// CTOR\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\t\tthis.setData(data);\n\t}\n\n\t// MemberPermissions defines\n\n\n\tmodule.exports = MemberPermissions;\n});\n\n","define('glympse-adapter/adapter/models/MemberTicket',['require','exports','module','glympse-adapter/lib/utils'],function(require, exports, module)\n{\n    'use strict';\n\n\tvar lib = require('glympse-adapter/lib/utils');\n\n\n\t// Exported class\n\tfunction MemberTicket(data, cfg)\n\t{\n\t\t// state\n\n\t\t// consts\n\t\tvar dbg = lib.dbg('MemberTicket', cfg.dbg);\n\n\t\t// TODO: Just map data props directly??\n\t\t//\t---> Only want immediate non-Objects/Arrays\n\t\tvar props = [ 'invite_code'\n\t\t\t\t\t, 'ticket_id'\n\t\t\t\t\t, 'created_time'\n\t\t\t\t\t];\n\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// PROPERTIES\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\t\t// NOTE: some properties created via lib.mapProps\n\n\t\tthis.getData = function()\n\t\t{\n\t\t\treturn data;\n\t\t};\n\n\t\tthis.setData = function(val)\n\t\t{\n\t\t\tdata = val;\n\t\t\tlib.mapProps(this, props, data);\n\t\t};\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// PUBLICS\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\t\tthis.toJSON = function()\n\t\t{\n\t\t\treturn data;\n\t\t};\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// UTILITY\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// CTOR\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\t\tthis.setData(data);\n\t}\n\n\t// MemberTicket defines\n\n\n\tmodule.exports = MemberTicket;\n});\n\n","define('glympse-adapter/adapter/models/Member',['require','exports','module','glympse-adapter/lib/utils','glympse-adapter/adapter/models/MemberInvite','glympse-adapter/adapter/models/MemberPermissions','glympse-adapter/adapter/models/MemberTicket'],function(require, exports, module)\n{\n    'use strict';\n\n\tvar lib = require('glympse-adapter/lib/utils');\n\tvar MemberInvite = require('glympse-adapter/adapter/models/MemberInvite');\n\tvar MemberPermissions = require('glympse-adapter/adapter/models/MemberPermissions');\n\tvar MemberTicket = require('glympse-adapter/adapter/models/MemberTicket');\n\n\n\t// Exported class\n\tfunction Member(data, cfg)\n\t{\n\t\t// state\n\t\tvar invite;\n\t\tvar permissions;\n\t\tvar ticket;\n\n\t\t// consts\n\t\tvar dbg = lib.dbg('Member', cfg.dbg);\n\n\t\t// TODO: Just map data props directly??\n\t\t//\t---> Only want immediate non-Objects/Arrays\n\t\tvar props = [ 'status'\n\t\t\t\t\t, 'card_id'\n\t\t\t\t\t, 'alias'\n\t\t\t\t\t, 'last_modified'\n\t\t\t\t\t, 'created_time'\n\t\t\t\t\t, 'id'\n\t\t\t\t\t, 'user_id'\n\t\t\t\t\t, 'inviter'\n\t\t\t\t\t];\n\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// PROPERTIES\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\t\t// NOTE: some properties created via lib.mapProps\n\n\t\tthis.getInvite = function()\n\t\t{\n\t\t\treturn invite;\n\t\t};\n\n\t\tthis.getPermissions = function()\n\t\t{\n\t\t\treturn permissions;\n\t\t};\n\n\t\tthis.getTicket = function()\n\t\t{\n\t\t\treturn ticket;\n\t\t};\n\n\t\tthis.getMetaData = function()\n\t\t{\n\t\t\treturn data.metadata;\n\t\t};\n\n\t\tthis.getData = function()\n\t\t{\n\t\t\treturn data;\n\t\t};\n\n\t\tthis.setData = function(val)\n\t\t{\n\t\t\t$.extend(data, val);\n\n\t\t\tlib.mapProps(this, props, data);\n\n\t\t\t//invite = (data.invite) ? new MemberInvite(data.invite, cfg) : {};\n\t\t\t//ticket = (data.ticket) ? new MemberTicket(data.ticket, cfg) : {};\n\t\t\t//permissions = (data.permissions) ? new MemberPermissions(data.permissions, cfg) : {};\n\t\t\tif (data.invite)\n\t\t\t{\n\t\t\t\tinvite = new MemberInvite(data.invite, cfg);\n\t\t\t}\n\n\t\t\tif (data.ticket)\n\t\t\t{\n\t\t\t\tticket = new MemberTicket(data.ticket, cfg);\n\t\t\t}\n\n\t\t\tif (data.permissions)\n\t\t\t{\n\t\t\t\tpermissions = new MemberPermissions(data.permissions, cfg);\n\t\t\t}\n\t\t};\n\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// PUBLICS\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\t\tthis.toJSON = function()\n\t\t{\n\t\t\treturn data;\n\t\t};\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// UTILITY\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// CTOR\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\t\tthis.setData(data);\n\t}\n\n\t// Member defines\n\n\n\tmodule.exports = Member;\n});\n\n","define('glympse-adapter/adapter/models/Card',['require','exports','module','glympse-adapter/lib/utils','glympse-adapter/lib/ajax','glympse-adapter/adapter/models/Member','glympse-adapter/GlympseAdapterDefines'],function(require, exports, module)\n{\n\t'use strict';\n\n\tvar lib = require('glympse-adapter/lib/utils');\n\tvar ajax = require('glympse-adapter/lib/ajax');\n\tvar Member = require('glympse-adapter/adapter/models/Member');\n\tvar Defines = require('glympse-adapter/GlympseAdapterDefines');\n\tvar m = Defines.MSG;\n\n\n\t// Exported class\n\tfunction Card(controller, idCard, account, cfg)\n\t{\n\t\tvar svr = cfg.svcGlympse;\n\n\t\t// state\n\t\tvar data;\n\t\tvar loaded = false;\n\t\t//members collection\n\t\tvar members = [];\n\t\tvar membersIndex = {};\n\t\t//inviteCodes collection\n\t\tvar inviteCodes = [];\n\t\tvar inviteCodesIndex = {};\n\t\t//card join invites collection\n\t\tvar joinInvites = [];\n\t\tvar joinInvitesIndex = {};\n\n\t\tvar that = this;\n\t\tvar lastUpdated;\n\n\t\t// constants\n\t\tvar dbg = lib.dbg('Card', cfg.dbg);\n\n\t\t// TODO: Just map data props directly??\n\t\t//\t---> Only want immediate non-Objects/Arrays\n\t\tvar props = [\n\t\t\t'name'\n\t\t\t, 'type_id'\n\t\t\t, 'last_modified'\n\t\t\t, 'created_time'\n\t\t\t, 'id'\n\t\t\t, 'metadata_etag'\n\t\t\t, 'inviter'\n\t\t\t, 'invitee'\n\t\t\t, 'details'\n\t\t];\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// PROPERTIES\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\t\t// NOTE: some properties created via lib.mapProps\n\n\t\tthis.getMembers = function()\n\t\t{\n\t\t\treturn members;\n\t\t};\n\n\t\tthis.getMemberById = function(id) {\n\t\t\treturn getMemberById(id);\n\t\t};\n\n\t\tthis.getMetaData = function()\n\t\t{\n\t\t\treturn data.metadata;\n\t\t};\n\n\t\tthis.isLoaded = function()\n\t\t{\n\t\t\treturn loaded;\n\t\t};\n\n\t\tthis.getIdCard = function()\n\t\t{\n\t\t\treturn idCard;\n\t\t};\n\n\t\tthis.getData = function()\n\t\t{\n\t\t\treturn data;\n\t\t};\n\n\t\tthis.setData = function(val)\n\t\t{\n\t\t\tloaded = true;\n\n\t\t\tdata = val;\n\t\t\tlib.mapProps(this, props, data);\n\n\t\t\tvar mems = data.members || [];\n\t\t\tvar mem, member;\n\n\t\t\tfor (var i = 0, len = mems.length; i < len; i++)\n\t\t\t{\n\t\t\t\tmem = mems[i];\n\t\t\t\tmember = addMember(mem);\n\n\t\t\t\tcontroller.notify(m.CardUpdated, {\n\t\t\t\t\tcard: that,\n\t\t\t\t\taction: 'member_added',\n\t\t\t\t\tmember: member\n\t\t\t\t});\n\n\t\t\t\tvar addedInviteCode = checkMemberInviteCode(member);\n\n\t\t\t\tif (addedInviteCode)\n\t\t\t\t{\n\t\t\t\t\tcontroller.notify(m.CardUpdated, {\n\t\t\t\t\t\tcard: that,\n\t\t\t\t\t\taction: 'invite_code_found',\n\t\t\t\t\t\tinvite: addedInviteCode\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdbg('Card \"' + this.getName() + '\" ready with ' + members.length + ' members');\n\t\t};\n\n\t\tthis.setDataFromStream = function(streamArray, time) {\n\t\t\tvar cardId = this.getIdCard();\n\t\t\tvar newMembers = [],\n\t\t\t\tnewJoinCardInvites = [],\n\t\t\t\tupdateResult,\n\t\t\t\taction,\n\t\t\t\tmember,\n\t\t\t\ti, len;\n\n\t\t\tvar mem, msg, members;\n\t\t\tvar cleanActions = {};\n\t\t\tvar cleanStream = [];\n\n\t\t\t// Loop through the updates, culling out entries where only the\n\t\t\t// latest update matters (i.e. ticket invites shared).\n\t\t\t// Hash on action, then members under the action\n\t\t\tfor (i = 0, len = streamArray.length; i < len; i++)\n\t\t\t{\n\t\t\t\taction = streamArray[i];\n\t\t\t\tvar actionType = action.type;\n\n\t\t\t\t// Pass anything that isn't a share for now\n\t\t\t\tif (actionType !== 'member_started_sharing')\n\t\t\t\t{\n\t\t\t\t\tcleanStream.push(action);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tvar ref = cleanActions[actionType];\n\t\t\t\tmem = action.data.member_id || action.member_id;\n\n\t\t\t\tif (!ref)\n\t\t\t\t{\n\t\t\t\t\tmembers = {};\n\t\t\t\t\tmembers[mem] = action;\n\t\t\t\t\tcleanActions[action.type] = members;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tmsg = ref[mem];\n\t\t\t\t\tif (!msg)\n\t\t\t\t\t{\n\t\t\t\t\t\tref[mem] = action;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif (msg.last_modified < action.last_modified)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tref[mem] = action;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Re-add the final pruned items\n\t\t\tfor (i in cleanActions)\n\t\t\t{\n\t\t\t\tmembers = cleanActions[i];\n\t\t\t\tfor (mem in members)\n\t\t\t\t{\n\t\t\t\t\tcleanStream.push(members[mem]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Finally, process the cleaned up actions\n\t\t\tfor (i = 0, len = cleanStream.length; i < len; i++)\n\t\t\t{\n\t\t\t\taction = cleanStream[i];\n\t\t\t\tupdateResult = {\n\t\t\t\t\tcard: this,\n\t\t\t\t\taction: action.type,\n\t\t\t\t\tt: time\n\t\t\t\t};\n\n\t\t\t\tswitch (action.type)\n\t\t\t\t{\n\t\t\t\t\tcase 'member_added':\n\t\t\t\t\t\tnewMembers.push(action.data.member_id);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'member_removed':\n\t\t\t\t\t\tmember = removeMemberById(action.data ? action.data.member_id : action.member_id);\n\t\t\t\t\t\tupdateResult.member = member;\n\t\t\t\t\t\tupdateResult.userId = action.data ? action.data.user_id : action.user_id;\n\t\t\t\t\t\tcontroller.notify(m.CardUpdated, updateResult);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'invite_added':\n\t\t\t\t\t\tnewJoinCardInvites.push(action.data.invite_id);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'invite_removed':\n\t\t\t\t\t\tupdateResult.invite = removeJoinInviteById(action.data.invite_id);\n\t\t\t\t\t\tcontroller.notify(m.CardUpdated, updateResult);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'member_started_sharing':\n\t\t\t\t\t\tmember = getMemberById(action.member_id);\n\t\t\t\t\t\tif (!member)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmember = addMember($.extend({ id: action.member_id }, action.data));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t//remove previous invite code if member was sharing lately\n\t\t\t\t\t\t\tremoveMemberInviteCode(member);\n\t\t\t\t\t\t\tmember.setData(action.data);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tupdateResult.invite = checkMemberInviteCode(member);\n\t\t\t\t\t\tupdateResult.userId = action.user_id;\n\t\t\t\t\t\tcontroller.notify(m.CardUpdated, updateResult);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'member_stopped_sharing':\n\t\t\t\t\t\tmember = getMemberById(action.member_id);\n\t\t\t\t\t\tupdateResult.invite = getMemberInviteCode(member);\n\t\t\t\t\t\tupdateResult.userId = action.user_id;\n\t\t\t\t\t\tcontroller.notify(m.CardUpdated, updateResult);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'card_modified':\n\t\t\t\t\t\t//mark to update on next poll\n\t\t\t\t\t\tthis.dirty = true;\n\t\t\t\t\t\tcontroller.notify(m.CardUpdated, updateResult);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tupdateResult.data = action;\n\t\t\t\t\t\tcontroller.notify(m.CardUpdated, updateResult);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar batchRequests = [];\n\n\t\t\tfor (i = 0, len = newMembers.length; i < len; i++)\n\t\t\t{\n\t\t\t\tbatchRequests.push({\n\t\t\t\t\tname: 'members',\n\t\t\t\t\turl: 'cards/' + cardId + '/members/' + newMembers[i],\n\t\t\t\t\tmethod: 'GET'\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tfor (i = 0, len = newJoinCardInvites.length; i < len; i++)\n\t\t\t{\n\t\t\t\tbatchRequests.push({\n\t\t\t\t\tname: 'invites',\n\t\t\t\t\turl: 'cards/' + cardId + '/invites/' + newJoinCardInvites[i],\n\t\t\t\t\tmethod: 'GET'\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Batch request\n\t\t\tif (batchRequests.length) {\n\t\t\t\tajax.batch(svr + 'batch', batchRequests, account)\n\t\t\t\t\t.then(function(responses) {\n\t\t\t\t\t\tvar response;\n\t\t\t\t\t\tfor (i = 0, len = responses.length; i < len; i++)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tresponse = responses[i];\n\t\t\t\t\t\t\tswitch (response.name) {\n\t\t\t\t\t\t\t\tcase 'invites':\n\t\t\t\t\t\t\t\t\tprocessInviteResult(response.result);\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'members':\n\t\t\t\t\t\t\t\t\tprocessMemberResult(response.result);\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\n\t\t\tfunction processMemberResult(result)\n\t\t\t{\n\t\t\t\tvar newMember;\n\t\t\t\tif (result.status)\n\t\t\t\t{\n\t\t\t\t\tnewMember = getMemberById(result.response.id);\n\t\t\t\t\tif (newMember)\n\t\t\t\t\t{\n\t\t\t\t\t\tnewMember.setData(result.response);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tnewMember = addMember(result.response);\n\t\t\t\t\t}\n\t\t\t\t\tcontroller.notify(m.CardUpdated, {\n\t\t\t\t\t\tcard: that,\n\t\t\t\t\t\taction: 'member_added',\n\t\t\t\t\t\tmember: newMember\n\t\t\t\t\t});\n\t\t\t\t\tcheckMemberInviteCode(newMember);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tcontroller.notify(m.CardUpdated, result);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction processInviteResult(result)\n\t\t\t{\n\t\t\t\tvar newInvite;\n\t\t\t\tif (result.status)\n\t\t\t\t{\n\t\t\t\t\tnewInvite = addJoinInvite(result.response);\n\t\t\t\t\tupdateResult.invite = newInvite;\n\t\t\t\t\tcontroller.notify(m.CardUpdated, {\n\t\t\t\t\t\tcard: that,\n\t\t\t\t\t\taction: 'invite_added',\n\t\t\t\t\t\tinvite: newInvite\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tcontroller.notify(m.CardUpdated, result);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis.getInvites = function()\n\t\t{\n\t\t\treturn inviteCodes;\n\t\t};\n\n\t\tthis.setLastUpdatingTime = function(time) {\n\t\t\tlastUpdated = time;\n\t\t};\n\n\t\tthis.getLastUpdatingTime = function() {\n\t\t\treturn lastUpdated;\n\t\t};\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// PUBLICS\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\n\t\tthis.toJSON = function()\n\t\t{\n\t\t\treturn data;\n\t\t};\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// UTILITY\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\t\tfunction addMember(memberData) {\n\t\t\tvar member = new Member(memberData, cfg);\n\t\t\tmembersIndex[memberData.id] = members.length;\n\t\t\tmembers.push(member);\n\n\t\t\treturn member;\n\t\t}\n\n\t\tfunction getMemberById(id) {\n\t\t\tvar memberIndex = membersIndex[id];\n\t\t\treturn memberIndex >= 0 ? members[memberIndex] : null;\n\t\t}\n\n\t\tfunction removeMemberById(id) {\n\t\t\tvar memberIndex = membersIndex[id],\n\t\t\t\tremovedMember;\n\n\t\t\tif (typeof memberIndex === 'undefined')\n\t\t\t{\n\t\t\t\tdbg('!!! no member to delete', id, 3);\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tdelete membersIndex[id];\n\t\t\tremovedMember = members.splice(memberIndex, 1)[0];\n\n\t\t\t// update index\n\t\t\tfor (var i = memberIndex, len = members.length; i < len; i++)\n\t\t\t{\n\t\t\t\tmembersIndex[members[i].getId()] = i;\n\t\t\t}\n\n\t\t\treturn removedMember || null;\n\t\t}\n\n\t\tfunction checkMemberInviteCode(member) {\n\t\t\tvar inviteCode = getMemberInviteCode(member);\n\n\t\t\tif (inviteCode && !isInviteCodeAdded(inviteCode))\n\t\t\t{\n\t\t\t\treturn addInviteCode(inviteCode);\n\t\t\t}\n\n\t\t\treturn inviteCode;\n\t\t}\n\n\t\tfunction getMemberInviteCode(member) {\n\t\t\tif (!member)\n\t\t\t{\n\t\t\t\tdbg('!!! can\\'t get invite: no member provided', member, 3);\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\tvar ticket = member.getTicket();\n\t\t\treturn ticket && ticket.getInviteCode();\n\t\t}\n\n\t\tfunction removeMemberInviteCode(member) {\n\t\t\tvar inviteCode = getMemberInviteCode(member);\n\n\t\t\tif (inviteCode && isInviteCodeAdded(inviteCode))\n\t\t\t{\n\t\t\t\treturn removeInviteCode(inviteCode);\n\t\t\t}\n\t\t}\n\n\t\tfunction addInviteCode(inviteCode)\n\t\t{\n\t\t\t// Ensure an invite is specified only once for each card\n\t\t\tif (isInviteCodeAdded(inviteCode))\n\t\t\t{\n\t\t\t\treturn inviteCode;\n\t\t\t}\n\n\t\t\tinviteCodesIndex[inviteCode] = inviteCodes.length;\n\t\t\tinviteCodes.push(inviteCode);\n\n\t\t\treturn inviteCode;\n\t\t}\n\n\t\tfunction removeInviteCode(inviteCode) {\n\t\t\tvar inviteIndex = inviteCodesIndex[inviteCode],\n\t\t\t\tremovedInviteCode;\n\n\t\t\tif (typeof inviteIndex === 'undefined')\n\t\t\t{\n\t\t\t\tdbg('!!! no invite to delete', inviteCode, 3);\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tdelete inviteCodesIndex[inviteCode];\n\t\t\tremovedInviteCode = inviteCodes.splice(inviteIndex, 1)[0];\n\n\t\t\t// update index\n\t\t\tfor (var i = inviteIndex, len = inviteCodes.length; i < len; i++)\n\t\t\t{\n\t\t\t\tinviteCodesIndex[inviteCodes[i]] = i;\n\t\t\t}\n\n\t\t\treturn removedInviteCode || null;\n\t\t}\n\n\t\tfunction addJoinInvite(inviteData) {\n\t\t\tvar invite = inviteData;\n\n\t\t\tjoinInvitesIndex[inviteData.id] = joinInvites.length;\n\t\t\tjoinInvites.push(invite);\n\n\t\t\treturn invite;\n\t\t}\n\n\t\tfunction removeJoinInviteById(inviteId) {\n\t\t\tvar inviteIndex = joinInvitesIndex[inviteId],\n\t\t\t\tremovedInvite;\n\n\t\t\tif (typeof inviteIndex === 'undefined')\n\t\t\t{\n\t\t\t\tdbg('!!! no join invite to delete', inviteId, 3);\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tdelete joinInvitesIndex[inviteId];\n\t\t\tremovedInvite = joinInvites.splice(inviteIndex, 1)[0];\n\n\t\t\t// update index\n\t\t\tfor (var i = inviteIndex, len = joinInvites.length; i < len; i++)\n\t\t\t{\n\t\t\t\tjoinInvitesIndex[joinInvites[i]] = i;\n\t\t\t}\n\n\t\t\treturn removedInvite || null;\n\t\t}\n\n\t\tfunction isInviteCodeAdded(inviteCode)\n\t\t{\n\t\t\treturn typeof inviteCodesIndex[inviteCode] !== 'undefined';\n\t\t}\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// CTOR\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t}\n\n\t// Card defines\n\n\n\tmodule.exports = Card;\n});\n\n","define('glympse-adapter/adapter/CardsController',['require','exports','module','glympse-adapter/lib/utils','glympse-adapter/lib/rafUtils','glympse-adapter/lib/ajax','glympse-adapter/GlympseAdapterDefines','glympse-adapter/adapter/models/Account','glympse-adapter/adapter/models/Card'],function(require, exports, module)\n{\n\t'use strict';\n\n\t// defines\n\tvar lib = require('glympse-adapter/lib/utils');\n\tvar raf = require('glympse-adapter/lib/rafUtils');\n\tvar ajax = require('glympse-adapter/lib/ajax');\n\tvar Defines = require('glympse-adapter/GlympseAdapterDefines');\n\n\tvar m = Defines.MSG;\n\tvar r = Defines.CARDS.REQUESTS;\n\tvar rl = Defines.CARDS.REQUESTS_LOCAL;\n\tvar REQUEST_TYPES = Defines.CARDS.REQUEST_TYPES;\n\n\t// Cards-specific\n\tvar Account = require('glympse-adapter/adapter/models/Account');\n\tvar Card = require('glympse-adapter/adapter/models/Card');\n\n\t// Exported class\n\tfunction CardsController(controller, cfg)\n\t{\n\t\t// consts\n\t\tvar dbg = lib.dbg('CardsController', cfg.dbg);\n\t\tvar svr = cfg.svcGlympse;\n\t\tvar pollInterval = cfg.pollCards || 60000;\n\t\tvar pollingInterval;\n\t\tvar cardsMode = cfg.hasOwnProperty('cardsMode') ? cfg.cardsMode : !!cfg.card;\n\n\t\t// state\n\t\tvar that = this;\n\t\tvar cardInvites;\n\t\tvar cards;\n\t\tvar cardsIndex;\n\t\tvar cardsReady = 0;\n\t\tvar initialized = false;\n\t\tvar account = cfg.account;\n\t\tvar cacheCardUpdatedEvts = false;\n\t\tvar cachedCardUpdatedEvts = [];\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// PUBLICS\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\t\tthis.init = function(cardsInvitesToLoad)\n\t\t{\n\t\t\tcards = [];\n\t\t\tcardsIndex = {};\n\t\t\tcardInvites = cardsInvitesToLoad || [];\n\n\t\t\tcardsReady = (cardInvites) ? cardInvites.length : 0;\n\t\t\tinitialized = true;\n\n\t\t\tcontroller.notify(m.CardsInitStart, cardInvites);\n\n\t\t\tif (account)\n\t\t\t{\n\t\t\t\taccountInitComplete();\n\t\t\t}\n\t\t};\n\n\n\t\tthis.notify = function(msg, args)\n\t\t{\n\t\t\tswitch (msg)\n\t\t\t{\n\t\t\t\tcase m.AccountLoginStatus:\n\t\t\t\t{\n\t\t\t\t\taccount = args.account;\n\t\t\t\t\taccountInitComplete(args);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase m.AccountDeleteStatus:\n\t\t\t\t{\n\t\t\t\t\taccountDeleteComplete();\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase m.CardInit:\n\t\t\t\t{\n\t\t\t\t\tcontroller.notify(msg, args);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase m.CardReady:\n\t\t\t\t{\n\t\t\t\t\tcontroller.notify(msg, args);\n\n\t\t\t\t\tvar card = cardsIndex[args];\n\t\t\t\t\tif (cards.indexOf(card) === -1)\n\t\t\t\t\t{\n\t\t\t\t\t\tcards.push(card);\n\t\t\t\t\t\tcontroller.notify(m.CardAdded, card);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (--cardsReady === 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tcontroller.notify(m.CardsInitEnd, cards);\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase m.CardUpdated:\n\t\t\t\t{\n                    if (cacheCardUpdatedEvts) {\n\t\t\t\t\t\tcachedCardUpdatedEvts.push(args);\n                        return;\n                    }\n\n\t\t\t\t\tcontroller.notify(msg, args);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tdefault:\n\t\t\t\t{\n\t\t\t\t\tdbg('Unknown msg: \"' + msg + '\"', args);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t};\n\n\t\tthis.cmd = function(cmd, args)\n\t\t{\n\t\t\tswitch (cmd)\n\t\t\t{\n\t\t\t\tcase r.requestCards:\n\t\t\t\t\treturn requestCards();\n\n\t\t\t\tcase rl.getCards:\n\t\t\t\t\treturn getCards();\n\n\t\t\t\tcase r.request:\n\t\t\t\t\treturn request(args);\n\n\t\t\t\tcase r.removeMember:\n\t\t\t\t\treturn removeMember(args);\n\n\t\t\t\tcase r.joinRequest:\n\t\t\t\t\treturn joinRequest(args);\n\n\t\t\t\tcase r.joinRequestCancel:\n\t\t\t\t\treturn joinRequestCancel(args);\n\n\t\t\t\tcase r.getActiveJoinRequests:\n\t\t\t\t\treturn getActiveJoinRequests();\n\n\t\t\t\tcase r.activity:\n\t\t\t\t\treturn getCardActivity(args);\n\n\t\t\t\tdefault:\n\t\t\t\t\tdbg('method not found', cmd);\n\t\t\t}\n\t\t};\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// UTILITY\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\t\tfunction accountInitComplete(args)\n\t\t{\n\t\t\tvar sig = '[accountInitComplete] - ';\n\n\t\t\tif (!account)\n\t\t\t{\n\t\t\t\tdbg(sig + 'authToken unavailable', args);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!initialized)\n\t\t\t{\n\t\t\t\tdbg(sig + 'not initialized', args);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t//dbg('Auth token: ' + account.getToken() + ' -- ' + (info && info.token));\n\t\t\tdbg(sig + '[' + ((cfg.isAnon) ? 'ANON' : 'ACCT') + '] Authenticated. Loading ' + cardInvites.length + ' cards...');\n\n\t\t\t// Now load card(s)\n\t\t\tloadCards(cardInvites);\n\n\t\t\tif (!cardInvites.length)\n\t\t\t{\n\t\t\t\tcontroller.notify(m.CardsInitEnd, []);\n\t\t\t}\n\n\t\t\tif (cardsMode && cfg.isAnon) {\n                getInviteById(cardInvites[0]);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (pollingInterval) {\n\t\t\t\t\traf.clearInterval(pollingInterval);\n\t\t\t\t}\n\t\t\t\trequestCards();\n\t\t\t\tpollingInterval = raf.setInterval(requestCards, pollInterval);\n\t\t\t}\n\t\t}\n\n\t\tfunction accountDeleteComplete(){\n\t\t\taccount = null;\n\t\t\tif (pollingInterval)\n\t\t\t{\n\t\t\t\traf.clearInterval(pollingInterval);\n\t\t\t\tpollingInterval = null;\n\t\t\t}\n\t\t}\n\n\t\tfunction loadCard(card, fullRequest)\n\t\t{\n\t\t\treturn {\n\t\t\t\tcard: card,\n\t\t\t\trequest: fullRequest ? getCard(card) : updateCard(card)\n\t\t\t};\n\t\t}\n\n\t\tfunction loadCards(cardInvites)\n\t\t{\n\t\t\tif (!cardInvites || !cardInvites.length)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar batchRequests = [],\n\t\t\t\tloadingCards = [],\n\t\t\t\tloadingCard,\n\t\t\t\tisNew,\n\t\t\t\tcard,\n\t\t\t\tcardInvite;\n\n\t\t\tcardsReady = cardInvites.length;\n\t\t\tfor (var i = 0, len = cardInvites.length; i < len; i++)\n\t\t\t{\n\t\t\t\tcardInvite = cardInvites[i];\n\t\t\t\tcard = cardsIndex[cardInvite];\n\t\t\t\tisNew = false;\n\t\t\t\tif (!card)\n\t\t\t\t{\n\t\t\t\t\tcard = new Card(that, cardInvite, account, cfg);\n\t\t\t\t\tcardsIndex[cardInvite] = card;\n\t\t\t\t\tisNew = true;\n\t\t\t\t}\n\n\t\t\t\tloadingCard = loadCard(card, isNew);\n\n\t\t\t\tbatchRequests.push(loadingCard.request);\n\t\t\t\tloadingCards.push(loadingCard.card);\n\n\t\t\t\tif (card.dirty)\n\t\t\t\t{\n\t\t\t\t\t//need to send additional full request to update card properties\n\t\t\t\t\tloadingCard = loadCard(card, true);\n\t\t\t\t\tbatchRequests.push(loadingCard.request);\n\t\t\t\t\tloadingCards.push(loadingCard.card);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tajax.batch(svr + 'batch', batchRequests, account)\n\t\t\t\t.then(function(responses)\n\t\t\t\t{\n\t\t\t\t\tvar response, i, len, card;\n\t\t\t\t\tfor (i = 0, len = responses.length; i < len; i++)\n\t\t\t\t\t{\n\t\t\t\t\t\tresponse = responses[i];\n\t\t\t\t\t\tcard = loadingCards[i];\n\t\t\t\t\t\tswitch (response.name)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcase 'getCard':\n\t\t\t\t\t\t\t\tprocessGetCard(response.result, card);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'updateCard':\n\t\t\t\t\t\t\t\tprocessUpdateCard(response.result, card);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\n\n\t\t//////////////////////\n\t\t// Cards API\n\t\t//////////////////////\n\n\t\t/**\n\t\t * Requests cards for the current user.\n\t\t */\n        function requestCards()\n\t\t{\n\t\t\tajax.get(svr + 'cards', null, account)\n\t\t\t\t.then(function(result)\n\t\t\t\t{\n\t\t\t\t\tif (result.status)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar i, card, len, cardId, allCardIds = [];\n\t\t\t\t\t\t// add new cards\n\t\t\t\t\t\tfor (i = 0, len = result.response.length; i < len; i++)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcard = result.response[i];\n\t\t\t\t\t\t\tallCardIds.push(card.id);\n\t\t\t\t\t\t\tif (cardInvites.indexOf(card.id) === -1)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcardInvites.push(card.id);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// cleanup deleted cards (use while to allow deleting in the loop)\n\t\t\t\t\t\ti = cardInvites.length;\n\t\t\t\t\t\twhile (i--)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcardId = cardInvites[i];\n\t\t\t\t\t\t\tif (allCardIds.indexOf(cardId) === -1)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcardInvites.splice(i, 1);\n\t\t\t\t\t\t\t\tcard = cardsIndex[cardId];\n\t\t\t\t\t\t\t\tcards.splice(cards.indexOf(card), 1);\n\t\t\t\t\t\t\t\tdelete cardsIndex[cardId];\n\t\t\t\t\t\t\t\tcontroller.notify(m.CardRemoved, card);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// refresh existing cards\n\t\t\t\t\t\tloadCards(cardInvites);\n\t\t\t\t\t}\n\n\t\t\t\t\tcontroller.notify(m.CardsRequestStatus, result);\n\t\t\t\t});\n\t\t}\n\n\t\tfunction getInviteById(cardId) {\n\t\t\tajax.get(svr + 'cards/invites/' + cardId, null, account)\n\t\t\t\t.then(function(result) {\n\t\t\t\t\tif (result.status) {\n\t\t\t\t\t\tvar card = new Card(that, cardId, account, cfg);\n\t\t\t\t\t\tcardsIndex[cardId] = card;\n\t\t\t\t\t\tprocessGetCard(result, card);\n\t\t\t\t\t\tresult.response = [result.response];\n\t\t\t\t\t}\n\t\t\t\t\tcontroller.notify(m.CardsRequestStatus, result);\n\t\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t * Returns currently loaded cards\n\t\t */\n\t\tfunction getCards()\n\t\t{\n\t\t\treturn cards;\n\t\t}\n\n\t\tfunction getCard(card)\n\t\t{\n\t\t\tvar idCard = card.getIdCard();\n\n\t\t\tcontroller.notify(m.CardInit, idCard);\n\n\t\t\tvar cardUrl = 'cards/' + idCard;\n\n\t\t\treturn {\n\t\t\t\tname: 'getCard',\n\t\t\t\turl: cardUrl + '?' +  $.param({members: !card.dirty}),\n\t\t\t\tmethod: 'GET'\n\t\t\t};\n\t\t}\n\n\t\tfunction updateCard(card, from, to) {\n\t\t\tvar idCard = card.getIdCard();\n\n\t\t\tvar cardUrl = 'cards/' + idCard + '/activity';\n\n\t\t\tvar getParams = { from_ts: card.getLastUpdatingTime() };\n\n\t\t\tif (from)\n\t\t\t{\n\t\t\t\tgetParams.from_ts = from;\n\t\t\t}\n\n\t\t\tif (to)\n\t\t\t{\n\t\t\t\tgetParams.to_ts = to;\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tname: 'updateCard',\n\t\t\t\turl: cardUrl + '?' + $.param(getParams),\n\t\t\t\tmethod: 'GET'\n\t\t\t};\n\t\t}\n\n\t\tfunction processGetCard(result, card){\n\t\t\tvar idCard = card.getIdCard();\n\n\t\t\tif (result.status)\n\t\t\t{\n\t\t\t\t//dbg('Got card data', resp);\n\n\t\t\t\tcacheCardUpdatedEvts = true;\n\t\t\t\tcard.setData(result.response);\n\t\t\t\tif (!card.dirty)\n\t\t\t\t{\n\t\t\t\t\tcard.setLastUpdatingTime(result.time);\n\t\t\t\t\tthat.notify(m.CardReady, idCard);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tcard.dirty = false;\n\t\t\t\t}\n\n\t\t\t\tif (cacheCardUpdatedEvts) {\n                    flushCardUpdatedEvtCache();\n                }\n\t\t\t}\n\t\t\telse if (result.response.error === 'failed_to_decode')\n\t\t\t{\n\t\t\t\t// Invite is invalid or has been revoked, in\n\t\t\t\t// either case, we cannot continue loading this\n\t\t\t\t// card, so bail immediately\n\t\t\t\tthat.notify(m.CardReady, idCard);\n\t\t\t}\n\t\t}\n\n\t\tfunction flushCardUpdatedEvtCache() {\n            cacheCardUpdatedEvts = false;\n\t\t\tfor (var i = 0, len = cachedCardUpdatedEvts.length; i < len; i++){\n\t\t\t\tthat.notify(m.CardUpdated, cachedCardUpdatedEvts[i]);\n\t\t\t}\n\t\t}\n\n\t\tfunction processUpdateCard(result, card){\n\t\t\tif (result.status)\n\t\t\t{\n\t\t\t\t//dbg('Got card data', resp);\n\t\t\t\tif (result.response.length) {\n\t\t\t\t\tcard.setDataFromStream(result.response, result.time);\n\t\t\t\t}\n\t\t\t\tcard.setLastUpdatingTime(result.time);\n\t\t\t}\n\t\t}\n\n\n\t\t/**\n\t\t * Request a card member / all card members to share its / their locations\n\t\t *\n\t\t * @param {Object} config Configuration\n\t\t * @param {string} config.inviteCode Invite code generated by the app via adapter.core.createRequest($request_params)\n\t\t * @param {string} config.cardId Card id to remove a member\n\t\t * @param {string} config.memberList List of member ids. If no ids is given, all card members will receive this request.\n\t\t */\n\t\tfunction request(config)\n\t\t{\n\t\t\tif (!config || !config.cardId || !config.inviteCode)\n\t\t\t{\n\t\t\t\tvar error = 'cardId & inviteCode config params must be passed';\n\n\t\t\t\tdbg(error, config, 3);\n\n\t\t\t\tcontroller.notify(m.CardsLocationRequestStatus, {\n\t\t\t\t\tstatus: false,\n\t\t\t\t\tresponse: { error: error }\n\t\t\t\t});\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar url = svr + 'cards/' + config.cardId + '/request';\n\n\t\t\tvar data = {\n\t\t\t\tinvite_code: config.inviteCode,\n\t\t\t\tinvitees: {}\n\t\t\t};\n\n\t\t\tif (config.memberList && config.memberList.length)\n\t\t\t{\n\t\t\t\tvar members = [];\n\t\t\t\tfor (var i = 0, len = config.memberList.length; i < len; i++)\n\t\t\t\t{\n\t\t\t\t\tmembers.push({ member_id: config.memberList[i] });\n\t\t\t\t}\n\t\t\t\tdata.invitees.type = 'list';\n\t\t\t\tdata.invitees.list = members;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tdata.invitees.type = 'all';\n\t\t\t}\n\n\t\t\tajax.post(url, data, account)\n\t\t\t\t.then(function(result)\n\t\t\t\t{\n\t\t\t\t\tcontroller.notify(m.CardsLocationRequestStatus, result);\n\t\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t * Request to join a card\n\t\t *\n\t\t * @param {Object} requestConfig:\n\t\t * {\n\t\t *   type: \"${request_type}\",\n\t\t *   name: ${requestee_name},\n\t\t *   address: ${requestee_address},\n\t\t *   send: \"${send_type}\",\n\t\t *   locale: \"${locale}\",\n\t\t *   region: \"${region}\"\n\t\t * }\n\t\t */\n\t\tfunction joinRequest(requestConfig)\n\t\t{\n\t\t\tvar url = svr + 'cards/requests';\n\n\t\t\tif (!requestConfig.type ||\n\t\t\t\t(!requestConfig.address && requestConfig.type !== REQUEST_TYPES.CLIPBOARD && requestConfig.type !== REQUEST_TYPES.LINK))\n\t\t\t{\n\t\t\t\tvar error = 'Need to provide type (Defines.CARDS.REQUEST_TYPES: LINK, CLIPBOARD, SMS, EMAIL, ACCOUNT) ' +\n\t\t\t\t\t'and address (except LINK and CLIPBOARD types) to join a card';\n\n\t\t\t\tdbg(error, requestConfig, 3);\n\n\t\t\t\tcontroller.notify(m.CardsJoinRequestStatus, {\n\t\t\t\t\tstatus: false,\n\t\t\t\t\tresponse: { error: error }\n\t\t\t\t});\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t\trequestConfig.send = requestConfig.send || 'server';\n\n\t\t\tajax.post(url, requestConfig, account)\n\t\t\t\t.then(function(result)\n\t\t\t\t{\n\t\t\t\t\tcontroller.notify(m.CardsJoinRequestStatus, result);\n\t\t\t\t});\n\t\t}\n\n\t\tfunction joinRequestCancel(requestId)\n\t\t{\n\t\t\tvar url = svr + 'cards/requests/' + requestId;\n\n\t\t\tajax.delete(url, account)\n\t\t\t\t.then(function(result)\n\t\t\t\t{\n\t\t\t\t\tif (result.status)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.response.id = requestId;\n\t\t\t\t\t}\n\t\t\t\t\tcontroller.notify(m.CardsJoinRequestCancelStatus, result);\n\t\t\t\t});\n\t\t}\n\n\t\tfunction getActiveJoinRequests()\n\t\t{\n\t\t\tvar url = svr + 'cards/requests';\n\n\t\t\tajax.get(url, null, account)\n\t\t\t\t.then(function(result)\n\t\t\t\t{\n\t\t\t\t\tcontroller.notify(m.CardsActiveJoinRequestsStatus, result);\n\t\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t * Removes a member from a given card\n\t\t *\n\t\t * @param {Object} config Configuration\n\t\t * @param {string} config.cardId Card id to remove a member\n\t\t * @param {string} config.memberId Member id of the member to remove. If no memberId is given, the current user is removed.\n\t\t */\n\t\tfunction removeMember(config)\n\t\t{\n\t\t\tif (!config || !config.cardId)\n\t\t\t{\n\t\t\t\tdbg('CardId param is mandatory!', config, 3);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar memberId = config.memberId;\n\t\t\tvar card;\n\t\t\tif (!memberId)\n\t\t\t{\n\t\t\t\tcard = cardsIndex[config.cardId];\n\t\t\t\tif (!card)\n\t\t\t\t{\n\t\t\t\t\tdbg('card not found for CardId=', config.cardId, 3);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar members = card.getMembers();\n\t\t\t\tfor (var i = 0, len = members.length, member; i < len; i++)\n\t\t\t\t{\n\t\t\t\t\tmember = members[i];\n\t\t\t\t\tif (member.getUserId() === account.getId())\n\t\t\t\t\t{\n\t\t\t\t\t\tmemberId = member.getId();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!memberId)\n\t\t\t\t{\n\t\t\t\t\tdbg('current member not found for card=', card.toJSON(), 3);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tajax.delete((svr + 'cards/' + config.cardId + '/members/' + memberId), account)\n\t\t\t\t.then(function(result)\n\t\t\t\t{\n\t\t\t\t\tif (result.status)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.response.cardId = config.cardId;\n\t\t\t\t\t\tresult.response.memberId = memberId;\n\n\t\t\t\t\t\trequestCards();\n\t\t\t\t\t}\n\n\t\t\t\t\tcontroller.notify(m.CardRemoveMemberStatus, result);\n\t\t\t\t});\n\t\t}\n\n\t\tfunction getCardActivity(config)\n\t\t{\n\t\t\tif (!config || !config.cardId)\n\t\t\t{\n\t\t\t\tdbg('CardId param is mandatory!', config, 3);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar cardId = config.cardId,\n\t\t\t\tcard = cardsIndex[cardId];\n\n\t\t\tif (!card)\n\t\t\t{\n\t\t\t\tdbg('Card with id=' + cardId + ' not found!', config, 3);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar requestConfig = updateCard(card, config.fromTS, config.toTS);\n\n\t\t\tajax.makeRequest(\n\t\t\t\t{\n\t\t\t\t\turl: (svr + requestConfig.url),\n\t\t\t\t\ttype: requestConfig.method\n\t\t\t\t},\n\t\t\t\taccount\n\t\t\t)\n\t\t\t\t.then(function(result)\n\t\t\t\t{\n\t\t\t\t\tif (result.status)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.cardId = cardId;\n\t\t\t\t\t}\n\n\t\t\t\t\tcontroller.notify(m.CardActivityStatus, result);\n\t\t\t\t});\n\t\t}\n\t}\n\n\n\tmodule.exports = CardsController;\n});\n\n","define('glympse-adapter/adapter/models/PublicGroup',['require','exports','module','glympse-adapter/lib/utils','glympse-adapter/lib/rafUtils','glympse-adapter/lib/ajax','glympse-adapter/GlympseAdapterDefines'],function(require, exports, module)\n{\n\t'use strict';\n\n\tvar lib = require('glympse-adapter/lib/utils');\n\tvar raf = require('glympse-adapter/lib/rafUtils');\n\tvar ajax = require('glympse-adapter/lib/ajax');\n\n\tvar Defines = require('glympse-adapter/GlympseAdapterDefines');\n\n\tvar m = Defines.MSG;\n\n\tvar cDemoGroups;\n\n\t// Exported class\n\tfunction PublicGroup(controller, account, groupName, cfg)\n\t{\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// PROPERTIES\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\t\t//constants\n\t\tvar dbg = lib.dbg('PublicGroup', cfg.dbg);\n\t\tvar svr = cfg.svcGlympse;\n\n\t\tvar idGroup = encodeURIComponent(groupName);\n\n\t\tvar urlEvents = ('groups/' + idGroup + '/events');\n\t\tvar urlInitial = ('groups/' + idGroup);\n\t\tvar urlInitialParams = { branding: true };\n\n\t\t//state\n\t\tvar loaded = false;\n\t\tvar next = 0;\n\t\tvar lastUpdate = 0;\n\t\tvar demoGroup = cDemoGroups[groupName.toString().toLowerCase()];\n\t\tvar users = [];\n\n\t\tvar that = this;\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// PROPERTIES\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\t\tthis.getInvites = function()\n\t\t{\n\t\t\tfor (var i = users.length - 1, invites = []; i >= 0; i--)\n\t\t\t{\n\t\t\t\tinvites.push(users[i].invite);\n\t\t\t}\n\n\t\t\treturn invites;\n\t\t};\n\n\t\tthis.getName = function()\n\t\t{\n\t\t\treturn idGroup;\n\t\t};\n\n\t\tthis.getUsers = function()\n\t\t{\n\t\t\treturn users;\n\t\t};\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// PUBLIC\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\t\tthis.request = function()\n\t\t{\n\t\t\treturn requestGroup();\n\t\t};\n\n\t\tthis.setData = function(data)\n\t\t{\n\t\t\tif (data)\n\t\t\t{\n\t\t\t\treturn processGroupInitial({ status: true, response: data, time: Date.now() });\n\t\t\t}\n\t\t};\n\n\t\tthis.toString = function()\n\t\t{\n\t\t\treturn 'PublicGroup: ' + JSON.stringify({ name: idGroup, numUsers: users.length, numInvites: this.getInvites().length });\n\t\t};\n\n\t\tthis.toJSON = function()\n\t\t{\n\t\t\treturn { name: idGroup, users: users, invites: this.getInvites() };\n\t\t};\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// UTILITY\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\t\tfunction requestGroup()\n\t\t{\n\t\t\tif (!loaded)\n\t\t\t{\n\t\t\t\t//console.log('::: :: INITIAL REQUEST :: ::: -- ' + idGroup);\n\t\t\t\tif (demoGroup)\n\t\t\t\t{\n\t\t\t\t\traf.setTimeout(function()\n\t\t\t\t\t{\n\t\t\t\t\t\tprocessGroupInitial(demoGroup);\n\t\t\t\t\t}, 200);\n\n\t\t\t\t\treturn true;\t// do not poll demo groups\n\t\t\t\t}\n\n\t\t\t\tajax.get(svr + urlInitial, urlInitialParams, account)\n\t\t\t\t\t.then(processGroupInitial);\n\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (demoGroup)\n\t\t\t{\n\t\t\t\treturn true;\t// do not poll demo groups\n\t\t\t}\n\n\t\t\t//console.log('::: :: EVENTS REQUEST :: :::');\n\t\t\tajax.get(svr + urlEvents, { next: next }, account)\n\t\t\t\t.then(processGroupUpdate);\n\n\t\t\treturn false;\n\t\t}\n\n\t\tfunction sendStatus(result, invitesAdded, invitesRemoved, invitesSwapped)\n\t\t{\n\t\t\tresult.group = groupName;\n\n\t\t\t// Only send an update if some invite status is found\n\t\t\tif (!(invitesAdded.length > 0 || invitesRemoved.length > 0 || invitesSwapped.length > 0))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tresult.invitesAdded = invitesAdded;\n\t\t\tresult.invitesRemoved = invitesRemoved;\n\t\t\tresult.invitesSwapped = invitesSwapped;\n\n\t\t\tcontroller.notify(m.GroupStatus, result);\n\t\t}\n\n\t\t// Parse returned initial Glympse Public Group results\n\t\tfunction processGroupInitial(result)\n\t\t{\n\t\t\tloaded = true; // We're initialized, even if there is an error\n\n\t\t\tvar invitesAdded = [];\n\t\t\tvar invitesRemoved = [];\n\t\t\tvar invitesSwapped = [];\n\n\t\t\tif (result.status)\n\t\t\t{\n\t\t\t\tparseGroupListResponse(result, invitesAdded, invitesRemoved, invitesSwapped);\n\t\t\t}\n\n\t\t\tsendStatus(result, invitesAdded, invitesRemoved, invitesSwapped);\n\t\t\tcontroller.notify(m.GroupLoaded, result);\n\t\t}\n\n\t\t// Parse returned subsequent Glympse Public Group event results\n\t\tfunction processGroupUpdate(result)\n\t\t{\n\t\t\tvar invitesAdded = [];\n\t\t\tvar invitesRemoved = [];\n\t\t\tvar invitesSwapped = [];\n\n\t\t\tloaded = true; // We're done, even if there is an error\n\n\t\t\t//console.log('processGroupUpdate: got data: ' + data + ' -- ' + data.result);\n\t\t\tif (result.status)\n\t\t\t{\n\t\t\t\tvar o = result.response;\n\n\t\t\t\tif (o.type === 'group')\n\t\t\t\t{\n\t\t\t\t\tparseGroupListResponse(result, invitesAdded, invitesRemoved, invitesSwapped);\n\t\t\t\t}\n\t\t\t\telse //if (o.type === 'events')\n\t\t\t\t{\n\t\t\t\t\tnext = (o.events) ? (o.events + 1) : 0;\n\t\t\t\t\tlastUpdate = result.time;\n\t\t\t\t\t//console.log('EVENTS next = ' + next);\n\n\t\t\t\t\t// Handle new invites from new/pre-existing clients, and people leaving the group\n\t\t\t\t\tvar items = o.items;\n\t\t\t\t\tif (items)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar i, len, item;\n\n\t\t\t\t\t\t// cleanup events list first (take only latest event for particular member)\n\t\t\t\t\t\tvar events = [];\n\t\t\t\t\t\tvar members = [];\n\t\t\t\t\t\t// order matters!\n\t\t\t\t\t\tfor (i = 0, len = items.length; i < len; i++)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\titem = items[i];\n\t\t\t\t\t\t\tswitch (item.type)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcase 'invite':\n\t\t\t\t\t\t\t\tcase 'swap':\n\t\t\t\t\t\t\t\tcase 'leave':\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tvar mem = item.member;\n\t\t\t\t\t\t\t\t\tvar memIndex = members.indexOf(mem);\n\n\t\t\t\t\t\t\t\t\tif (memIndex !== -1)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tdbg('>> Cleanup outdated event: ', events[memIndex]);\n\t\t\t\t\t\t\t\t\t\tmembers.splice(memIndex, 1);\n\t\t\t\t\t\t\t\t\t\tevents.splice(memIndex, 1);\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tmembers.push(mem);\n\t\t\t\t\t\t\t\t\tevents.push(item);\n\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// proceed with clean list of events\n\t\t\t\t\t\tvar user, swap;\n\t\t\t\t\t\tfor (i = 0, len = events.length; i < len; i++)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\titem = events[i];\n\t\t\t\t\t\t\t//console.log('UPDATE type=' + item.type);\n\t\t\t\t\t\t\tswitch (item.type)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcase 'invite':\n\t\t\t\t\t\t\t\tcase 'swap':\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tvar inv = item.invite;\n\n\t\t\t\t\t\t\t\t\t// See if we already have the user of the new 'invite'\n\t\t\t\t\t\t\t\t\tuser = findUser(item.member);\n\n\t\t\t\t\t\t\t\t\t//console.log('[INVITE]member=' + item.member + '(found=' + (user != null) + ') oldInvite=' + (user && user.invite) + ', newInvite=' + inv);\n\t\t\t\t\t\t\t\t\tif (user)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tif (user.invite === inv)\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tdbg('>> Skip existing invite: ', inv);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t// If so, queue to remove the old invite and replace with the new one\n\t\t\t\t\t\t\t\t\t\t\tswap = { user: user.id, invOld: user.invite, invNew: inv };\n\t\t\t\t\t\t\t\t\t\t\tdbg('>> Invite swap: ', swap);\n\t\t\t\t\t\t\t\t\t\t\tinvitesSwapped.push(swap);\n\t\t\t\t\t\t\t\t\t\t\tuser.invite = inv;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t// Otherwise, they are a new user to track\n\t\t\t\t\t\t\t\t\t\tdbg('>> ADD: ', inv);\n\t\t\t\t\t\t\t\t\t\tinvitesAdded.push(inv);\n\t\t\t\t\t\t\t\t\t\tusers.push({ id: item.member, invite: inv });\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tcase 'leave':\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t//console.log('[LEAVE]member=' + item.member + ' -- found=' + (user != null));\n\t\t\t\t\t\t\t\t\t// If user is leaving, remove their invite and user list entry\n\t\t\t\t\t\t\t\t\tuser = findUser(item.member);\n\t\t\t\t\t\t\t\t\tif (user)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tdbg('>> REMOVE: ', user.invite);\n\t\t\t\t\t\t\t\t\t\tinvitesRemoved.push(user.invite);\n\t\t\t\t\t\t\t\t\t\tusers.splice(users.indexOf(user), 1);\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tsendStatus(result, invitesAdded, invitesRemoved, invitesSwapped);\n\t\t}\n\n\t\tfunction parseGroupListResponse(result, invitesAdded, invitesRemoved, invitesSwapped)\n\t\t{\n\t\t\tvar i;\n\t\t\tvar o = result.response;\n\n\t\t\tnext = o.events + 1;\n\t\t\tlastUpdate = result.time;\n\n\t\t\t// Handle inline viewing configuration\n\t\t\tif (o.branding)\n\t\t\t{\n\t\t\t\t//TODO: pass brand cfg to the viewer\n\t\t\t}\n\n\t\t\tvar members = o.members;\n\t\t\tif (members)\n\t\t\t{\n\t\t\t\tvar len = members.length;\n\t\t\t\tvar u, mem;\n\t\t\t\t//console.log('members:' + JSON.stringify(members, null, '    '));\n\t\t\t\t// Sync up existing user list with their current invites\n\t\t\t\tfor (i = users.length - 1; i >= 0; i--)\n\t\t\t\t{\n\t\t\t\t\tu = users[i];\n\t\t\t\t\tfor (var j = len - 1; j >= 0; j--)\n\t\t\t\t\t{\n\t\t\t\t\t\tmem = members[j];\n\n\t\t\t\t\t\tif (u.id === mem.id)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// Check if we have a new invite code for an existing user\n\t\t\t\t\t\t\tif (u.invite !== mem.invite)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvar swap = { user: u.id, invOld: u.invite, invNew: mem.invite };\n\t\t\t\t\t\t\t\tdbg('** Invite swap: ', swap);\n\t\t\t\t\t\t\t\tu.invite = mem.invite;\n\t\t\t\t\t\t\t\tinvitesSwapped.push(swap);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// User still exists in the current list, so don't remove\n\t\t\t\t\t\t\tu = null;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// If not in the new list, remove the user\n\t\t\t\t\tif (u)\n\t\t\t\t\t{\n\t\t\t\t\t\tdbg('** REMOVE: ', u.invite);\n\t\t\t\t\t\tinvitesRemoved.push(u.invite);\n\t\t\t\t\t\tusers.splice(i, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Locate and add any new users\n\t\t\t\tfor (i = len - 1; i >= 0; i--)\n\t\t\t\t{\n\t\t\t\t\tmem = members[i];\n\n\t\t\t\t\t// Don't add a new user if they already exist in the current user list\n\t\t\t\t\tif (findUser(mem.id))\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (mem.invite)\n\t\t\t\t\t{\n\t\t\t\t\t\t//console.log('id=' + cli.id + ', invite=' + cli.invite);\n\t\t\t\t\t\tusers.push(mem);\n\t\t\t\t\t\tdbg('** ADD: ', mem.invite);\n\t\t\t\t\t\tinvitesAdded.push(mem.invite);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction findUser(id)\n\t\t{\n\t\t\tfor (var j = users.length - 1, userLocated = null; j >= 0; j--)\n\t\t\t{\n\t\t\t\tvar user = users[j];\n\t\t\t\tif (user.id === id)\n\t\t\t\t{\n\t\t\t\t\tuserLocated = user;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn userLocated;\n\t\t}\n\n\n\t\t// Fill demoshuttle drivers\n\t\tif (cfg.demoDriversCount)\n\t\t{\n\t\t\t// Allowed range is [0-7]\n\t\t\tvar driversCount = Math.max(0, Math.min(cfg.demoDriversCount, 7));\n\t\t\tvar demoshuttleMembers = cDemoGroups.demoshuttle.response.members;\n\t\t\tfor (var i = driversCount - 1; i >= 0; i--)\n\t\t\t{\n\t\t\t\tdemoshuttleMembers.push({ id: 'DNA7-4HDZ-03WH' + i, invite: 'demobot' + i })\n\t\t\t}\n\t\t}\n\t}\n\n\tcDemoGroups = {\n\t\tbryanaroundseattle: {\n\t\t\tstatus: true,\n\t\t\tresponse: {\n\t\t\t\ttype: 'group',\n\t\t\t\tid: 119,\n\t\t\t\tevents: 1,\n\t\t\t\tmembers: [{ id: 'DNA7-4HDZ-03WHE', invite: 'demobot0' }],\n\t\t\t\tpublic: true,\n\t\t\t\tname: 'BryanTheRussel'\n\t\t\t},\n\t\t\ttime: Date.now()\n\t\t},\n\t\tseattleteam: {\n\t\t\tstatus: true,\n\t\t\tresponse: {\n\t\t\t\ttype: 'group',\n\t\t\t\tid: 119,\n\t\t\t\tevents: 1,\n\t\t\t\tmembers: [\n\t\t\t\t\t{ id: 'DNA7-4HDZ-03WH0', invite: 'demobot0' },\n\t\t\t\t\t{ id: 'DNA7-4HDZ-03WH1', invite: 'demobot1' },\n\t\t\t\t\t{ id: 'DNA7-4HDZ-03WH2', invite: 'demobot2' },\n\t\t\t\t\t{ id: 'DNA7-4HDZ-03WH3', invite: 'demobot3' },\n\t\t\t\t\t{ id: 'DNA7-4HDZ-03WH4', invite: 'demobot4' },\n\t\t\t\t\t{ id: 'DNA7-4HDZ-03WH5', invite: 'demobot5' },\n\t\t\t\t\t{ id: 'DNA7-4HDZ-03WH6', invite: 'demobot6' },\n\t\t\t\t\t{ id: 'DNA7-4HDZ-03WH7', invite: 'demobot7' }\n\t\t\t\t],\n\t\t\t\tpublic: true,\n\t\t\t\tname: 'SeattleTeam'\n\t\t\t},\n\t\t\ttime: Date.now()\n\t\t},\n\t\tdemoshuttle: {\n\t\t\tstatus: true,\n\t\t\tresponse: {\n\t\t\t\ttype: 'group',\n\t\t\t\tid: 119,\n\t\t\t\tevents: 1,\n\t\t\t\tmembers: [],\n\t\t\t\tpublic: true,\n\t\t\t\tname: 'DemoShuttle',\n\t\t\t\tbranding: {\n\t\t\t\t\torg_id: -999\n\t\t\t\t}\n\t\t\t},\n\t\t\ttime: Date.now()\n\t\t}\n\t};\n\n\tmodule.exports = PublicGroup;\n});\n\n","define('glympse-adapter/adapter/PublicGroupController',['require','exports','module','glympse-adapter/lib/utils','glympse-adapter/lib/rafUtils','glympse-adapter/lib/ajax','glympse-adapter/GlympseAdapterDefines','glympse-adapter/adapter/models/PublicGroup'],function(require, exports, module)\n{\n\t'use strict';\n\n\t// defines\n\tvar lib = require('glympse-adapter/lib/utils');\n\tvar raf = require('glympse-adapter/lib/rafUtils');\n\tvar ajax = require('glympse-adapter/lib/ajax');\n\tvar Defines = require('glympse-adapter/GlympseAdapterDefines');\n\tvar PublicGroup = require('glympse-adapter/adapter/models/PublicGroup');\n\n\tvar m = Defines.MSG;\n\tvar r = Defines.CORE.REQUESTS;\n\tvar rl = Defines.CORE.REQUESTS_LOCAL;\n\n\t// Exported class\n\tfunction PublicGroupController(controller, cfg)\n\t{\n\t\t// consts\n\t\tvar dbg = lib.dbg('PublicGroupController', cfg.dbg);\n\t\tvar svr = cfg.svcEnRoute;\n\n\t\tvar cDemoOrgObjects = {};\n\n\t\tvar PG_POLL_INTERVAL = 15000;\n\n\t\t// state\n\t\tvar account = cfg.account;\n\t\tvar timerRequest;\n\n\t\tvar groups = {};\n\t\tvar groupsToLoad = [];\n\t\tvar pollGroups = [];\n\n\t\tvar that = this;\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// PUBLICS\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\t\tthis.notify = function(msg, args)\n\t\t{\n\t\t\tswitch (msg)\n\t\t\t{\n\t\t\t\tcase m.AccountLoginStatus:\n\t\t\t\t{\n\t\t\t\t\taccount = args.account;\n\t\t\t\t\taccountInitComplete(args);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase m.AccountDeleteStatus:\n\t\t\t\t{\n\t\t\t\t\taccountDeleteComplete();\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase m.GroupLoaded:\n\t\t\t\tcase m.GroupStatus:\n\t\t\t\t{\n\t\t\t\t\tcontroller.notify(msg, args);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tdefault:\n\t\t\t\t{\n\t\t\t\t\tdbg('Unknown msg: \"' + msg + '\"', args);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t};\n\n\t\tthis.cmd = function(cmd, args)\n\t\t{\n\t\t\tswitch (cmd)\n\t\t\t{\n\t\t\t\tcase r.addGroup:\n\t\t\t\t{\n\t\t\t\t\tif (account)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn loadGroup(args);\n\t\t\t\t\t}\n\n\t\t\t\t\tgroupsToLoad.push(args);\n\t\t\t\t\treturn loadGroup(args, true);\n\t\t\t\t}\n\n\t\t\t\tcase r.removeGroup:\n\t\t\t\t{\n\t\t\t\t\t// args: { name: groupname_to_remove, removeInvites: true|false }\n\n\t\t\t\t\tvar invites;\n\t\t\t\t\tvar groupName = ((args && args.name) || '').toLowerCase();\n\t\t\t\t\tvar status = (groupName && groups.hasOwnProperty(groupName));\n\t\t\t\t\tvar removeInvites = (status && args.removeInvites) || undefined;\n\n\t\t\t\t\tif (status)\n\t\t\t\t\t{\n\t\t\t\t\t\tfor (var i = pollGroups.length - 1; i >= 0; i--)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (pollGroups[i].getName() === groupName)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tpollGroups.splice(i, 1);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tinvites = groups[groupName].getInvites();\n\n\t\t\t\t\t\t// Optionally remove invites from the map as well\n\t\t\t\t\t\tif (removeInvites)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// Need to ensure this callback occurs *after* the current thread of execution completes\n\t\t\t\t\t\t\traf.setTimeout(function()\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcontroller.notify(Defines.MAP.REQUESTS.removeInvites, invites.join(';'));\n\t\t\t\t\t\t\t}, 10);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdelete groups[groupName];\n\t\t\t\t\t\tif (timerRequest && pollGroups.length === 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\traf.clearInterval(timerRequest);\n\t\t\t\t\t\t\ttimerRequest = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn { status: status, group: groupName, invites: invites, removingInvites: removeInvites };\n\t\t\t\t}\n\n\t\t\t\tcase r.getGroups:\n\t\t\t\t{\n\t\t\t\t\tvar arr = [];\n\t\t\t\t\tvar argsArr;\n\n\t\t\t\t\t// Ensure we are comparing to all lower-cased group names\n\t\t\t\t\tif (Array.isArray(args))\n\t\t\t\t\t{\n\t\t\t\t\t\targsArr = []\n\t\t\t\t\t\tfor (var i = args.length - 1; i >= 0; i--)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (args[i])\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\targsArr.push(args[i].toLowerCase());\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (var key in groups)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (groups.hasOwnProperty(key) &&\n\t\t\t\t\t\t   (!args || (typeof args === 'string' && args.toLowerCase() === key) || (argsArr && argsArr.indexOf(key) >= 0))\n\t\t\t\t\t\t   )\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tarr.push(groups[key].toJSON());\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn arr;\n\t\t\t\t}\n\n\t\t\t\tcase r.getOrgObjects:\n\t\t\t\t{\n\t\t\t\t\tgetOrgObjects(args);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tdefault:\n\t\t\t\t{\n\t\t\t\t\tdbg('Unknown cmd: \"' + cmd + '\" - ', args);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// UTILITY\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\t\tfunction loadGroup(groupInfo, validate)\n\t\t{\n\t\t\tvar name;\n\t\t\tvar header;\n\n\t\t\tif (typeof groupInfo === 'string')\n\t\t\t{\n\t\t\t\t// load from scratch\n\t\t\t\tname = groupInfo;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t// given the initial group header\n\t\t\t\tname = groupInfo.name;\n\t\t\t\theader = groupInfo;\n\t\t\t}\n\n\t\t\tif (!name)\n\t\t\t{\n\t\t\t\tdbg('ERROR no group name defined');\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tname = name.toLowerCase();\n\n\t\t\tif (groups[name])\n\t\t\t{\n\t\t\t\tdbg('ERROR group \"' + name + '\" already loaded');\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (validate)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tvar group = new PublicGroup(that, account, name, cfg);\n\n\t\t\tgroups[name] = group;\n\n\t\t\t// Initial group with a header = real group\n\t\t\tif (header)\n\t\t\t{\n\t\t\t\tgroup.setData(header);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (group.request())\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tpollGroups.push(group);\n\n\t\t\tif (!timerRequest)\n\t\t\t{\n\t\t\t\ttimerRequest = raf.setInterval(makeGroupRequests, PG_POLL_INTERVAL);\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\n\t\t/**\n\t\t * Fetch org objects\n\t\t * @param {Object} reqParams\n\t\t * @param {number} reqParams.orgId\n\t\t * @param {string} [reqParams.objType]\n\t\t */\n\t\tfunction getOrgObjects(reqParams)\n\t\t{\n\t\t\tif (!reqParams || !reqParams.orgId)\n\t\t\t{\n\t\t\t\tvar error = '\"orgId\" request param must be specified!';\n\n\t\t\t\tdbg(error, reqParams, 3);\n\n\t\t\t\tcontroller.notify(m.OrgObjects, {\n\t\t\t\t\tstatus: false,\n\t\t\t\t\terror: error\n\t\t\t\t});\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar demoObjects = cDemoOrgObjects[reqParams.orgId];\n\t\t\tif (demoObjects)\n\t\t\t{\n\t\t\t\tcontroller.notify(m.OrgObjects, demoObjects);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar url = svr + 'org/' + reqParams.orgId + '/objects';\n\t\t\tvar data;\n\n\t\t\tif (reqParams.objType)\n\t\t\t{\n\t\t\t\tdata = { type: encodeURIComponent(reqParams.objType) };\n\t\t\t}\n\n\t\t\tajax.get(url, data, { account: account, useGlympseAuthHeader: true })\n\t\t\t\t.then(function(result)\n\t\t\t\t{\n\t\t\t\t\tcontroller.notify(m.OrgObjects, result);\n\t\t\t\t});\n\t\t}\n\n\t\tfunction makeGroupRequests()\n\t\t{\n\t\t\tvar len = pollGroups.length;\n\n\t\t\tif (len === 0 && timerRequest)\n\t\t\t{\n\t\t\t\traf.clearInterval(timerRequest);\n\t\t\t\ttimerRequest = null;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// FIXME: Make this a batch call instead\n\t\t\tfor (var i = 0; i < len; i++)\n\t\t\t{\n\t\t\t\tpollGroups[i].request();\n\t\t\t}\n\t\t}\n\n\t\tfunction accountInitComplete(args)\n\t\t{\n\t\t\tif (!account)\n\t\t\t{\n\t\t\t\tdbg('[accountInitComplete] - authToken unavailable', args);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Load any pending groups\n\t\t\tfor (var i = 0, len = groupsToLoad.length; i < len; i++)\n\t\t\t{\n\t\t\t\tloadGroup(groupsToLoad[i]);\n\t\t\t}\n\n\t\t\tgroupsToLoad = [];\n\t\t}\n\n\t\tfunction accountDeleteComplete()\n\t\t{\n\t\t\taccount = null;\n\t\t\tif (timerRequest)\n\t\t\t{\n\t\t\t\traf.clearInterval(timerRequest);\n\t\t\t\ttimerRequest = null;\n\t\t\t}\n\t\t}\n\n\t\tcDemoOrgObjects[-999] = {\n\t\t\tstatus: true,\n\t\t\tresponse: [\n\t\t\t\t{\n\t\t\t\t\thierarchy: [],\n\t\t\t\t\torg_id: -999,\n\t\t\t\t\twaypoints: cfg.demoWaypoints || [\n\t\t\t\t\t\t{ name: 'LAX Terminal #5', lat: 33.9426841, lng: -118.4046578, stopTime: 120000 },\n\t\t\t\t\t\t{ name: 'LAX Terminal #3', lat: 33.9438901, lng: -118.4060479, stopTime: 240000 },\n\t\t\t\t\t\t{ name: 'LAX Terminal #1', lat: 33.9451076, lng: -118.4032515 }, //No stopTime to test defaultStopTime\n\t\t\t\t\t\t{ name: 'Holiday Inn Los Angeles Gateway', lat: 33.8507901, lng: -118.306608 } //HomeBase doesn't need stopTime\n\t\t\t\t\t],\n\t\t\t\t\tdefaultStopTime: 180000,\n\t\t\t\t\tlast_modified_by: 0,\n\t\t\t\t\tgroup_name: 'demoshuttle',\n\t\t\t\t\taccess: 'public',\n\t\t\t\t\tlast_modified: 1498017300352,\n\t\t\t\t\tcreated_time: 1498017215788,\n\t\t\t\t\tcreator_agent_id: 0,\n\t\t\t\t\t_id: 2,\n\t\t\t\t\ttype: 'route'\n\t\t\t\t}\n\t\t\t],\n\t\t\ttime: Date.now()\n\t\t};\n\t}\n\n\tmodule.exports = PublicGroupController;\n});\n\n","define('glympse-adapter/adapter/CoreController',['require','exports','module','glympse-adapter/lib/utils','glympse-adapter/lib/ajax','glympse-adapter/GlympseAdapterDefines','glympse-adapter/adapter/models/Account','glympse-adapter/adapter/PublicGroupController'],function(require, exports, module)\n{\n\t'use strict';\n\n\t// defines\n\tvar lib = require('glympse-adapter/lib/utils');\n\tvar ajax = require('glympse-adapter/lib/ajax');\n\tvar Defines = require('glympse-adapter/GlympseAdapterDefines');\n\n\tvar m = Defines.MSG;\n\tvar r = Defines.CORE.REQUESTS;\n\tvar rl = Defines.CORE.REQUESTS_LOCAL;\n\n\tvar Account = require('glympse-adapter/adapter/models/Account');\n\tvar GroupController = require('glympse-adapter/adapter/PublicGroupController');\n\n\n\t// Exported class\n\tfunction CoreController(controller, cfg)\n\t{\n\t\t// consts\n\t\tvar dbg = lib.dbg('CoreController', cfg.dbg);\n\n\t\tvar svr = cfg.svcGlympse;\n\n\t\t// state\n\t\tvar account = new Account(this, cfg);\n\t\tvar groupController;\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// PUBLICS\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\t\tthis.init = function()\n\t\t{\n\t\t\taccount.init();\n\t\t};\n\n\t\tthis.notify = function(msg, args)\n\t\t{\n\t\t\tswitch (msg)\n\t\t\t{\n\t\t\t\tcase m.AccountLoginStatus:\n\t\t\t\t{\n\t\t\t\t\tif (args.status && groupController)\n\t\t\t\t\t{\n\t\t\t\t\t\tgroupController.notify(msg, args);\n\t\t\t\t\t}\n\n\t\t\t\t\tcontroller.notify(msg, args);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase m.AccountDeleteStatus:\n\t\t\t\t{\n\t\t\t\t\tif (groupController)\n\t\t\t\t\t{\n\t\t\t\t\t\tgroupController.notify(msg, args);\n\t\t\t\t\t}\n\n\t\t\t\t\tcontroller.notify(msg, args);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase m.AccountCreateStatus:\n\t\t\t\tcase m.UserNameUpdateStatus:\n\t\t\t\tcase m.UserAvatarUpdateStatus:\n\t\t\t\tcase m.UserInfoStatus:\n\t\t\t\tcase m.CreateRequestStatus:\n\t\t\t\tcase m.GroupLoaded:\n\t\t\t\tcase m.GroupStatus:\n\t\t\t\tcase m.OrgObjects:\n\t\t\t\t{\n\t\t\t\t\tcontroller.notify(msg, args);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\t// FIXME: Generalize this in the default handler\n\t\t\t\tcase Defines.MAP.REQUESTS.removeInvites:\n\t\t\t\t{\n\t\t\t\t\tvar mapSvc = controller.getService('map');\n\t\t\t\t\tif (mapSvc)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn mapSvc.cmd(msg, args);\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tdefault:\n\t\t\t\t{\n\t\t\t\t\tdbg('Unknown msg: \"' + msg + '\"', args);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis.cmd = function(cmd, args)\n\t\t{\n\t\t\tswitch (cmd)\n\t\t\t{\n\t\t\t\tcase rl.hasAccount:\n\t\t\t\t{\n\t\t\t\t\treturn account.hasAccount();\n\t\t\t\t}\n\n\t\t\t\tcase r.addGroup:\n\t\t\t\tcase r.getGroups:\n\t\t\t\tcase r.removeGroup:\n\t\t\t\t{\n\t\t\t\t\tif (!groupController)\n\t\t\t\t\t{\n\t\t\t\t\t\tgroupController = new GroupController(this, cfg);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn groupController.cmd(cmd, args);\n\t\t\t\t}\n\n\t\t\t\tcase r.getOrgObjects:\n\t\t\t\t{\n\t\t\t\t\tgroupController.cmd(cmd, args);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase rl.accountCreate:\n\t\t\t\t{\n\t\t\t\t\taccount.create();\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase rl.generateAuthToken:\n\t\t\t\t{\n\t\t\t\t\taccount.generateToken();\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase rl.setUserName:\n\t\t\t\t{\n\t\t\t\t\taccount.setName(args);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase rl.setUserAvatar:\n\t\t\t\t{\n\t\t\t\t\taccount.setAvatar(args);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase rl.getUserInfo:\n\t\t\t\t{\n\t\t\t\t\taccount.getUserInfo(args);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase rl.createRequest:\n\t\t\t\t{\n\t\t\t\t\taccount.createRequest(args);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase rl.accountDelete:\n\t\t\t\t{\n\t\t\t\t\taccount.delete();\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase r.getEtaInfo:\n\t\t\t\t{\n\t\t\t\t\tgetEtaInfo(args);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis.getAccount = function()\n\t\t{\n\t\t\treturn account;\n\t\t};\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// UTILITY\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\t\t/**\n\t\t * Fetch ETA information to the given points\n\t\t *\n\t\t * @param {Object[]} routes - array of routes for which ETAs are calculated.\n\t\t *\tEach object must have the following properties:\n\t\t *\t- \"start\" - start point in format { lat: number, lng: number }\n\t\t *\t- \"end\" - end point in format { lat: number, lng: number }\n\t\t *\t- \"waypoints\" - array of waypoints between start and end in format [{ lat: number, lng: number }, ...]\n\t\t */\n\t\tfunction getEtaInfo(routes)\n\t\t{\n\t\t\tif (!routes || !routes.length)\n\t\t\t{\n\t\t\t\tdbg('ETA Info: no routes provided, nothing to calculate');\n\n\t\t\t\tcontroller.notify(m.EtaInfo, {\n\t\t\t\t\tstatus: true,\n\t\t\t\t\tresult: []\n\t\t\t\t});\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar routeUrl = 'maps/route?';\n\t\t\tvar requests = [];\n\t\t\tvar route, start, end, waypoints, waypoint, wpList, params;\n\n\t\t\tfor (var i = 0, len = routes.length; i < len; i++)\n\t\t\t{\n\t\t\t\troute = routes[i];\n\t\t\t\tstart = route.start;\n\t\t\t\tend = route.end;\n\t\t\t\tparams = {\n\t\t\t\t\tstart: start.lat + ',' + start.lng,\n\t\t\t\t\tend: end.lat + ',' + end.lng,\n\t\t\t\t\tfields: 'summary'\n\t\t\t\t};\n\n\t\t\t\twaypoints = route.waypoints;\n\t\t\t\tif (waypoints && waypoints.length)\n\t\t\t\t{\n\t\t\t\t\twpList = [];\n\t\t\t\t\tfor (var j = 0, wpLen = waypoints.length; j < wpLen; j++)\n\t\t\t\t\t{\n\t\t\t\t\t\twaypoint = waypoints[j];\n\t\t\t\t\t\twpList.push(waypoint.lat + ',' + waypoint.lng);\n\t\t\t\t\t}\n\t\t\t\t\tparams.waypoints = wpList.join('|');\n\t\t\t\t}\n\n\t\t\t\trequests.push({\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\turl: routeUrl + $.param(params)\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tajax.batch(svr + 'batch', requests, account)\n\t\t\t\t.then(function(responses)\n\t\t\t\t{\n\t\t\t\t\tvar result = [];\n\t\t\t\t\tvar res, eta;\n\t\t\t\t\tfor (var i = 0, len = responses.length; i < len; i++)\n\t\t\t\t\t{\n\t\t\t\t\t\tres = (responses[i] || {}).result;\n\t\t\t\t\t\teta = null;\n\n\t\t\t\t\t\tif (res.status)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\teta = (((res.response || {}).summary || {}).travel_time || 0);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tresult.push(eta);\n\t\t\t\t\t}\n\n\t\t\t\t\tdbg('> ETA results:', result);\n\n\t\t\t\t\tcontroller.notify(m.EtaInfo, result);\n\t\t\t\t});\n\t\t}\n\n\t}\n\n\tmodule.exports = CoreController;\n});\n\n","define('glympse-adapter/adapter/models/GlympseInvite',['require','exports','module','glympse-adapter/lib/utils','glympse-adapter/lib/ajax','glympse-adapter/GlympseAdapterDefines'],function(require, exports, module)\n{\n    'use strict';\n\n\tvar lib = require('glympse-adapter/lib/utils');\n\tvar ajax = require('glympse-adapter/lib/ajax');\n\tvar Defines = require('glympse-adapter/GlympseAdapterDefines');\n\tvar m = Defines.MSG;\n\tvar cModuleId = 'GlympseInvite';\n\n\n\t// Exported class\n\tfunction GlympseInvite(controller, idInvite, account, cfg)\n\t{\n\t\t// consts\n\t\tvar dbg = lib.dbg(cModuleId, cfg.dbg);\n\t\tvar svr = cfg.svcGlympse;\n\t\tvar inviteUrl = (svr + 'invites/' + idInvite);\n\t\tvar cMaxAttempts = 3;\n\n\t\t// state\n\t\tvar next = 0;\n\t\tvar data;\n\t\tvar error;\n\t\tvar loaded = false;\n\t\tvar that = this;\n\t\tvar inviteParams = { 'no_count': true, 'next': next };\n\n\t\t// TODO: Just map data props directly??\n\t\t//\t---> Only want immediate non-Objects/Arrays\n\t\tvar props = [ 'first'\n\t\t\t\t\t, 'last'\n\t\t\t\t\t, 'next'\n\t\t\t\t\t, 'properties'\n\t\t\t\t\t, 'type'\n\t\t\t\t\t];\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// PROPERTIES\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\t\t// NOTE: some properties created via lib.mapProps\n\n\t\tthis.isLoaded = function()\n\t\t{\n\t\t\treturn loaded;\n\t\t};\n\n\t\tthis.getIdInvite = function()\n\t\t{\n\t\t\treturn idInvite;\n\t\t};\n\n\t\tthis.getError = function()\n\t\t{\n\t\t\treturn error;\n\t\t};\n\n\t\tthis.getData = function()\n\t\t{\n\t\t\treturn data;\n\t\t};\n\n\t\t// NOTE: make available in case of invalid invite\n\t\tthis.getReference = function()\n\t\t{\n\t\t\treturn data && data.reference;\n\t\t};\n\n\t\tthis.setData = function(val)\n\t\t{\n\t\t\tdata = val;\n\t\t\tdata.location = null;\t// Don't cache location!\n\t\t\tlib.mapProps(this, props, data);\n\n\t\t\t//dbg('Invite \"' + this.getIdInvite() + '\" loaded (reference: \"' + this.getReference() + '\")');\n\t\t};\n\n\t\tthis.setAccount = function(val)\n\t\t{\n\t\t\taccount = val;\n\t\t};\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// PUBLICS\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\t\tthis.load = function()\n\t\t{\n\t\t\tif (!idInvite || !account)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// Kick off invite load\n\t\t\terror = null;\n\n\t\t\tloadInvite();\n\n\t\t\treturn true;\n\t\t};\n\n\t\tthis.toString = function()\n\t\t{\n\t\t\treturn '[' + cModuleId + ']: ' + JSON.stringify(data);\n\t\t};\n\n\t\tthis.toJSON = function()\n\t\t{\n\t\t\treturn data || error;\n\t\t};\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// UTILITY\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\t\tfunction loadInvite()\n\t\t{\n\t\t\tcontroller.notify(m.InviteInit, idInvite);\n\n\t\t\tajax.get(inviteUrl, inviteParams, account)\n\t\t\t\t.then(function(result)\n\t\t\t\t{\n\t\t\t\t\tif (result.status)\n\t\t\t\t\t{\n\t\t\t\t\t\tloaded = true;\n\t\t\t\t\t\tthat.setData(result.response);\n\t\t\t\t\t}\n\t\t\t\t\t// max attempts\n\t\t\t\t\telse if (result.info)\n\t\t\t\t\t{\n\t\t\t\t\t\t// left as it was before for now\n\t\t\t\t\t\terror = {\n\t\t\t\t\t\t\terror: 'load_failure',\n\t\t\t\t\t\t\terror_detail: 'Failed ' + cMaxAttempts + ' attempts'\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\terror = result.response;\n\t\t\t\t\t\terror.id = lib.normalizeInvite(idInvite);\n\t\t\t\t\t}\n\n\t\t\t\t\tcontroller.notify(m.InviteReady, that);\n\t\t\t\t});\n\t\t}\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// CTOR\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t}\n\n\t// GlympseInvite defines\n\n\n\tmodule.exports = GlympseInvite;\n});\n\n","define('glympse-adapter/adapter/GlympseLoader',['require','exports','module','glympse-adapter/lib/utils','glympse-adapter/GlympseAdapterDefines','glympse-adapter/adapter/models/Account','glympse-adapter/adapter/models/GlympseInvite'],function(require, exports, module)\n{\n    'use strict';\n\n\tvar lib = require('glympse-adapter/lib/utils');\n\tvar Defines = require('glympse-adapter/GlympseAdapterDefines');\n\tvar m = Defines.MSG;\n\n\t// Glympse-specific\n\tvar Account = require('glympse-adapter/adapter/models/Account');\n\tvar GlympseInvite = require('glympse-adapter/adapter/models/GlympseInvite');\n\n\n\t// Exported class\n\tfunction GlympseLoader(controller, cfg)\n\t{\n\t\t// consts\n\t\tvar dbg = lib.dbg('GlympseLoader', cfg.dbg);\n\n\t\t// state\n\t\tvar that = this;\n\t\tvar account = cfg.account;\n\t\tvar idInvite;\n\t\tvar invite;\n\t\tvar initialized = false;\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// PUBLICS\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\t\tthis.init = function(inviteToLoad)\n\t\t{\n\t\t\tidInvite = inviteToLoad;\n\t\t\tinitialized = true;\n\n\t\t\tif (account)\n\t\t\t{\n\t\t\t\taccountInitComplete(account);\n\t\t\t}\n\t\t};\n\n\n\t\tthis.notify = function(msg, args)\n\t\t{\n\t\t\tswitch (msg)\n\t\t\t{\n\t\t\t\tcase m.AccountLoginStatus:\n\t\t\t\t{\n\t\t\t\t\taccount = args.account;\n\t\t\t\t\taccountInitComplete(args);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase m.AccountDeleteStatus:\n\t\t\t\t{\n\t\t\t\t\taccount = null;\n\t\t\t\t\tif (invite)\n\t\t\t\t\t{\n\t\t\t\t\t\tinvite.setAccount(account);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase m.InviteInit:\n\t\t\t\t{\n\t\t\t\t\tcontroller.notify(msg, args);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase m.InviteReady:\n\t\t\t\t{\n\t\t\t\t\tcontroller.notify(msg, args);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tdefault:\n\t\t\t\t{\n\t\t\t\t\tdbg('Unknown msg: \"' + msg + '\"', args);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t};\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// UTILITY\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\t\tfunction accountInitComplete(info)\n\t\t{\n\t\t\tvar sig = '[accountInitComplete] - ';\n\n\t\t\tif (!initialized)\n\t\t\t{\n\t\t\t\tdbg(sig + 'not initialized', info);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!account)\n\t\t\t{\n\t\t\t\tdbg(sig + 'authToken unavailable', info);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t//dbg('Auth token: ' + account.getToken() + ' -- ' + (info && info.token));\n\t\t\tdbg(sig + '[' + ((cfg.isAnon) ? 'ANON' : 'ACCT') + '] Token active. Loading Glympse invite \"' + idInvite + '\"');\n\n\t\t\tif (invite)\n\t\t\t{\n\t\t\t\tinvite.setAccount(account);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tinvite = new GlympseInvite(that, idInvite, account, cfg);\n\t\t\t}\n\n\t\t\tif (!invite.isLoaded())\n\t\t\t{\n\t\t\t\tinvite.load();\n\t\t\t}\n\t\t}\n\t}\n\n\n\tmodule.exports = GlympseLoader;\n});\n\n","// App entry point\ndefine('glympse-adapter/adapter/Client',['require','exports','module','glympse-adapter/lib/utils','oasis','glympse-adapter/GlympseAdapterDefines','glympse-adapter/adapter/ViewerMonitor','glympse-adapter/adapter/CardsController','glympse-adapter/adapter/CoreController','glympse-adapter/adapter/GlympseLoader','glympse-adapter/adapter/models/Account'],function(require, exports, module)\n{\n\t'use strict';\n\n\t// imports\n\tvar lib = require('glympse-adapter/lib/utils');\n\tvar Oasis = require('oasis');\n\tvar Defines = require('glympse-adapter/GlympseAdapterDefines');\n\tvar ViewerMonitor = require('glympse-adapter/adapter/ViewerMonitor');\n\tvar CardsController = require('glympse-adapter/adapter/CardsController');\n\tvar CoreController = require('glympse-adapter/adapter/CoreController');\n\tvar GlympseLoader = require('glympse-adapter/adapter/GlympseLoader');\n\tvar Account = require('glympse-adapter/adapter/models/Account');\n\n\tvar s = Defines.STATE;\n\tvar m = Defines.MSG;\n\tvar coreReq = Defines.CORE.REQUESTS;\n\tvar mStateUpdate = m.StateUpdate;\t// Used alot\n\n\tfunction Client(controller, oasisLocal, app, cfg, elementViewer)\n\t{\n\t\tvar cfgApp = (cfg && cfg.app) || {};\n\t\tvar cfgAdapter = (cfg && cfg.adapter) || {};\n\t\tvar cfgViewer = (cfg && cfg.viewer) || {};\n\n\t\tvar dbg = lib.dbg('Client', cfgApp.dbg);\n\n\t\tvar that = this;\n\n\t\t// state\n\t\tvar account;\n\t\tvar availableServices = {};\n\t\tvar cardsController;\n\t\tvar cardsInitialized = false;\n\t\tvar coreController;\n\t\tvar cfgMonitor = { dbg: cfgApp.dbg, viewer: elementViewer };\n\t\tvar glympseLoader;\n\t\tvar invitesCard;\n\t\tvar invitesTicket;\n\t\tvar invitesReferences = {};\n\t\tvar mapCardTicketInvites = {};\n\t\tvar viewerMonitor;\n\n\t\tvar progressCurrent = 0;\n\t\tvar progressTotal = 0;\n\n\t\tvar connectedOasis = false;\n\t\tvar connectQueue = [];\n\t\tvar connectQueueMaxSize = (cfgAdapter.hostQueueMaxSize !== undefined) ? cfgAdapter.hostQueueMaxSize : -1;\n\t\tvar connectQueueEnabled = (connectQueueMaxSize !== 0);\n\n\t\tvar port;\n\t\tvar cardsMode = cfgAdapter.cardsMode;\n\t\tvar publishedConfig = {};\n\n\t\tvar initialized = false;\n\t\tvar apiKey = cfgAdapter.apiKey || 'nXQ44D38OdVzEC34';\t// sand/prod: application/79 --> prod org 20715 or 24778\n\n\n\t\tcfgAdapter.apiKey = apiKey;\n\t\tcfgAdapter.dbg = cfgApp.dbg || cfgAdapter.dbg;\n\t\tcfgAdapter.svcGlympse = (cfgAdapter.svcGlympse || ('https://api.' + ((cfgAdapter.sandbox) ? 'sandbox.' : '') + 'glympse.com/v2/'));\n\t\tcfgAdapter.svcEnRoute = (cfgAdapter.svcEnRoute || ('https://' + ((cfgAdapter.sandbox) ? 's-' : '') + 'api.enterprise.glympse.com/api/v1/'));\n\n\t\t// Sync up viewer settings\n\t\tcfgViewer.apiKey = apiKey;\n\t\tcfgViewer.services = cfgAdapter.svcGlympse;\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// PROPERTIES\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\t\t// Disabled for now.. all through front-door.\n\t\t// Add to MAP.REQUESTS_LOCAL for additional client-only interfaces\n\t\t//this.getViewer = function()\n\t\t//{\n\t\t//\treturn viewerMonitor.getViewer();\n\t\t//};\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// PUBLICS\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\t\tthis.getService = function(id)\n\t\t{\n\t\t\treturn availableServices[id];\n\t\t};\n\n\t\t/**\n\t\t * Set up the client portion of the adapter\n\t\t * @param settings Object to advertise to any connecting adapter running in host-mode. This object is updated with all of the available interfaces/end-points.\n\t\t */\n\t\tthis.init = function(settings)\n\t\t{\n\t\t\tvar card = cfgAdapter.card;\n\t\t\tvar t = cfgAdapter.t;\n\n\t\t\tvar cfgClient = { consumers: {} };\n\t\t\tvar events = {};\n\t\t\tvar requests = {};\n\n\t\t\tvar cleanInvites = lib.cleanInvites;\n\n\t\t\tinvitesCard = (card) ? cleanInvites([ card ]) : [];\n\t\t\tinvitesTicket = cleanInvites(splitMulti(t));\n\n\t\t\tevents.setUserInfo = setUserInfo;\t// Dummy/test\n\n\t\t\t$.extend(settings, { invitesCard: invitesCard, invitesGlympse: invitesTicket });\n\n\n\t\t\tcoreController = new CoreController(this, cfgAdapter);\n\t\t\tcardsController = new CardsController(this, cfgAdapter);\n\t\t\tviewerMonitor = new ViewerMonitor(this, cfgMonitor);\n\n\t\t\t// API namespaced endpoints\n\t\t\tvar svcs = [\n\t\t\t\t{ id: 'MAP', targ: viewerMonitor },\n\t\t\t\t{ id: 'CARDS', targ: cardsController },\n\t\t\t\t{ id: 'CORE', targ: coreController }\n\t\t\t];\n\n\t\t\tvar intInterfaces = { map: {}, cards: {}, core: {}, app: {} };\n\n\t\t\tintInterfaces.app.getConfig = getConfig;\n\t\t\tintInterfaces.app.sendOasisMessage = sendOasisMessage;\n\n\t\t\t// FIXME: This shouldn't go here\n\t\t\tintInterfaces.map[ViewerMonitor.GetInviteProperties] = getInviteProperties;\n\t\t\tintInterfaces.map[ViewerMonitor.GetInviteProperty] = getInviteProperty;\n\n\t\t\t// Defines.SVC_ID.REQUESTS specifies the various API endpoints\n\t\t\t// to expose to both client and host consumers:\n\t\t\t// Client APIs --> adapter_instance.SVC_ID.*()\n\t\t\t// Host calls --> interfaces.SVC_ID.*\n\t\t\tfor (var i = 0, len = svcs.length; i < len; i++)\n\t\t\t{\n\t\t\t\tvar id, aid = svcs[i];\n\t\t\t\tvar idApi = aid.id.toLowerCase();\n\t\t\t\tvar listApis = [];\n\n\t\t\t\tavailableServices[idApi] = aid.targ;\n\t\t\t\trequests[idApi] = generateRequestAction(aid.targ);\n\n\t\t\t\t// Generate public APIs from static internal interfaces\n\t\t\t\tvar targ = intInterfaces[idApi];\n\t\t\t\tfor (id in targ)\n\t\t\t\t{\n\t\t\t\t\tlistApis.push(id); // Advertised host availability\n\t\t\t\t\tcontroller[idApi][id] = targ[id]; // Local client access\n\t\t\t\t}\n\n\t\t\t\t// Generic \"action\" APIs to pass along to hosted object\n\t\t\t\ttarg = Defines[aid.id].REQUESTS;\n\t\t\t\tfor (id in targ)\n\t\t\t\t{\n\t\t\t\t\tlistApis.push(id); // Advertised host availability\n\t\t\t\t\tcontroller[idApi][id] = generateTargAction(aid.targ, id);\t// Local client access\n\t\t\t\t}\n\n\t\t\t\t// Add local-only requests, err, locally\n\t\t\t\ttarg = Defines[aid.id].REQUESTS_LOCAL;\n\t\t\t\tfor (id in targ)\n\t\t\t\t{\n\t\t\t\t\tcontroller[idApi][id] = generateTargAction(aid.targ, id);\t// Local client access (only)\n\t\t\t\t}\n\n\t\t\t\tsettings[idApi] = listApis;\n\t\t\t}\n\n\t\t\t// Add user-defined interfaces, if specified\n\t\t\tvar customInterfaces = cfgAdapter.interfaces;\n\t\t\tif (customInterfaces)\n\t\t\t{\n\t\t\t\trequests.ext = function(data)\n\t\t\t\t{\n\t\t\t\t\treturn customInterfaces[data.id](data.args);\n\t\t\t\t};\n\n\t\t\t\tvar extInterfaces = [];\n\t\t\t\tfor (id in customInterfaces)\n\t\t\t\t{\n\t\t\t\t\textInterfaces.push(id);\n\t\t\t\t\tcontroller.ext[id] = customInterfaces[id];\n\t\t\t\t}\n\n\t\t\t\tsettings.ext = extInterfaces;\n\t\t\t}\n\n\t\t\t// Add local app interfaces\n\t\t\tvar appMethods = {\n\t\t\t\tgetConfig: getConfig,\n\t\t\t\tsendOasisMessage: sendOasisMessage\n\t\t\t};\n\n\t\t\trequests.app = function(data)\n\t\t\t{\n\t\t\t\treturn appMethods[data.id](data.args);\n\t\t\t};\n\n\t\t\tsettings.app = [];\n\t\t\tfor (id in appMethods)\n\t\t\t{\n\t\t\t\tsettings.app.push(id);\n\t\t\t\tcontroller.app[id] = appMethods[id];\n\t\t\t}\n\n\t\t\t// Set up the publishable config\n\t\t\tvar extViewerCfg = lib.generateClone(cfgViewer);\n\t\t\tdelete extViewerCfg.apiKey;\t// Delete sensitive info\n\t\t\tpublishedConfig = { viewer: extViewerCfg, published: lib.generateClone(cfg.published) };\n\n\t\t\t// On connect, advertise interfaces + publishable config settings\n\t\t\tconnectQueue.push({ id: 'Connected', val: $.extend({}, settings, { cfg: publishedConfig }) });\n\n\t\t\tcfgClient.consumers[Defines.PORT] = Oasis.Consumer.extend(\n\t\t\t\t{\n\t\t\t\t\tinitialize: oasisInitialize,\n\t\t\t\t\tevents: events,\t\t// send data/notification --> necessary?\n\t\t\t\t\trequests: requests\t// request data\n\t\t\t\t});\n\n\t\t\toasisLocal.connect(cfgClient);\n\n\t\t\t// Notify of invite loading status\n\t\t\tvar obj = (cfgAdapter.object || {});\n\t\t\tvar initSettings = {\n\t\t\t\tisCard: (card !== null || cardsMode)\n\t\t\t\t, t: invitesTicket\n\t\t\t\t, pg: obj.group || splitMulti(cfgAdapter.pg)\n\t\t\t\t, twt: splitMulti(cfgAdapter.twt)\n\t\t\t\t, g: splitMulti(cfgAdapter.g)\n\t\t\t};\n\n\t\t\tprogressCurrent = 0;\n\t\t\tprogressTotal = (invitesCard.length > 0) ? (5 + 1 * 2) :\n\t\t\t\t\t\t\t((invitesTicket.length > 0) ? 3 : 0);\n\n\t\t\tsendEvent(m.AdapterInit, initSettings);\n\t\t\tupdateProgress();\n\n\t\t\t// Start up CoreController first to get current/new auth token\n\t\t\tdbg('Init core..');\n\t\t\tcoreController.init();\n\t\t};\n\n\t\tthis.loadViewer = function(cfgNew, newMapElement)\n\t\t{\n\t\t\tloadMap(cfgNew, newMapElement);\n\t\t};\n\n\t\tthis.infoUpdate = function(id, invite, owner, t, val)\n\t\t{\n\t\t\tinvite = lib.normalizeInvite(invite);\n\n\t\t\tvar targetCards = mapCardTicketInvites[invite] || [];\n\t\t\tvar info, i;\n\t\t\tvar targetCardsLength = targetCards.length;\n\t\t\t// send event for each card (same user can share same inviteCode to different cards)\n\t\t\tfor (i = (targetCardsLength) ? targetCardsLength - 1 : 0; i >= 0; i--)\n\t\t\t{\n\t\t\t\tinfo = {\n\t\t\t\t\tid: id\n\t\t\t\t\t, invite: invite\n\t\t\t\t\t, owner: owner\n\t\t\t\t\t, card: targetCards[i]\n\t\t\t\t\t, t: t\n\t\t\t\t\t, val: val\n\t\t\t\t};\n\n\t\t\t\tnotifyApp(mStateUpdate, info, false);\n\t\t\t\tsendOasisMessage(mStateUpdate, info);\n\t\t\t}\n\t\t};\n\n\t\tthis.notify = function(msg, args)\n\t\t{\n\t\t\tvar i, idx, idCard, targetCards;\n\n\t\t\tswitch (msg)\n\t\t\t{\n\t\t\t\tcase m.CardInit:\n\t\t\t\tcase m.CardReady:\n\t\t\t\tcase m.CardsInitStart:\n\t\t\t\tcase m.InviteInit:\n\t\t\t\tcase m.ViewerInit:\n\t\t\t\t{\n\t\t\t\t\tupdateProgress();\n\t\t\t\t\tsendEvent(msg, args);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase m.ViewerReady:\n\t\t\t\t{\n\t\t\t\t\t// Break ViewReady out to hand off viewer app reference for local\n\t\t\t\t\t// consumers only. Hosted consumers will only get a notification.\n\t\t\t\t\tupdateProgress();\n\t\t\t\t\tsendOasisMessage(msg, true);\n\t\t\t\t\tnotifyApp(msg, args, true);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase m.ViewerZoomChanged:\n\t\t\t\tcase m.CardsInitEnd:\n\t\t\t\t{\n\t\t\t\t\tsendEvent(msg, args);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase m.CardUpdated:\n\t\t\t\t\t// dbg('card updated', args);\n\n\t\t\t\t\tswitch (args.action)\n\t\t\t\t\t{\n\t\t\t\t\t\tcase 'invite_code_found':\n\t\t\t\t\t\tcase 'member_started_sharing':\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar ticketInvite = args.invite;\n\t\t\t\t\t\t\tif (!mapCardTicketInvites[ticketInvite])\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tmapCardTicketInvites[ticketInvite] = [];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Track ticket invite for this card. Need to handlecases where\n\t\t\t\t\t\t\t// the same invite is used by a member in multiple cards (like bots)\n\t\t\t\t\t\t\tidCard = args.card.getId();\n\t\t\t\t\t\t\tif (mapCardTicketInvites[ticketInvite].indexOf(idCard) < 0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tmapCardTicketInvites[ticketInvite].push(idCard);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcase 'member_stopped_sharing':\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t//Need to send s.InviteEnd and s.InviteCompleted events\n\t\t\t\t\t\t\tthis.infoUpdate(s.InviteEnd, args.invite, args.userId, args.t, args.t);\n\t\t\t\t\t\t\tthis.infoUpdate(s.InviteCompleted, args.invite, args.userId, args.t, true);\n\n\t\t\t\t\t\t\tvar inviteCards = mapCardTicketInvites[args.invite];\n\t\t\t\t\t\t\tif (inviteCards)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tidx = inviteCards.indexOf(args.card.getId());\n\t\t\t\t\t\t\t\tif (idx >= 0)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tinviteCards.splice(idx, 1);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tsendEvent(msg, args);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase m.InviteError:\n\t\t\t\t{\n\t\t\t\t\t//dbg('Invite loading error', args);\n\t\t\t\t\tif (args.data.invite.toJSON)\n\t\t\t\t\t{\n\t\t\t\t\t\targs.data.invite = args.data.invite.toJSON();\n\t\t\t\t\t}\n\n\t\t\t\t\tsendEvent(msg, args);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase m.InviteClicked:\n\t\t\t\t{\n\t\t\t\t\t//dbg('Invite clicked', args);\n\t\t\t\t\tsendEvent(msg, args);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase m.InviteReady:\n\t\t\t\t{\n\t\t\t\t\tif (!args.isLoaded())\n\t\t\t\t\t{\n\t\t\t\t\t\tvar inviteError = args.getError();\n\t\t\t\t\t\tdbg('Invite error state', inviteError);\n\n\t\t\t\t\t\tsendEvent(m.InviteError, args);\n\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\n\t\t\t\t\t//dbg('InviteReady: ' + args.getIdInvite() + ' -- isLoaded=' + args.isLoaded());\n\t\t\t\t\tsendEvent(msg, args);\n\n\t\t\t\t\tidCard = args.getReference();\n\t\t\t\t\t//dbg('Has reference: \"' + idCard + '\"');\n\t\t\t\t\tif (idCard)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (invitesCard.indexOf(idCard) < 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// Track back in case of expired card invite\n\t\t\t\t\t\t\tinvitesReferences[idCard] = args.getIdInvite();\n\n\t\t\t\t\t\t\tprogressTotal += (5 + 1 * 2) - 2;\n\t\t\t\t\t\t\tinvitesCard.push(idCard);\n\t\t\t\t\t\t\t//sendEvent(m.AdapterInit, { isCard: true });\n\t\t\t\t\t\t\tupdateProgress();\n\t\t\t\t\t\t\t//cardsController.init(invitesCard);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\t// Use the original invite list\n\t\t\t\t\t\tprogressTotal += (3 - 1);\n\t\t\t\t\t\tupdateProgress();\n\t\t\t\t\t\tcfgViewer.t = args.getIdInvite();\t// FIXME: Breaks for multiple initial invites\n\n\t\t\t\t\t\tloadMap(cfgViewer);\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase m.CardAdded:\n\t\t\t\t{\n\t\t\t\t\tsendEvent(msg, args);\n\t\t\t\t\t//dbg(msg, args);//(msg === m.DataUpdate) ? args : undefined);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase m.CardRemoved:\n\t\t\t\t{\n\t\t\t\t\tidCard = args.getId();\n\n\t\t\t\t\t// Remove this card from all tracked ticket invites\n\t\t\t\t\tfor (var id in mapCardTicketInvites)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar inv = mapCardTicketInvites[id];\n\t\t\t\t\t\tif (!inv)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tidx = inv.indexOf(idCard);\n\t\t\t\t\t\tif (idx >= 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tinv.splice(idx, 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tsendEvent(msg, args);\n\t\t\t\t\t//dbg(msg, args);//(msg === m.DataUpdate) ? args : undefined);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase m.DataUpdate:\n\t\t\t\tcase m.InviteAdded:\n\t\t\t\tcase m.InviteRemoved:\n\t\t\t\t{\n\t\t\t\t\tif (inviteCards || cardsMode)\n\t\t\t\t\t{\n\t\t\t\t\t\ttargetCards = mapCardTicketInvites[args.id] || [];\n\n\t\t\t\t\t\t// send event for each card (same user can share same inviteCode to different cards)\n\t\t\t\t\t\tfor (i = targetCards.length - 1; i >= 0; i--)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsendEvent(msg, $.extend({ card: targetCards[i] }, args));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tsendEvent(msg, args);\n\t\t\t\t\t}\n\t\t\t\t\t//dbg(msg, args);//(msg === m.DataUpdate) ? args : undefined);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase m.AccountLoginStatus:\n\t\t\t\t{\n\t\t\t\t\tif (args.status)\n\t\t\t\t\t{\n\t\t\t\t\t\t// authToken = args.token;\n\t\t\t\t\t\t// cfgAdapter.accountId = cfgViewer.accountId = args.id;\n\t\t\t\t\t\t// cfgAdapter.authToken = cfgViewer.authToken = authToken;\n\t\t\t\t\t\t//dbg('m.AccountInit', args);\n\n\t\t\t\t\t\taccount = coreController.getAccount();\n\t\t\t\t\t\tcfgAdapter.account = account;\n\t\t\t\t\t\tcfgViewer.authToken = account.getToken();\n\n\t\t\t\t\t\targs.account = account;\n\n\t\t\t\t\t\tif (glympseLoader)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tglympseLoader.notify(msg, args);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (cardsController)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcardsController.notify(msg, args);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// do not pass \"account\" to consumers\n\t\t\t\t\t\tdelete args.account;\n\t\t\t\t\t}\n\n\t\t\t\t\tsendEvent(msg, args);\n\n\t\t\t\t\tif (!initialized && args.status)\n\t\t\t\t\t{\n\t\t\t\t\t\tinitialized = true;\n\t\t\t\t\t\tloadInvites();\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase m.AccountDeleteStatus:\n\t\t\t\t{\n\t\t\t\t\tif (glympseLoader)\n\t\t\t\t\t{\n\t\t\t\t\t\tglympseLoader.notify(msg, args);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (cardsController)\n\t\t\t\t\t{\n\t\t\t\t\t\tcardsController.notify(msg, args);\n\t\t\t\t\t}\n\n\t\t\t\t\tsendEvent(msg, args);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase m.AccountCreateStatus:\n\t\t\t\tcase m.CreateRequestStatus:\n\t\t\t\tcase m.UserNameUpdateStatus:\n\t\t\t\tcase m.UserAvatarUpdateStatus:\n\t\t\t\tcase m.UserInfoStatus:\n\t\t\t\tcase m.CardsJoinRequestStatus:\n\t\t\t\tcase m.CardsJoinRequestCancelStatus:\n\t\t\t\tcase m.CardActivityStatus:\n\t\t\t\tcase m.CardsActiveJoinRequestsStatus:\n\t\t\t\tcase m.CardRemoveMemberStatus:\n\t\t\t\tcase m.CardsLocationRequestStatus:\n\t\t\t\tcase m.CardsRequestStatus:\n\t\t\t\t{\n\t\t\t\t\tsendEvent(msg, args);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase m.GroupLoaded:\n\t\t\t\tcase m.GroupStatus:\n\t\t\t\tcase m.OrgObjects:\n\t\t\t\tcase m.EtaInfo:\n\t\t\t\t{\n\t\t\t\t\tsendEvent(msg, args);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tdefault:\n\t\t\t\t{\n\t\t\t\t\tdbg('notify(): unknown msg: \"' + msg + '\"', args);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t};\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// EVENT HANDLERS\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\t\tfunction loadInvites()\n\t\t{\n\t\t\tsendEvent(m.AdapterReady, { cards: invitesCard, tickets: invitesTicket });\n\n\t\t\t// Various invite types handled by the map\n\t\t\tvar t = cfgAdapter.t;\t\t// Core invite\n\t\t\tvar pg = cfgAdapter.pg;\t\t// Core group (public)\n\t\t\tvar twt = cfgAdapter.twt;\t// Twitter user (@) query\n\t\t\tvar g = cfgAdapter.g;\t\t// Twitter topic (#) query\n\n\t\t\t// Card vs Glympse Invite loading\n\t\t\tif (invitesCard.length > 0 || cardsMode)\n\t\t\t{\n\t\t\t\tcardsController.init(invitesCard);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// During init, look for an object `object`, if it exists, and it has a member of \"group\",\n\t\t\t// then use this as an initialization for a new Glympse public group to begin loading/parsing, bypassing the normal initial group load\n\t\t\tvar obj = cfgAdapter.object || {};\n\t\t\tif (obj.group || pg)\n\t\t\t{\n\t\t\t\t//dbg('Initial group header received, start processing...', obj);\n\t\t\t\tcoreController.cmd(coreReq.addGroup, obj.group || pg);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Straight invite types to load\n\t\t\tif (t || g || twt)\n\t\t\t{\n\t\t\t\tcfgViewer.t = t;\n\t\t\t\tcfgViewer.twt = twt;\n\t\t\t\tcfgViewer.g = g;\n\n\t\t\t\tloadMap(cfgViewer);\n\t\t\t}\n\t\t}\n\n\t\tfunction loadMap(cfgNew, newMapElement)\n\t\t{\n\t\t\tdbg('loadMap!');\n\n\t\t\t//console.log('cfg.viewer=' + cfgMonitor.viewer);\n\t\t\t$.extend(cfgViewer, cfgNew);\n\n\t\t\tif (newMapElement)\n\t\t\t{\n\t\t\t\tcfgMonitor.viewer = newMapElement;\n\t\t\t}\n\n\t\t\tif (cfgMonitor.viewer)\n\t\t\t{\n\t\t\t\t//FixMe: viewer can't be initialized w/o invite, so pass incorrect one for now\n\t\t\t\tcfgViewer.t = cfgViewer.t || 'incorrect';\n\n\t\t\t\tviewerMonitor.run();\n\t\t\t\t$(cfgMonitor.viewer).glympser(cfgViewer);\n\t\t\t}\n\t\t}\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// INTERNAL\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\t\tfunction splitMulti(val)\n\t\t{\n\t\t\treturn (val && val.split(';'));\n\t\t}\n\n\t\tfunction joinMulti(val)\n\t\t{\n\t\t\treturn (val && val.split(';'));\n\t\t}\n\n\t\tfunction generateTargAction(targ, id)\n\t\t{\n\t\t\treturn function(data)\n\t\t\t{\n\t\t\t\treturn targ.cmd(id, data);\n\t\t\t};\n\t\t}\n\n\t\tfunction generateRequestAction(targ)\n\t\t{\n\t\t\treturn function(data)\n\t\t\t{\n\t\t\t\tvar result = targ.cmd(data.id, data.args);\n\t\t\t\treturn ((result !== undefined) ? result : true);\n\t\t\t};\n\t\t}\n\n\t\tfunction updateProgress()\n\t\t{\n\t\t\tsendEvent(m.Progress,\n\t\t\t\t{\n\t\t\t\t\tcurr: Math.min(++progressCurrent, progressTotal)\n\t\t\t\t\t, total: progressTotal\n\t\t\t\t});\n\t\t}\n\n\t\tfunction notifyApp(msg, args, evtMsg)\n\t\t{\n\t\t\tif ((!evtMsg && cfgAdapter.hideUpdates) || (evtMsg && cfgAdapter.hideEvents))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tapp.notify(msg, args);\n\t\t}\n\n\t\tfunction sendEvent(msg, args)\n\t\t{\n\t\t\tsendOasisMessage(msg, args);\n\t\t\tnotifyApp(msg, args, true);\n\t\t}\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// CLIENT-MODE OASIS HANDLERS\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\t\t// Once the port is initialized, send along the \"Connect\" command to the host\n\t\tfunction oasisInitialize(newPort, name)\n\t\t{\n\t\t\tdbg('**** Consumer Init **** q=' + connectQueue.length);\n\n\t\t\tport = newPort;\n\t\t\tconnectedOasis = true;\n\n\t\t\tfor (var i = 0, len = connectQueue.length; i < len; i++)\n\t\t\t{\n\t\t\t\tvar q = connectQueue[i];\n\t\t\t\t//dbg('Sending: ' + q.id);\n\t\t\t\tthis.send(q.id, q.val);\n\t\t\t}\n\n\t\t\tconnectQueue = [];\n\n\t\t\tvar extInit = cfgAdapter.initialize;\n\t\t\tif (extInit)\n\t\t\t{\n\t\t\t\textInit(name);\n\t\t\t}\n\t\t}\n\n\t\tfunction sendOasisMessage(id, val)\n\t\t{\n\t\t\tif (connectedOasis)\n\t\t\t{\n\t\t\t\t//dbg('send \"' + id + '\" ', val);\n\t\t\t\tport.send(id, (val && val.toJSON && val.toJSON()) || val);\n\t\t\t}\n\t\t\telse if (connectQueueEnabled && (connectQueueMaxSize < 0 || connectQueue.length < connectQueueMaxSize))\n\t\t\t{\n\t\t\t\tconnectQueue.push({id: id, val: val});\n\t\t\t}\n\t\t}\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// HOST REQUEST HANDLERS (APP)\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\t\tfunction getConfig()\n\t\t{\n\t\t\treturn publishedConfig;\n\t\t}\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// HOST REQUEST HANDLERS (MAP)\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\t\tfunction getInviteProperties(idInvite)\n\t\t{\n\t\t\tif (!viewerMonitor)\n\t\t\t{\n\t\t\t\treturn 'NOT_INITIALIZED';\n\t\t\t}\n\n\t\t\treturn viewerMonitor.getCurrentProperties(idInvite);\n\t\t}\n\n\t\t// cfgInvite = { idProperty: name_of_property_to_retrieve\n\t\t//\t\t\t   , idInvite:   glympse_invite_id --> can be null if first invite is targetted\n\t\t//\t\t\t   }\n\t\tfunction getInviteProperty(cfgInvite)\n\t\t{\n\t\t\tif (!viewerMonitor)\n\t\t\t{\n\t\t\t\treturn 'NOT_INITIALIZED';\n\t\t\t}\n\n\t\t\treturn viewerMonitor.getCurrentValue(cfgInvite.idProperty, cfgInvite.idInvite);\n\t\t}\n\n\t\t/*\t\tfunction requestPing(str)\n\t\t {\n\t\t return new Oasis.RSVP.Promise(function(resolve, reject)\n\t\t {\n\t\t var delay = 100;\n\t\t setTimeout(function()\n\t\t {\n\t\t resolve('PONG - ' + str + ' (delayed ' + delay + 'ms)');\n\t\t }, delay);\n\t\t });\n\t\t }*/\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// HOST EVENT HANDLERS\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\t\tfunction setUserInfo(data)\n\t\t{\n\t\t\tdbg('setUserInfo', data);\n\t\t}\n\t}\n\n\n\tmodule.exports = Client;\n});\n\n","// App entry point\ndefine('glympse-adapter/adapter/Host',['require','exports','module','glympse-adapter/lib/utils','glympse-adapter/GlympseAdapterDefines','oasis'],function(require, exports, module)\n{\n    'use strict';\n\n\t// imports\n\tvar lib = require('glympse-adapter/lib/utils');\n\tvar Defines = require('glympse-adapter/GlympseAdapterDefines');\n\tvar Oasis = require('oasis');\n\n\n\tfunction Host(controller, oasisLocal, cfg)\n\t{\n\t\tvar cfgApp = (cfg && cfg.app) || {};\n\t\tvar cfgAdapter = (cfg && cfg.adapter) || {};\n\n\t\tvar dbg = lib.dbg('Host', cfgApp.dbg);\n\n\t\t// state\n\t\tvar port;\n\t\tvar sandbox;\n\n\t\tvar callbackInitialized;\t// Channel created\n\t\tvar callbackConnected;\t\t// Channel established\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// PUBLICS\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\t\tthis.init = function(settings)\n\t\t{\n\t\t\tcallbackInitialized = settings.initialize;\n\t\t\tcallbackConnected = settings.connect;\n\n\t\t\tvar events = settings.events || {};\n\t\t\tevents.Connected = connect;\n\n\t\t\tvar idPort = Defines.PORT;\n\t\t\tvar cfgSandbox = { url: settings.url,\n\t\t\t\t\t\t\t   type: 'html',\n\t\t\t\t\t\t\t   capabilities: [ idPort ],\n\t\t\t\t\t\t\t   services: { },\n\t\t\t\t\t\t\t   sandbox: settings.sandbox\n\t\t\t\t\t\t\t };\n\n\t\t\tcfgSandbox.services[idPort] = Oasis.Service.extend(\n\t\t\t\t{\n\t\t\t\t\tinitialize: initialize,\n\t\t\t\t\tevents: events,\n\t\t\t\t\trequests:\n\t\t\t\t\t{\n\t\t\t\t\t\tgetInfo: requestGetInfo\n\t\t\t\t\t\t//, ping: requestPing\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\tsandbox = oasisLocal.createSandbox(cfgSandbox);\n\n\t\t\treturn sandbox.el;\n\t\t};\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// INTERNAL\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\t\tfunction initialize(newPort, name)\n\t\t{\n\t\t\tport = newPort;\n\n\t\t\t//dbg('GlympseHost initialized --- \"' + name + '\"');\n\t\t\tif (callbackInitialized)\n\t\t\t{\n\t\t\t\tcallbackInitialized(name);\n\t\t\t}\n\t\t}\n\n\t\tfunction connect(data)\n\t\t{\n\t\t\t//dbg('GlympseHost connect --- data', data);\n\t\t\t//port = sandbox.capabilities[Defines.PORT];\n\n\t\t\tdbg('clientConnected: \"' + data.id + '\" v(' + data.version + ')');\n\t\t\tvar interfaceTypes = [ 'map', 'card', 'core', 'ext', 'app' ];\n\n\t\t\t// Generate API endpoints on main GA instance based on\n\t\t\t// the advertised interfaces from the client\n\t\t\tfor (var i = 0, len = interfaceTypes.length; i < len; i++)\n\t\t\t{\n\t\t\t\tvar intType = interfaceTypes[i];\n\t\t\t\tvar interfaces = (data && data[intType]);\n\n\t\t\t\tif (interfaces)\n\t\t\t\t{\n\t\t\t\t\tfor (var j = 0, jlen = interfaces.length; j < jlen; j++)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar id = interfaces[j];\n\t\t\t\t\t\tcontroller[intType][id] = generateCustomInterface(intType, id);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (callbackConnected)\n\t\t\t{\n\t\t\t\tcallbackConnected(data);\n\t\t\t}\n\t\t}\n\n\t\tfunction requestGetInfo(infoType)\n\t\t{\n\t\t\tdbg('[request.getInfo]', infoType);\n\t\t\tswitch (infoType)\n\t\t\t{\n\t\t\t\tdefault:\n\t\t\t\t{\n\t\t\t\t\treturn { error: 'Unknown infoType \"' + infoType + '\"' };\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction generateCustomInterface(intType, id)\n\t\t{\n\t\t\tvar request = { id: id, args: null };\n\n\t\t\treturn function(args)\n\t\t\t{\n\t\t\t\trequest.args = args;\n\t\t\t\treturn port.request(intType, request);\n\t\t\t};\n\t\t}\n\n/*\t\tfunction requestPing(str)\n\t\t{\n\t\t\treturn new Oasis.RSVP.Promise(function(resolve, reject)\n\t\t\t{\n\t\t\t\tvar delay = 100;\n\t\t\t\tsetTimeout(function()\n\t\t\t\t{\n\t\t\t\t\tresolve('PONG - ' + str + ' (delayed ' + delay + 'ms)');\n\t\t\t\t}, delay);\n\t\t\t});\n\t\t}*/\n\t}\n\n\n\tmodule.exports = Host;\n});\n\n","// App entry point\ndefine('GlympseAdapter',['require','exports','module','UUID','kamino','MessageChannel','glympse-adapter/lib/utils','oasis','glympse-adapter/VersionInfo','glympse-adapter/adapter/Client','glympse-adapter/adapter/Host','glympse-adapter/lib/ajax'],function(require, exports, module)\n{\n\t'use strict';\n\n\t// Polyfills - external\n\trequire('UUID');\n\trequire('kamino');\n\trequire('MessageChannel');\n\n\t// imports\n\tvar lib = require('glympse-adapter/lib/utils');\n\tvar Oasis = require('oasis');\n\tvar VersionInfo = require('glympse-adapter/VersionInfo');\n\tvar Client = require('glympse-adapter/adapter/Client');\n\tvar Host = require('glympse-adapter/adapter/Host');\n\tvar ajax = require('glympse-adapter/lib/ajax');\n\n\n\t// Faked AMD module setup -- necessary??\n\tif (!window.Oasis)\n\t{\n\t\twindow.Oasis = Oasis;\t\t\t// Needed for some Oasis modules\n\t}\n\n\n\tfunction GlympseAdapter(controller, cfg)\n\t{\n\t\tvar adapterLabel = 'GlympseAdapter';\n\n\t\tvar cfgApp = (cfg && cfg.app) || {};\n\t\tvar cfgAdapter = (cfg && cfg.adapter) || {};\n\t\tvar cfgViewer = (cfg && cfg.viewer) || {};\n\t\tvar dbg = lib.dbg(adapterLabel, cfgApp.dbg);\n\n\t\tvar client;\t\t\t// client mode\n\t\tvar host;\t\t\t// host mode\n\t\tvar hostElement;\t// host mode\n\t\tvar oasisLocal;\n\t\tvar that = this;\n\n\t\tvar glympserLoader = null;\n\t\tvar version = VersionInfo.version;\n\n\t\tif (cfgAdapter.appName && cfgAdapter.appVersion && !cfgViewer.appName && !cfgViewer.appVersion)\n\t\t{\n\t\t\tcfgViewer.appName = cfgAdapter.appName;\n\t\t\tcfgViewer.appVersion = cfgAdapter.appVersion;\n\t\t}\n\n\t\tcfgAdapter.appName = cfgAdapter.appName || adapterLabel;\n\t\tcfgAdapter.appVersion = cfgAdapter.appVersion || version;\n\n\t\tajax.requestHeaders = {\n\t\t\t'X-GlympseAgent': ('app=' + cfgAdapter.appName\n\t\t\t\t\t\t\t\t+ '&ver=' + cfgAdapter.appVersion\n\t\t\t\t\t\t\t\t+ '&comp=' + adapterLabel\n\t\t\t\t\t\t\t\t+ '&comp_ver=' + version)\n\t\t};\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// API endpoint namespace (updated at runtime)\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\t\tthis.app = {};\n\t\tthis.cards = {};\n\t\tthis.core = {};\n\t\tthis.ext = {};\n\t\tthis.map = {};\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// PROPERTIES\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\t\t//this.getViewer = function()\n\t\t//{\n\t\t//\treturn (client && client.getViewer());\n\t\t//};\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// PUBLICS\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\t\tthis.loadViewer = function(cfgNew, mapHtmlElement)\n\t\t{\n\t\t\tif (!glympserLoader)\n\t\t\t{\n\t\t\t\tdbg('adapter must be initialized in client mode first', null, 3);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tglympserLoader.done(function()\n\t\t\t{\n\t\t\t\tclient.loadViewer(cfgNew, mapHtmlElement);\n\t\t\t});\n\t\t};\n\n\t\tthis.host = function(cfgHost)\n\t\t{\n\t\t\tif (host || client)\n\t\t\t{\n\t\t\t\treturn hostElement;\n\t\t\t}\n\n\t\t\thost = new Host(this, oasisLocal, cfg);\n\t\t\thostElement = host.init(cfgHost);\n\n\t\t\treturn hostElement;\n\t\t};\n\n\t\tthis.client = function(mapHtmlElement)\n\t\t{\n\t\t\tif (host || client)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tglympserLoader = loadGlympser();\n\t\t\tglympserLoader.done(function()\n\t\t\t{\n\t\t\t\tclient = new Client(that\n\t\t\t\t\t, oasisLocal\n\t\t\t\t\t, controller\n\t\t\t\t\t, cfg\n\t\t\t\t\t, (mapHtmlElement && mapHtmlElement[0])\n\t\t\t\t);\n\n\t\t\t\tclient.init({\n\t\t\t\t\t  id: VersionInfo.id\n\t\t\t\t\t, version: VersionInfo.version\n\t\t\t\t});\n\t\t\t});\n\t\t};\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// INTERNAL\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\t\tfunction loadGlympser()\n\t\t{\n\t\t\tvar loader = $.Deferred();\n\t\t\tif ($.fn.glympser)\n\t\t\t{\n\t\t\t\tdbg('glympser loader is already included in the page - use existing.');\n\t\t\t\tloader.resolve();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvar loaderUrl = cfgAdapter.loaderPath ||\n\t\t\t\t\t\t\t\t[ '//'\n\t\t\t\t\t\t\t\t, ((cfgAdapter.loaderEnvironment === 'sandbox' || cfgAdapter.sandbox) ? 's-' : '')\n\t\t\t\t\t\t\t\t, 'viewer.content.glympse.com/components/glympse-viewer/'\n\t\t\t\t\t\t\t\t, (cfgAdapter.loaderVersion || 'stable')\n\t\t\t\t\t\t\t\t, '/jquery.glympser.min.js'\n\t\t\t\t\t\t\t\t].join('');\n\n\t\t\t\tdbg('loading glympser loader from', loaderUrl);\n\t\t\t\t$.ajax({ dataType: 'script', cache: true, url: loaderUrl })\n\t\t\t\t\t.done(function()\n\t\t\t\t\t{\n\t\t\t\t\t\tdbg('.. loaded glympser loader!');\n\t\t\t\t\t\tloader.resolve();\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function()\n\t\t\t\t\t{\n\t\t\t\t\t\tdbg('Failed to load Loader script:', arguments, 3);\n\t\t\t\t\t\tloader.reject();\n\t\t\t\t\t});\n\t\t\t}\n\t\t\treturn loader;\n\t\t}\n\n\n\t\t///////////////////////////////////////////////////////////////////////////////\n\t\t// CTOR\n\t\t///////////////////////////////////////////////////////////////////////////////\n\n\t\toasisLocal = new Oasis();\t\t\t// Found in minified source\n\t\toasisLocal.autoInitializeSandbox();\t// Found in minified source\n\t\toasisLocal.configure('allowSameOrigin', true);\n\t}\n\n\n\t// Global namespace registration\n\t(function(w) {\n\t\tvar g = w.glympse || {};\n\t\t/* eslint-disable no-unused-expressions */\n\t\tg.GlympseAdapter || (g.GlympseAdapter = GlympseAdapter);\n\t\t/* eslint-enable no-unused-expressions */\n\t\tw.glympse = g;\n\t})(window);\n\n\tmodule.exports = GlympseAdapter;\n});\n\n","\nrequire([\"GlympseAdapter\"]);\n"]}